var ll=Object.defineProperty;var rl=(t,e,l)=>e in t?ll(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var lt=(t,e,l)=>(rl(t,typeof e!="symbol"?e+"":e,l),l);const il=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=l(r);fetch(r.href,i)}};il();function D(){}const ht=t=>t;function pe(t,e){for(const l in e)t[l]=e[l];return t}function Hn(t){return t()}function gn(){return Object.create(null)}function re(t){t.forEach(Hn)}function Je(t){return typeof t=="function"}function G(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ol(t){return Object.keys(t).length===0}function Tt(t,...e){if(t==null)return D;const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function sl(t){let e;return Tt(t,l=>e=l)(),e}function ue(t,e,l){t.$$.on_destroy.push(Tt(e,l))}function Bt(t,e,l,n){if(t){const r=Un(t,e,l,n);return t[0](r)}}function Un(t,e,l,n){return t[1]&&n?pe(l.ctx.slice(),t[1](n(e))):l.ctx}function Nt(t,e,l,n){if(t[2]&&n){const r=t[2](n(l));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(e.dirty.length,r.length);for(let s=0;s<o;s+=1)i[s]=e.dirty[s]|r[s];return i}return e.dirty|r}return e.dirty}function jt(t,e,l,n,r,i){if(r){const o=Un(e,l,n,i);t.p(o,r)}}function Mt(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function $t(t){const e={};for(const l in t)l[0]!=="$"&&(e[l]=t[l]);return e}function mn(t,e){const l={};e=new Set(e);for(const n in t)!e.has(n)&&n[0]!=="$"&&(l[n]=t[n]);return l}function at(t){return t==null?"":t}const qn=typeof window!="undefined";let It=qn?()=>window.performance.now():()=>Date.now(),Dt=qn?t=>requestAnimationFrame(t):D;const Re=new Set;function Gn(t){Re.forEach(e=>{e.c(t)||(Re.delete(e),e.f())}),Re.size!==0&&Dt(Gn)}function zt(t){let e;return Re.size===0&&Dt(Gn),{promise:new Promise(l=>{Re.add(e={c:t,f:l})}),abort(){Re.delete(e)}}}function m(t,e){t.appendChild(e)}function Vn(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function al(t){const e=v("style");return cl(Vn(t),e),e.sheet}function cl(t,e){m(t.head||t,e)}function A(t,e,l){t.insertBefore(e,l||null)}function P(t){t.parentNode.removeChild(t)}function qe(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function v(t){return document.createElement(t)}function F(t){return document.createTextNode(t)}function R(){return F(" ")}function ge(){return F("")}function L(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function b(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function ct(t,e){const l=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:l[n]&&l[n].set?t[n]=e[n]:b(t,n,e[n])}function ul(t){return Array.from(t.childNodes)}function Ye(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ce(t,e){t.value=e==null?"":e}function fl(t,e,l,n){l===null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function te(t,e,l){t.classList[l?"add":"remove"](e)}function Kn(t,e,{bubbles:l=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,l,n,e),r}const ut=new Map;let ft=0;function pl(t){let e=5381,l=t.length;for(;l--;)e=(e<<5)-e^t.charCodeAt(l);return e>>>0}function dl(t,e){const l={stylesheet:al(e),rules:{}};return ut.set(t,l),l}function pt(t,e,l,n,r,i,o,s=0){const a=16.666/n;let c=`{
`;for(let f=0;f<=1;f+=a){const g=e+(l-e)*i(f);c+=f*100+`%{${o(g,1-g)}}
`}const u=c+`100% {${o(l,1-l)}}
}`,p=`__svelte_${pl(u)}_${s}`,h=Vn(t),{stylesheet:_,rules:d}=ut.get(h)||dl(h,t);d[p]||(d[p]=!0,_.insertRule(`@keyframes ${p} ${u}`,_.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?`${$}, `:""}${p} ${n}ms linear ${r}ms 1 both`,ft+=1,p}function dt(t,e){const l=(t.style.animation||"").split(", "),n=l.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=l.length-n.length;r&&(t.style.animation=n.join(", "),ft-=r,ft||gl())}function gl(){Dt(()=>{ft||(ut.forEach(t=>{const{stylesheet:e}=t;let l=e.cssRules.length;for(;l--;)e.deleteRule(l);t.rules={}}),ut.clear())})}let Ge;function He(t){Ge=t}function Qe(){if(!Ge)throw new Error("Function called outside component initialization");return Ge}function _t(t){Qe().$$.on_mount.push(t)}function Ze(t){Qe().$$.on_destroy.push(t)}function ml(){const t=Qe();return(e,l,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=Kn(e,l,{cancelable:n});return r.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Ct(t,e){return Qe().$$.context.set(t,e),e}function ve(t){return Qe().$$.context.get(t)}function hl(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Fe=[],hn=[],it=[],_n=[],_l=Promise.resolve();let St=!1;function bl(){St||(St=!0,_l.then(Jn))}function Z(t){it.push(t)}const vt=new Set;let rt=0;function Jn(){const t=Ge;do{for(;rt<Fe.length;){const e=Fe[rt];rt++,He(e),vl(e.$$)}for(He(null),Fe.length=0,rt=0;hn.length;)hn.pop()();for(let e=0;e<it.length;e+=1){const l=it[e];vt.has(l)||(vt.add(l),l())}it.length=0}while(Fe.length);for(;_n.length;)_n.pop()();St=!1,vt.clear(),He(t)}function vl(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}let Le;function Lt(){return Le||(Le=Promise.resolve(),Le.then(()=>{Le=null})),Le}function be(t,e,l){t.dispatchEvent(Kn(`${e?"intro":"outro"}${l}`))}const ot=new Set;let ne;function U(){ne={r:0,c:[],p:ne}}function q(){ne.r||re(ne.c),ne=ne.p}function y(t,e){t&&t.i&&(ot.delete(t),t.i(e))}function S(t,e,l,n){if(t&&t.o){if(ot.has(t))return;ot.add(t),ne.c.push(()=>{ot.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}}const Ft={duration:0};function Rt(t,e,l){let n=e(t,l),r=!1,i,o,s=0;function a(){i&&dt(t,i)}function c(){const{delay:p=0,duration:h=300,easing:_=ht,tick:d=D,css:$}=n||Ft;$&&(i=pt(t,0,1,h,p,_,$,s++)),d(0,1);const f=It()+p,g=f+h;o&&o.abort(),r=!0,Z(()=>be(t,!0,"start")),o=zt(x=>{if(r){if(x>=g)return d(1,0),be(t,!0,"end"),a(),r=!1;if(x>=f){const w=_((x-f)/h);d(w,1-w)}}return r})}let u=!1;return{start(){u||(u=!0,dt(t),Je(n)?(n=n(),Lt().then(c)):c())},invalidate(){u=!1},end(){r&&(a(),r=!1)}}}function Yn(t,e,l){let n=e(t,l),r=!0,i;const o=ne;o.r+=1;function s(){const{delay:a=0,duration:c=300,easing:u=ht,tick:p=D,css:h}=n||Ft;h&&(i=pt(t,1,0,c,a,u,h));const _=It()+a,d=_+c;Z(()=>be(t,!1,"start")),zt($=>{if(r){if($>=d)return p(0,1),be(t,!1,"end"),--o.r||re(o.c),!1;if($>=_){const f=u(($-_)/c);p(1-f,f)}}return r})}return Je(n)?Lt().then(()=>{n=n(),s()}):s(),{end(a){a&&n.tick&&n.tick(1,0),r&&(i&&dt(t,i),r=!1)}}}function de(t,e,l,n){let r=e(t,l),i=n?0:1,o=null,s=null,a=null;function c(){a&&dt(t,a)}function u(h,_){const d=h.b-i;return _*=Math.abs(d),{a:i,b:h.b,d,duration:_,start:h.start,end:h.start+_,group:h.group}}function p(h){const{delay:_=0,duration:d=300,easing:$=ht,tick:f=D,css:g}=r||Ft,x={start:It()+_,b:h};h||(x.group=ne,ne.r+=1),o||s?s=x:(g&&(c(),a=pt(t,i,h,d,_,$,g)),h&&f(0,1),o=u(x,d),Z(()=>be(t,h,"start")),zt(w=>{if(s&&w>s.start&&(o=u(s,d),s=null,be(t,o.b,"start"),g&&(c(),a=pt(t,i,o.b,o.duration,0,$,r.css))),o){if(w>=o.end)f(i=o.b,1-i),be(t,o.b,"end"),s||(o.b?c():--o.group.r||re(o.group.c)),o=null;else if(w>=o.start){const C=w-o.start;i=o.a+o.d*$(C/o.duration),f(i,1-i)}}return!!(o||s)}))}return{run(h){Je(r)?Lt().then(()=>{r=r(),p(h)}):p(h)},end(){c(),o=s=null}}}function yl(t,e){S(t,1,1,()=>{e.delete(t.key)})}function wl(t,e,l,n,r,i,o,s,a,c,u,p){let h=t.length,_=i.length,d=h;const $={};for(;d--;)$[t[d].key]=d;const f=[],g=new Map,x=new Map;for(d=_;d--;){const k=p(r,i,d),E=l(k);let z=o.get(E);z?n&&z.p(k,e):(z=c(E,k),z.c()),g.set(E,f[d]=z),E in $&&x.set(E,Math.abs(d-$[E]))}const w=new Set,C=new Set;function B(k){y(k,1),k.m(s,u),o.set(k.key,k),u=k.first,_--}for(;h&&_;){const k=f[_-1],E=t[h-1],z=k.key,X=E.key;k===E?(u=k.first,h--,_--):g.has(X)?!o.has(z)||w.has(z)?B(k):C.has(X)?h--:x.get(z)>x.get(X)?(C.add(z),B(k)):(w.add(X),h--):(a(E,o),h--)}for(;h--;){const k=t[h];g.has(k.key)||a(k,o)}for(;_;)B(f[_-1]);return f}function Wt(t,e){const l={},n={},r={$$scope:1};let i=t.length;for(;i--;){const o=t[i],s=e[i];if(s){for(const a in o)a in s||(n[a]=1);for(const a in s)r[a]||(l[a]=s[a],r[a]=1);t[i]=s}else for(const a in o)r[a]=1}for(const o in n)o in l||(l[o]=void 0);return l}function bn(t){return typeof t=="object"&&t!==null?t:{}}function I(t){t&&t.c()}function j(t,e,l,n){const{fragment:r,on_mount:i,on_destroy:o,after_update:s}=t.$$;r&&r.m(e,l),n||Z(()=>{const a=i.map(Hn).filter(Je);o?o.push(...a):re(a),t.$$.on_mount=[]}),s.forEach(Z)}function M(t,e){const l=t.$$;l.fragment!==null&&(re(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function xl(t,e){t.$$.dirty[0]===-1&&(Fe.push(t),bl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,l,n,r,i,o,s=[-1]){const a=Ge;He(t);const c=t.$$={fragment:null,ctx:null,props:i,update:D,not_equal:r,bound:gn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:gn(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=l?l(t,e.props||{},(p,h,..._)=>{const d=_.length?_[0]:h;return c.ctx&&r(c.ctx[p],c.ctx[p]=d)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](d),u&&xl(t,p)),h}):[],c.update(),u=!0,re(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const p=ul(e.target);c.fragment&&c.fragment.l(p),p.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&y(t.$$.fragment),j(t,e.target,e.anchor,e.customElement),Jn()}He(a)}class Q{$destroy(){M(this,1),this.$destroy=D}$on(e,l){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const r=n.indexOf(l);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!ol(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const kl=window.WEB_APP_BASE_URL,Oe=window.WEB_APP_API_HOST,vn=Oe.startsWith("https"),$l=Oe.replace(vn?"https":"http",vn?"wss":"ws");class Cl{constructor(e,l){lt(this,"wss");lt(this,"callbacks",{board:null,eat:null,error:null,participant:null,highlight:null,gameStatus:null,gameOver:null});lt(this,"callbacksOnMessage",{board:e=>(this.callbacks.board=e,this.callbacksOnMessage),eat:e=>(this.callbacks.eat=e,this.callbacksOnMessage),error:e=>(this.callbacks.error=e,this.callbacksOnMessage),participant:e=>(this.callbacks.participant=e,this.callbacksOnMessage),highlight:e=>(this.callbacks.highlight=e,this.callbacksOnMessage),gameStatus:e=>(this.callbacks.gameStatus=e,this.callbacksOnMessage),gameOver:e=>(this.callbacks.gameOver=e,this.callbacksOnMessage)});this.wss=new WebSocket(`${$l}?roomId=${e}&userName=${l}`)}onEvents(){return this.wss.onmessage=({data:e})=>{var r,i;const{type:l,message:n}=this.parsePayload(e);(i=(r=this.callbacks)[l])==null||i.call(r,n)},this.callbacksOnMessage}onConnect(e){return this.wss.onopen=e,this.onEvents()}onClose(e){this.wss.onclose=e}sendEvent(e,l){this.wss.send(this.getPayload(e,l))}end(){this.wss.close()}parsePayload(e){return JSON.parse(e)}getPayload(e,l){return JSON.stringify({type:e,message:l})}}const Se=[];function Sl(t,e){return{subscribe:W(t,e).subscribe}}function W(t,e=D){let l;const n=new Set;function r(s){if(G(t,s)&&(t=s,l)){const a=!Se.length;for(const c of n)c[1](),Se.push(c,t);if(a){for(let c=0;c<Se.length;c+=2)Se[c][0](Se[c+1]);Se.length=0}}}function i(s){r(s(t))}function o(s,a=D){const c=[s,a];return n.add(c),n.size===1&&(l=e(r)||D),s(t),()=>{n.delete(c),n.size===0&&(l(),l=null)}}return{set:r,update:i,subscribe:o}}function Rl(t,e,l){const n=!Array.isArray(t),r=n?[t]:t,i=e.length<2;return Sl(l,o=>{let s=!1;const a=[];let c=0,u=D;const p=()=>{if(c)return;u();const _=e(n?a[0]:a,o);i?o(_):u=Je(_)?_:D},h=r.map((_,d)=>Tt(_,$=>{a[d]=$,c&=~(1<<d),s&&p()},()=>{c|=1<<d}));return s=!0,p(),function(){re(h),u()}})}const Ve=W(null);Ve.subscribe(t=>console.log("err",t));const Ue={error:W(null),eat:W(null),board:W([]),participantRole:W(null),participantIn:W(null),participantOut:W(null),highlight:W([]),gameOver:W(!1)},Qn=W(null);var Ot=(t=>(t.Move="move",t.Highlight="highlight",t))(Ot||{});function Zn(t){const e=t-1;return e*e*e+1}function fe(t,{delay:e=0,duration:l=400,easing:n=ht}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:l,easing:n,css:i=>`opacity: ${i*r}`}}function Ae(t,{delay:e=0,duration:l=400,easing:n=Zn,x:r=0,y:i=0,opacity:o=0}={}){const s=getComputedStyle(t),a=+s.opacity,c=s.transform==="none"?"":s.transform,u=a*(1-o);return{delay:e,duration:l,easing:n,css:(p,h)=>`
			transform: ${c} translate(${(1-p)*r}px, ${(1-p)*i}px);
			opacity: ${a-u*h}`}}function Ol(t,{delay:e=0,duration:l=400,easing:n=Zn,start:r=0,opacity:i=0}={}){const o=getComputedStyle(t),s=+o.opacity,a=o.transform==="none"?"":o.transform,c=1-r,u=s*(1-i);return{delay:e,duration:l,easing:n,css:(p,h)=>`
			transform: ${a} scale(${1-c*h});
			opacity: ${s-u*h}
		`}}function Pl(t){let e,l,n,r,i;return{c(){e=v("div"),b(e,"class",l=at(`figure ${t[0].color}`)+" svelte-yq1388")},m(o,s){A(o,e,s),i=!0},p(o,[s]){t=o,(!i||s&1&&l!==(l=at(`figure ${t[0].color}`)+" svelte-yq1388"))&&b(e,"class",l)},i(o){i||(Z(()=>{r&&r.end(1),n=Rt(e,t[2],{delay:t[1]}),n.start()}),i=!0)},o(o){n&&n.invalidate(),r=Yn(e,t[3],{delay:t[1]}),i=!1},d(o){o&&P(e),o&&r&&r.end()}}}function Al(t,e,l){let n,r,i,{figure:o}=e,{animDelay:s=0}=e,{isFirstRender:a=!0}=e;return t.$$set=c=>{"figure"in c&&l(0,o=c.figure),"animDelay"in c&&l(4,s=c.animDelay),"isFirstRender"in c&&l(5,a=c.isFirstRender)},t.$$.update=()=>{t.$$.dirty&32&&l(3,n=fe),t.$$.dirty&32&&l(2,r=a?Ol:fe),t.$$.dirty&48&&l(1,i=a?500+s:0)},[o,i,r,n,s,a]}class Ht extends Q{constructor(e){super(),Y(this,e,Al,Pl,G,{figure:0,animDelay:4,isFirstRender:5})}}function yn(t){let e,l;return e=new Ht({props:{figure:t[0].figure,animDelay:t[1],isFirstRender:t[2]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.figure=n[0].figure),r&2&&(i.animDelay=n[1]),r&4&&(i.isFirstRender=n[2]),e.$set(i)},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function El(t){let e,l,n,r,i,o=t[0].figure&&yn(t);return{c(){e=v("div"),o&&o.c(),b(e,"class",l=at(`cell ${t[0].color} d-flex center`)+" svelte-1schn10"),te(e,"highlight",t[3])},m(s,a){A(s,e,a),o&&o.m(e,null),n=!0,r||(i=L(e,"click",t[4]),r=!0)},p(s,[a]){s[0].figure?o?(o.p(s,a),a&1&&y(o,1)):(o=yn(s),o.c(),y(o,1),o.m(e,null)):o&&(U(),S(o,1,1,()=>{o=null}),q()),(!n||a&1&&l!==(l=at(`cell ${s[0].color} d-flex center`)+" svelte-1schn10"))&&b(e,"class",l),a&9&&te(e,"highlight",s[3])},i(s){n||(y(o),n=!0)},o(s){S(o),n=!1},d(s){s&&P(e),o&&o.d(),r=!1,i()}}}function Tl(t,e,l){let{cell:n}=e,{animFigureDelay:r=0}=e,{isFirstRender:i}=e,o=!1;const s=p=>p.findIndex(({col:h,row:_})=>h===n.col&&_===n.row)!==-1,a=Ue.highlight.subscribe(p=>{l(3,o=s(p))}),c=(p,h)=>({[p]:{id:h.id}}),u=()=>{Qn.update(p=>p?p.from.id===n.id?null:s(sl(Ue.highlight))?{...p,...c("to",n)}:n.figure?c("from",n):null:c("from",n))};return Ze(()=>{a()}),t.$$set=p=>{"cell"in p&&l(0,n=p.cell),"animFigureDelay"in p&&l(1,r=p.animFigureDelay),"isFirstRender"in p&&l(2,i=p.isFirstRender)},[n,r,i,o,u]}class Bl extends Q{constructor(e){super(),Y(this,e,Tl,El,G,{cell:0,animFigureDelay:1,isFirstRender:2})}}function wn(t,e,l){const n=t.slice();return n[7]=e[l],n[9]=l,n}function xn(t){let e,l=[],n=new Map,r,i,o=t[0];const s=a=>a[7].id;for(let a=0;a<o.length;a+=1){let c=wn(t,o,a),u=s(c);n.set(u,l[a]=kn(u,c))}return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();b(e,"class","board svelte-my1oz1")},m(a,c){A(a,e,c);for(let u=0;u<l.length;u+=1)l[u].m(e,null);i=!0},p(a,c){c&3&&(o=a[0],U(),l=wl(l,c,s,1,a,o,n,e,yl,kn,null,wn),q())},i(a){if(!i){for(let c=0;c<o.length;c+=1)y(l[c]);Z(()=>{r||(r=de(e,Ae,{y:-100,duration:500},!0)),r.run(1)}),i=!0}},o(a){for(let c=0;c<l.length;c+=1)S(l[c]);r||(r=de(e,Ae,{y:-100,duration:500},!1)),r.run(0),i=!1},d(a){a&&P(e);for(let c=0;c<l.length;c+=1)l[c].d();a&&r&&r.end()}}}function kn(t,e){let l,n,r;return n=new Bl({props:{cell:e[7],animFigureDelay:e[9]*5,isFirstRender:e[1]}}),n.$on("unselect",e[5]),{key:t,first:null,c(){l=ge(),I(n.$$.fragment),this.first=l},m(i,o){A(i,l,o),j(n,i,o),r=!0},p(i,o){e=i;const s={};o&1&&(s.cell=e[7]),o&1&&(s.animFigureDelay=e[9]*5),o&2&&(s.isFirstRender=e[1]),n.$set(s)},i(i){r||(y(n.$$.fragment,i),r=!0)},o(i){S(n.$$.fragment,i),r=!1},d(i){i&&P(l),M(n,i)}}}function Nl(t){let e,l,n=t[2]&&xn(t);return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[2]?n?(n.p(r,i),i&4&&y(n,1)):(n=xn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(U(),S(n,1,1,()=>{n=null}),q())},i(r){l||(y(n),l=!0)},o(r){S(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}function jl(t,e,l){let n,r,{cells:i=[]}=e,{highlightedCells:o=[]}=e;console.log(i);let s=!0;_t(()=>{setTimeout(()=>{l(1,s=!1)},100)});function a(c){hl.call(this,t,c)}return t.$$set=c=>{"cells"in c&&l(3,i=c.cells),"highlightedCells"in c&&l(4,o=c.highlightedCells)},t.$$.update=()=>{t.$$.dirty&24&&l(0,n=i.map(c=>(o.find(({col:p,row:h})=>p===c.col&&h===c.row)&&(c={...c},c.isHighlight=!0),c))),t.$$.dirty&1&&l(2,r=n.length>0),t.$$.dirty&1&&console.log(n)},[n,s,r,i,o,a]}class Ml extends Q{constructor(e){super(),Y(this,e,jl,Nl,G,{cells:3,highlightedCells:4})}}function $n(t){let e,l,n,r,i,o,s,a,c;return{c(){e=v("div"),l=v("div"),n=F("! "),r=F(t[0]),i=F(" !"),b(l,"class","msg svelte-1i1odkc"),b(e,"class","msg-wrapp svelte-1i1odkc")},m(u,p){A(u,e,p),m(e,l),m(l,n),m(l,r),m(l,i),c=!0},p(u,p){(!c||p&1)&&Ye(r,u[0])},i(u){c||(o||Z(()=>{o=Rt(l,fe,{duration:100,delay:100}),o.start()}),Z(()=>{a&&a.end(1),s=Rt(e,fe,{duration:100}),s.start()}),c=!0)},o(u){s&&s.invalidate(),a=Yn(e,fe,{duration:500}),c=!1},d(u){u&&P(e),u&&a&&a.end()}}}function Il(t){let e,l,n=t[0]&&$n(t);return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&y(n,1)):(n=$n(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(U(),S(n,1,1,()=>{n=null}),q())},i(r){l||(y(n),l=!0)},o(r){S(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}let Dl=1e3;function zl(t,e,l){let n=null;const r=Ve.subscribe(i=>{l(0,n=i),setTimeout(()=>{Ve.set(null)},Dl)});return Ze(()=>{r()}),[n]}class Ll extends Q{constructor(e){super(),Y(this,e,zl,Il,G,{})}}function Fl(t){let e,l=[{class:"avatar"},t[1]],n={};for(let r=0;r<l.length;r+=1)n=pe(n,l[r]);return{c(){e=v("div"),ct(e,n),te(e,"no-avatar",!t[0].photo_url),te(e,"svelte-1iem2ua",!0)},m(r,i){A(r,e,i)},p(r,[i]){ct(e,n=Wt(l,[{class:"avatar"},i&2&&r[1]])),te(e,"no-avatar",!r[0].photo_url),te(e,"svelte-1iem2ua",!0)},i:D,o:D,d(r){r&&P(e)}}}function Wl(t,e,l){let n,{user:r}=e;return t.$$set=i=>{"user"in i&&l(0,r=i.user)},t.$$.update=()=>{t.$$.dirty&1&&l(1,n=r.photo_url?{"style:backgroundImage":"url(user.photo_url)"}:{"data-letter":r.name[0]})},[r,n]}class Xn extends Q{constructor(e){super(),Y(this,e,Wl,Fl,G,{user:0})}}const Pe=W(!1);var We=(t=>(t.Black="black",t.White="white",t.Watcher="watcher",t))(We||{}),Pt=(t=>(t.Play="Play",t.GameOver="Game Over",t.GameNotStarted="Game is not started",t))(Pt||{});function Cn(t,e,l){const n=t.slice();return n[16]=e[l],n}function Sn(t,e,l){const n=t.slice();return n[16]=e[l],n}function Rn(t){let e,l,n,r=t[5]&&On(t),i=t[4]&&An(t);return{c(){e=v("div"),r&&r.c(),l=R(),i&&i.c(),b(e,"class","players-container d-flex space-between")},m(o,s){A(o,e,s),r&&r.m(e,null),m(e,l),i&&i.m(e,null),n=!0},p(o,s){o[5]?r?(r.p(o,s),s&32&&y(r,1)):(r=On(o),r.c(),y(r,1),r.m(e,l)):r&&(U(),S(r,1,1,()=>{r=null}),q()),o[4]?i?(i.p(o,s),s&16&&y(i,1)):(i=An(o),i.c(),y(i,1),i.m(e,null)):i&&(U(),S(i,1,1,()=>{i=null}),q())},i(o){n||(y(r),y(i),n=!0)},o(o){S(r),S(i),n=!1},d(o){o&&P(e),r&&r.d(),i&&i.d()}}}function On(t){let e,l,n,r,i,o=t[5].name+"",s,a,c,u,p,h;n=new Xn({props:{user:t[5]}});let _=t[1],d=[];for(let f=0;f<_.length;f+=1)d[f]=Pn(Sn(t,_,f));const $=f=>S(d[f],1,1,()=>{d[f]=null});return{c(){e=v("div"),l=v("div"),I(n.$$.fragment),r=R(),i=v("div"),s=F(o),a=R(),c=v("br"),u=R();for(let f=0;f<d.length;f+=1)d[f].c();b(i,"class","name mx-2"),b(l,"class","d-flex y-center p-4"),b(e,"class","player-info")},m(f,g){A(f,e,g),m(e,l),j(n,l,null),m(l,r),m(l,i),m(i,s),m(e,a),m(e,c),m(e,u);for(let x=0;x<d.length;x+=1)d[x].m(e,null);h=!0},p(f,g){const x={};if(g&32&&(x.user=f[5]),n.$set(x),(!h||g&32)&&o!==(o=f[5].name+"")&&Ye(s,o),g&2){_=f[1];let w;for(w=0;w<_.length;w+=1){const C=Sn(f,_,w);d[w]?(d[w].p(C,g),y(d[w],1)):(d[w]=Pn(C),d[w].c(),y(d[w],1),d[w].m(e,null))}for(U(),w=_.length;w<d.length;w+=1)$(w);q()}},i(f){if(!h){y(n.$$.fragment,f);for(let g=0;g<_.length;g+=1)y(d[g]);Z(()=>{p||(p=de(e,Ae,{y:20,duration:500},!0)),p.run(1)}),h=!0}},o(f){S(n.$$.fragment,f),d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)S(d[g]);p||(p=de(e,Ae,{y:20,duration:500},!1)),p.run(0),h=!1},d(f){f&&P(e),M(n),qe(d,f),f&&p&&p.end()}}}function Pn(t){let e,l;return e=new Ht({props:{figure:t[16]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&2&&(i.figure=n[16]),e.$set(i)},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function An(t){let e,l,n,r=t[4].name+"",i,o,s,a,c,u,p,h;s=new Xn({props:{user:t[4]}});let _=t[2],d=[];for(let f=0;f<_.length;f+=1)d[f]=En(Cn(t,_,f));const $=f=>S(d[f],1,1,()=>{d[f]=null});return{c(){e=v("div"),l=v("div"),n=v("div"),i=F(r),o=R(),I(s.$$.fragment),a=R(),c=v("br"),u=R();for(let f=0;f<d.length;f+=1)d[f].c();b(n,"class","name mx-2"),b(l,"class","d-flex y-center p-4 text-right"),b(e,"class","player-info")},m(f,g){A(f,e,g),m(e,l),m(l,n),m(n,i),m(l,o),j(s,l,null),m(e,a),m(e,c),m(e,u);for(let x=0;x<d.length;x+=1)d[x].m(e,null);h=!0},p(f,g){(!h||g&16)&&r!==(r=f[4].name+"")&&Ye(i,r);const x={};if(g&16&&(x.user=f[4]),s.$set(x),g&4){_=f[2];let w;for(w=0;w<_.length;w+=1){const C=Cn(f,_,w);d[w]?(d[w].p(C,g),y(d[w],1)):(d[w]=En(C),d[w].c(),y(d[w],1),d[w].m(e,null))}for(U(),w=_.length;w<d.length;w+=1)$(w);q()}},i(f){if(!h){y(s.$$.fragment,f);for(let g=0;g<_.length;g+=1)y(d[g]);Z(()=>{p||(p=de(e,Ae,{y:20,duration:500},!0)),p.run(1)}),h=!0}},o(f){S(s.$$.fragment,f),d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)S(d[g]);p||(p=de(e,Ae,{y:20,duration:500},!1)),p.run(0),h=!1},d(f){f&&P(e),M(s),qe(d,f),f&&p&&p.end()}}}function En(t){let e,l;return e=new Ht({props:{figure:t[16]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&4&&(i.figure=n[16]),e.$set(i)},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Hl(t){let e,l,n,r,i,o,s,a;e=new Ll({}),o=new Ml({props:{cells:t[0],highlightedCells:t[6]}});let c=t[3]&&Rn(t);return{c(){I(e.$$.fragment),l=R(),n=v("div"),r=v("div"),i=v("div"),I(o.$$.fragment),s=R(),c&&c.c(),b(i,"class","board-wrapp svelte-ez6xnd"),b(r,"class","board-container svelte-ez6xnd"),b(n,"class","h-100 w-100 d-flex column")},m(u,p){j(e,u,p),A(u,l,p),A(u,n,p),m(n,r),m(r,i),j(o,i,null),m(n,s),c&&c.m(n,null),a=!0},p(u,[p]){const h={};p&1&&(h.cells=u[0]),o.$set(h),u[3]?c?(c.p(u,p),p&8&&y(c,1)):(c=Rn(u),c.c(),y(c,1),c.m(n,null)):c&&(U(),S(c,1,1,()=>{c=null}),q())},i(u){a||(y(e.$$.fragment,u),y(o.$$.fragment,u),y(c),a=!0)},o(u){S(e.$$.fragment,u),S(o.$$.fragment,u),S(c),a=!1},d(u){M(e,u),u&&P(l),u&&P(n),M(o),c&&c.d()}}}function Ul(t,e,l){let n,r,{roomId:i="Rhmw41bl55d02ae"}=e,{username:o}=ve("user"),s;Pt.GameNotStarted;let a=[],c=[],u=[],p=[],h,_,d;const $=async()=>{l(3,h=await fetch(`${Oe}/api/room/${i}`).then(g=>g.json()))};_t(()=>{Pe.set(!0),d=new Cl(i,o),d.onConnect(async()=>{try{await $()}catch(g){console.log(g)}finally{Pe.set(!1)}}).board(g=>{l(0,a=g),Ue.highlight.set([])}).eat(({white:g,black:x})=>{g.length!==u.length&&l(1,u=g),x.length!==p.length&&l(2,p=x),console.log(g,x)}).participant(g=>{l(9,_=g.players),g.watchers,_.white.name===o?l(8,s=We.White):_.black.name===o?l(8,s=We.Black):l(8,s=We.Watcher)}).gameStatus(g=>{g===Pt.Play&&window.Telegram.WebApp.ready()}).highlight(g=>{Ue.highlight.set(g)}).error(g=>{Ve.set(g)})});const f=Qn.subscribe(g=>{if(!h)return;if(!g){Ue.highlight.set([]);return}console.log(g);const{from:x,to:w}=g;w?x&&w&&d.sendEvent(Ot.Move,{from:x,to:w}):d.sendEvent(Ot.Highlight,{from:x})});return Ze(()=>{f(),d.end()}),t.$$set=g=>{"roomId"in g&&l(7,i=g.roomId)},t.$$.update=()=>{t.$$.dirty&768&&l(5,n=!!s&&_[s]),t.$$.dirty&768&&l(4,r=!!s&&_[s===We.Black?"white":"black"])},[a,u,p,h,r,n,c,i,s,_]}class ql extends Q{constructor(e){super(),Y(this,e,Ul,Hl,G,{roomId:7})}}const gt={},mt={};function yt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function Gl(t,e){const l=[];let n=yt(t);return{get location(){return n},listen(r){l.push(r);const i=()=>{n=yt(t),r({location:n,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const o=l.indexOf(r);l.splice(o,1)}},navigate(r,{state:i,replace:o=!1}={}){i={...i,key:Date.now()+""};try{o?t.history.replaceState(i,null,r):t.history.pushState(i,null,r)}catch{t.location[o?"replace":"assign"](r)}n=yt(t),l.forEach(s=>s({location:n,action:"PUSH"}))}}}function Vl(t="/"){let e=0;const l=[{pathname:t,search:""}],n=[];return{get location(){return l[e]},addEventListener(r,i){},removeEventListener(r,i){},history:{get entries(){return l},get index(){return e},get state(){return n[e]},pushState(r,i,o){const[s,a=""]=o.split("?");e++,l.push({pathname:s,search:a}),n.push(r)},replaceState(r,i,o){const[s,a=""]=o.split("?");l[e]={pathname:s,search:a},n[e]=r}}}}const Kl=Boolean(typeof window!="undefined"&&window.document&&window.document.createElement),At=Gl(Kl?window:Vl()),{navigate:Jl}=At,el=/^:(.+)/,Tn=4,Yl=3,Ql=2,Zl=1,Xl=1;function Et(t,e){return t.substr(0,e.length)===e}function er(t){return t===""}function tr(t){return el.test(t)}function tl(t){return t[0]==="*"}function Ke(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function wt(t){return t.replace(/(^\/+|\/+$)/g,"")}function nr(t,e){const l=t.default?0:Ke(t.path).reduce((n,r)=>(n+=Tn,er(r)?n+=Xl:tr(r)?n+=Ql:tl(r)?n-=Tn+Zl:n+=Yl,n),0);return{route:t,score:l,index:e}}function lr(t){return t.map(nr).sort((e,l)=>e.score<l.score?1:e.score>l.score?-1:e.index-l.index)}function nl(t,e){let l,n;const[r]=e.split("?"),i=Ke(r),o=i[0]==="",s=lr(t);for(let a=0,c=s.length;a<c;a++){const u=s[a].route;let p=!1;if(u.default){n={route:u,params:{},uri:e};continue}const h=Ke(u.path),_={},d=Math.max(i.length,h.length);let $=0;for(;$<d;$++){const f=h[$],g=i[$];if(f!==void 0&&tl(f)){const w=f==="*"?"*":f.slice(1);_[w]=i.slice($).map(decodeURIComponent).join("/");break}if(g===void 0){p=!0;break}let x=el.exec(f);if(x&&!o){const w=decodeURIComponent(g);_[x[1]]=w}else if(f!==g){p=!0;break}}if(!p){l={route:u,params:_,uri:"/"+i.slice(0,$).join("/")};break}}return l||n||null}function rr(t,e){return nl([t],e)}function xt(t,e){return t+(e?`?${e}`:"")}function ir(t,e){if(Et(t,"/"))return t;const[l,n]=t.split("?"),[r]=e.split("?"),i=Ke(l),o=Ke(r);if(i[0]==="")return xt(r,n);if(!Et(i[0],".")){const c=o.concat(i).join("/");return xt((r==="/"?"":"/")+c,n)}const s=o.concat(i),a=[];return s.forEach(c=>{c===".."?a.pop():c!=="."&&a.push(c)}),xt("/"+a.join("/"),n)}function Bn(t,e){return`${wt(e==="/"?t:`${wt(t)}/${wt(e)}`)}/`}function or(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sr(t){let e;const l=t[9].default,n=Bt(l,t,t[8],null);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),e=!0},p(r,[i]){n&&n.p&&(!e||i&256)&&jt(n,l,r,r[8],e?Nt(l,r[8],i,null):Mt(r[8]),null)},i(r){e||(y(n,r),e=!0)},o(r){S(n,r),e=!1},d(r){n&&n.d(r)}}}function ar(t,e,l){let n,r,i,{$$slots:o={},$$scope:s}=e,{basepath:a="/"}=e,{url:c=null}=e;const u=ve(gt),p=ve(mt),h=W([]);ue(t,h,C=>l(6,r=C));const _=W(null);let d=!1;const $=u||W(c?{pathname:c}:At.location);ue(t,$,C=>l(5,n=C));const f=p?p.routerBase:W({path:a,uri:a});ue(t,f,C=>l(7,i=C));const g=Rl([f,_],([C,B])=>{if(B===null)return C;const{path:k}=C,{route:E,uri:z}=B;return{path:E.default?k:E.path.replace(/\*.*$/,""),uri:z}});function x(C){const{path:B}=i;let{path:k}=C;if(C._path=k,C.path=Bn(B,k),typeof window=="undefined"){if(d)return;const E=rr(C,n.pathname);E&&(_.set(E),d=!0)}else h.update(E=>(E.push(C),E))}function w(C){h.update(B=>{const k=B.indexOf(C);return B.splice(k,1),B})}return u||(_t(()=>At.listen(B=>{$.set(B.location)})),Ct(gt,$)),Ct(mt,{activeRoute:_,base:f,routerBase:g,registerRoute:x,unregisterRoute:w}),t.$$set=C=>{"basepath"in C&&l(3,a=C.basepath),"url"in C&&l(4,c=C.url),"$$scope"in C&&l(8,s=C.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128){const{path:C}=i;h.update(B=>(B.forEach(k=>k.path=Bn(C,k._path)),B))}if(t.$$.dirty&96){const C=nl(r,n.pathname);_.set(C)}},[h,$,f,a,c,n,r,i,s,o]}class cr extends Q{constructor(e){super(),Y(this,e,ar,sr,G,{basepath:3,url:4})}}const ur=t=>({params:t&4,location:t&16}),Nn=t=>({params:t[2],location:t[4]});function jn(t){let e,l,n,r;const i=[pr,fr],o=[];function s(a,c){return a[0]!==null?0:1}return e=s(t),l=o[e]=i[e](t),{c(){l.c(),n=ge()},m(a,c){o[e].m(a,c),A(a,n,c),r=!0},p(a,c){let u=e;e=s(a),e===u?o[e].p(a,c):(U(),S(o[u],1,1,()=>{o[u]=null}),q(),l=o[e],l?l.p(a,c):(l=o[e]=i[e](a),l.c()),y(l,1),l.m(n.parentNode,n))},i(a){r||(y(l),r=!0)},o(a){S(l),r=!1},d(a){o[e].d(a),a&&P(n)}}}function fr(t){let e;const l=t[10].default,n=Bt(l,t,t[9],Nn);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),e=!0},p(r,i){n&&n.p&&(!e||i&532)&&jt(n,l,r,r[9],e?Nt(l,r[9],i,ur):Mt(r[9]),Nn)},i(r){e||(y(n,r),e=!0)},o(r){S(n,r),e=!1},d(r){n&&n.d(r)}}}function pr(t){let e,l,n;const r=[{location:t[4]},t[2],t[3]];var i=t[0];function o(s){let a={};for(let c=0;c<r.length;c+=1)a=pe(a,r[c]);return{props:a}}return i&&(e=new i(o())),{c(){e&&I(e.$$.fragment),l=ge()},m(s,a){e&&j(e,s,a),A(s,l,a),n=!0},p(s,a){const c=a&28?Wt(r,[a&16&&{location:s[4]},a&4&&bn(s[2]),a&8&&bn(s[3])]):{};if(i!==(i=s[0])){if(e){U();const u=e;S(u.$$.fragment,1,0,()=>{M(u,1)}),q()}i?(e=new i(o()),I(e.$$.fragment),y(e.$$.fragment,1),j(e,l.parentNode,l)):e=null}else i&&e.$set(c)},i(s){n||(e&&y(e.$$.fragment,s),n=!0)},o(s){e&&S(e.$$.fragment,s),n=!1},d(s){s&&P(l),e&&M(e,s)}}}function dr(t){let e,l,n=t[1]!==null&&t[1].route===t[7]&&jn(t);return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[1]!==null&&r[1].route===r[7]?n?(n.p(r,i),i&2&&y(n,1)):(n=jn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(U(),S(n,1,1,()=>{n=null}),q())},i(r){l||(y(n),l=!0)},o(r){S(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}function gr(t,e,l){let n,r,{$$slots:i={},$$scope:o}=e,{path:s=""}=e,{component:a=null}=e;const{registerRoute:c,unregisterRoute:u,activeRoute:p}=ve(mt);ue(t,p,f=>l(1,n=f));const h=ve(gt);ue(t,h,f=>l(4,r=f));const _={path:s,default:s===""};let d={},$={};return c(_),typeof window!="undefined"&&Ze(()=>{u(_)}),t.$$set=f=>{l(13,e=pe(pe({},e),$t(f))),"path"in f&&l(8,s=f.path),"component"in f&&l(0,a=f.component),"$$scope"in f&&l(9,o=f.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&n&&n.route===_&&l(2,d=n.params);{const{path:f,component:g,...x}=e;l(3,$=x)}},e=$t(e),[a,n,d,$,r,p,h,_,s,o,i]}class kt extends Q{constructor(e){super(),Y(this,e,gr,dr,G,{path:8,component:0})}}function mr(t){let e,l,n,r;const i=t[16].default,o=Bt(i,t,t[15],null);let s=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],a={};for(let c=0;c<s.length;c+=1)a=pe(a,s[c]);return{c(){e=v("a"),o&&o.c(),ct(e,a)},m(c,u){A(c,e,u),o&&o.m(e,null),l=!0,n||(r=L(e,"click",t[5]),n=!0)},p(c,[u]){o&&o.p&&(!l||u&32768)&&jt(o,i,c,c[15],l?Nt(i,c[15],u,null):Mt(c[15]),null),ct(e,a=Wt(s,[(!l||u&1)&&{href:c[0]},(!l||u&4)&&{"aria-current":c[2]},u&2&&c[1],u&64&&c[6]]))},i(c){l||(y(o,c),l=!0)},o(c){S(o,c),l=!1},d(c){c&&P(e),o&&o.d(c),n=!1,r()}}}function hr(t,e,l){let n;const r=["to","replace","state","getProps"];let i=mn(e,r),o,s,{$$slots:a={},$$scope:c}=e,{to:u="#"}=e,{replace:p=!1}=e,{state:h={}}=e,{getProps:_=()=>({})}=e;const{base:d}=ve(mt);ue(t,d,k=>l(14,s=k));const $=ve(gt);ue(t,$,k=>l(13,o=k));const f=ml();let g,x,w,C;function B(k){if(f("click",k),or(k)){k.preventDefault();const E=o.pathname===g||p;Jl(g,{state:h,replace:E})}}return t.$$set=k=>{e=pe(pe({},e),$t(k)),l(6,i=mn(e,r)),"to"in k&&l(7,u=k.to),"replace"in k&&l(8,p=k.replace),"state"in k&&l(9,h=k.state),"getProps"in k&&l(10,_=k.getProps),"$$scope"in k&&l(15,c=k.$$scope)},t.$$.update=()=>{t.$$.dirty&16512&&l(0,g=u==="/"?s.uri:ir(u,s.uri)),t.$$.dirty&8193&&l(11,x=Et(o.pathname,g)),t.$$.dirty&8193&&l(12,w=g===o.pathname),t.$$.dirty&4096&&l(2,n=w?"page":void 0),t.$$.dirty&15361&&l(1,C=_({location:o,href:g,isPartiallyCurrent:x,isCurrent:w}))},[g,C,n,d,$,B,i,u,p,h,_,x,w,o,s,c,a]}class _r extends Q{constructor(e){super(),Y(this,e,hr,mr,G,{to:7,replace:8,state:9,getProps:10})}}function Mn(t){let e,l,n;return{c(){e=v("div"),e.innerHTML=`<div class="spinner-wrapp d-flex center svelte-upyxi7"></div> 
    <svg class="spinner svelte-upyxi7" width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.4625 20.5C40.3116 20.5 41.006 21.1893 40.9424 22.0361C40.6784 25.5496 39.5122 28.9452 37.5451 31.8892C35.2926 35.2604 32.0909 37.8879 28.345 39.4395C24.5991 40.9911 20.4773 41.3971 16.5006 40.6061C12.524 39.8151 8.87129 37.8627 6.00431 34.9957C3.13733 32.1287 1.1849 28.476 0.393902 24.4994C-0.397095 20.5227 0.00887314 16.4009 1.56047 12.655C3.11207 8.9091 5.7396 5.70744 9.11081 3.45487C12.0548 1.48777 15.4504 0.321606 18.9639 0.0576201C19.8107 -0.00600024 20.5 0.688362 20.5 1.5375C20.5 2.38664 19.8103 3.06795 18.9644 3.14278C16.0599 3.39972 13.2573 4.38254 10.8192 6.01164C7.95366 7.92632 5.72026 10.6477 4.4014 13.8317C3.08254 17.0157 2.73747 20.5193 3.40982 23.8994C4.08216 27.2796 5.74173 30.3844 8.17866 32.8213C10.6156 35.2583 13.7204 36.9178 17.1006 37.5902C20.4807 38.2625 23.9843 37.9175 27.1683 36.5986C30.3523 35.2797 33.0737 33.0463 34.9884 30.1808C36.6175 27.7427 37.6003 24.9401 37.8572 22.0356C37.932 21.1897 38.6134 20.5 39.4625 20.5Z" fill="#6B7278" class="svelte-upyxi7"></path></svg>`,b(e,"class","spinner-bg d-flex center svelte-upyxi7")},m(r,i){A(r,e,i),n=!0},i(r){n||(Z(()=>{l||(l=de(e,fe,{},!0)),l.run(1)}),n=!0)},o(r){l||(l=de(e,fe,{},!1)),l.run(0),n=!1},d(r){r&&P(e),r&&l&&l.end()}}}function br(t){let e,l,n=t[0]&&Mn();return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[0]?n?i&1&&y(n,1):(n=Mn(),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(U(),S(n,1,1,()=>{n=null}),q())},i(r){l||(y(n),l=!0)},o(r){S(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}function vr(t,e,l){let n=!1;const r=Pe.subscribe(i=>{l(0,n=i)});return Ze(()=>{r()}),[n]}class yr extends Q{constructor(e){super(),Y(this,e,vr,br,G,{})}}var st=(t=>(t.users="/api/users",t.rooms="/api/rooms",t.createRoom="/api/room",t))(st||{});function wr(t){let e;return{c(){e=F("Play")},m(l,n){A(l,e,n)},d(l){l&&P(e)}}}function xr(t){let e,l,n,r=t[0].id+"",i,o,s,a;return s=new _r({props:{to:"./game/"+t[0].id,class:"btn medium h-100 mr-4",$$slots:{default:[wr]},$$scope:{ctx:t}}}),{c(){e=v("div"),l=v("div"),n=v("span"),i=F(r),o=R(),I(s.$$.fragment),b(n,"class","headline"),b(l,"class","room-info pl-4 d-flex space-between y-center svelte-17jgl3g"),b(e,"class","room d-flex svelte-17jgl3g")},m(c,u){A(c,e,u),m(e,l),m(l,n),m(n,i),m(l,o),j(s,l,null),a=!0},p(c,[u]){(!a||u&1)&&r!==(r=c[0].id+"")&&Ye(i,r);const p={};u&1&&(p.to="./game/"+c[0].id),u&2&&(p.$$scope={dirty:u,ctx:c}),s.$set(p)},i(c){a||(y(s.$$.fragment,c),a=!0)},o(c){S(s.$$.fragment,c),a=!1},d(c){c&&P(e),M(s)}}}function kr(t,e,l){let{room:n}=e;return t.$$set=r=>{"room"in r&&l(0,n=r.room)},[n]}class $r extends Q{constructor(e){super(),Y(this,e,kr,xr,G,{room:0})}}function In(t,e,l){const n=t.slice();return n[6]=e[l],n}function Cr(t){let e;return{c(){e=v("div"),e.innerHTML='<div class="text my-5 svelte-jw8n2v">No rooms</div>',b(e,"class","wrapp py-5 text-center svelte-jw8n2v")},m(l,n){A(l,e,n)},p:D,i:D,o:D,d(l){l&&P(e)}}}function Sr(t){let e,l,n=t[0],r=[];for(let o=0;o<n.length;o+=1)r[o]=Dn(In(t,n,o));const i=o=>S(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=ge()},m(o,s){for(let a=0;a<r.length;a+=1)r[a].m(o,s);A(o,e,s),l=!0},p(o,s){if(s&1){n=o[0];let a;for(a=0;a<n.length;a+=1){const c=In(o,n,a);r[a]?(r[a].p(c,s),y(r[a],1)):(r[a]=Dn(c),r[a].c(),y(r[a],1),r[a].m(e.parentNode,e))}for(U(),a=n.length;a<r.length;a+=1)i(a);q()}},i(o){if(!l){for(let s=0;s<n.length;s+=1)y(r[s]);l=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)S(r[s]);l=!1},d(o){qe(r,o),o&&P(e)}}}function Dn(t){let e,l;return e=new $r({props:{room:t[6]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.room=n[6]),e.$set(i)},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Rr(t){let e,l,n,r,i,o,s,a,c,u,p,h;const _=[Sr,Cr],d=[];function $(f,g){return f[1]?0:1}return r=$(t),i=d[r]=_[r](t),{c(){e=v("h3"),e.textContent="Rooms:",l=R(),n=v("div"),i.c(),o=R(),s=v("div"),a=v("button"),c=F("Create room"),b(e,"class","px-2 title text-left"),b(a,"class","btn large outlined"),a.disabled=t[2],b(s,"class","text-center my-5"),b(n,"class","rooms-list mt-2")},m(f,g){A(f,e,g),A(f,l,g),A(f,n,g),d[r].m(n,null),m(n,o),m(n,s),m(s,a),m(a,c),u=!0,p||(h=L(a,"click",t[3]),p=!0)},p(f,[g]){let x=r;r=$(f),r===x?d[r].p(f,g):(U(),S(d[x],1,1,()=>{d[x]=null}),q(),i=d[r],i?i.p(f,g):(i=d[r]=_[r](f),i.c()),y(i,1),i.m(n,o)),(!u||g&4)&&(a.disabled=f[2])},i(f){u||(y(i),u=!0)},o(f){S(i),u=!1},d(f){f&&P(e),f&&P(l),f&&P(n),d[r].d(),p=!1,h()}}}function Or(t,e,l){let n,r;ue(t,Pe,c=>l(4,r=c));let i=[],o=!1;const s=async()=>{console.log("here",Oe+st.rooms);const u=await(await fetch(Oe+st.rooms)).json();console.log("here"),l(0,i=u),l(1,o=i.length>0)};_t(async()=>{await s()});const a=async()=>{Pe.set(!0);try{const c=await fetch(Oe+st.createRoom,{method:"POST"}).then(u=>u.json());console.log(c),c&&await s(),Pe.set(!1)}catch{Ve.set("Something went wrong")}};return t.$$.update=()=>{t.$$.dirty&17&&l(2,n=i.length===0&&r)},[i,o,n,a,r]}class Pr extends Q{constructor(e){super(),Y(this,e,Or,Rr,G,{})}}function zn(t,e,l){const n=t.slice();return n[23]=e[l],n}function Ln(t,e,l){const n=t.slice();return n[23]=e[l],n}function Fn(t){let e,l,n=t[23].style+"",r,i,o,s;function a(){return t[11](t[23])}return{c(){e=v("button"),l=F("Test "),r=F(n),b(e,"class",i="btn "+t[23].class+" svelte-94ousw")},m(c,u){A(c,e,u),m(e,l),m(e,r),o||(s=L(e,"click",a),o=!0)},p(c,u){t=c},d(c){c&&P(e),o=!1,s()}}}function Wn(t){let e,l,n=t[23].type+"",r,i,o,s,a;function c(){return t[12](t[23])}return{c(){var u;e=v("button"),l=F("Test "),r=F(n),b(e,"class",i="btn "+((u=t[23].class)!=null?u:"")+" svelte-94ousw"),e.disabled=o=window.Telegram.WebApp.version<6.1},m(u,p){A(u,e,p),m(e,l),m(e,r),s||(a=L(e,"click",c),s=!0)},p(u,p){t=u},d(u){u&&P(e),s=!1,a()}}}function Ar(t){var dn;let e,l,n,r,i,o,s,a,c,u,p,h,_,d,$,f,g,x,w,C,B,k,E,z,X=((dn=t[0])!=null?dn:"Not set")+"",me,Ut,ye,Ee,qt,we,Gt,Vt,V,Xe,Kt,et,Jt,N,Te,Yt,le,Qt,Be,Zt,ie,Xt,Ne,en,oe,tn,je,nn,se,ln,Me,rn,ae,on,Ie,sn,tt,an,xe,he,cn,_e,un,ke,nt,fn,De,bt,pn,$e=t[7],K=[];for(let O=0;O<$e.length;O+=1)K[O]=Fn(Ln(t,$e,O));let Ce=t[8],J=[];for(let O=0;O<Ce.length;O+=1)J[O]=Wn(zn(t,Ce,O));return{c(){e=v("div"),l=v("div"),l.textContent=`Version ${window.Telegram.WebApp.version}`,n=R(),r=v("div"),i=v("button"),i.textContent="Ready",o=R(),s=v("div"),a=v("div"),a.textContent="Haptics",c=R(),u=v("div");for(let O=0;O<K.length;O+=1)K[O].c();p=R(),h=v("div"),_=v("div"),_.textContent="Notifications",d=R(),$=v("div");for(let O=0;O<J.length;O+=1)J[O].c();f=R(),g=v("div"),x=v("div"),x.textContent="Colors",w=R(),C=v("input"),B=R(),k=v("span"),E=F("Value: "),z=v("code"),me=F(X),Ut=R(),ye=v("div"),Ee=v("button"),Ee.textContent="Set header",qt=R(),we=v("button"),Gt=F("Set background"),Vt=R(),V=v("div"),Xe=v("div"),Xe.textContent="Buttons",Kt=R(),et=v("div"),et.textContent="Main button:",Jt=R(),N=v("div"),Te=v("label"),Te.textContent="Button text",Yt=R(),le=v("input"),Qt=R(),Be=v("label"),Be.textContent="Button text color",Zt=R(),ie=v("input"),Xt=R(),Ne=v("label"),Ne.textContent="Button bg color",en=R(),oe=v("input"),tn=R(),je=v("label"),je.textContent="Active",nn=R(),se=v("input"),ln=R(),Me=v("label"),Me.textContent="Visible",rn=R(),ae=v("input"),on=R(),Ie=v("button"),Ie.textContent="Apply",sn=R(),tt=v("div"),tt.textContent="Back button:",an=R(),xe=v("div"),he=v("button"),he.textContent="Show",cn=R(),_e=v("button"),_e.textContent="Hide",un=R(),ke=v("div"),nt=v("div"),nt.textContent="Telegram data",fn=R(),De=v("pre"),De.textContent=`      ${JSON.stringify(window.Telegram,null,5)}
    `,b(l,"class","p5 text-center"),b(i,"class","btn w-100 p-5"),b(r,"class","wrapp mt-5 py-5 svelte-94ousw"),b(a,"class","title-2"),b(u,"class","buttons mt-5 svelte-94ousw"),b(s,"class","wrapp py-5 svelte-94ousw"),b(_,"class","title-2"),b($,"class","buttons mt-5 svelte-94ousw"),b(h,"class","wrapp py-5 svelte-94ousw"),b(x,"class","title-2"),b(C,"type","text"),b(C,"class","w-100 mt-5 mb-2 p-5"),b(Ee,"class","btn outline"),b(we,"class","btn outline"),we.disabled=window.Telegram.WebApp.version<6.1,b(ye,"class","buttons mt-5 svelte-94ousw"),b(g,"class","wrapp py-5 svelte-94ousw"),b(Xe,"class","title-2"),b(et,"class","title"),b(Te,"for","mainbutton-text"),b(Te,"class","center svelte-94ousw"),b(le,"type","text"),b(le,"id","mainbutton-text"),b(le,"class","p-4"),b(Be,"for","mainbutton-text-color"),b(Be,"class","center svelte-94ousw"),b(ie,"type","color"),b(ie,"id","mainbutton-text-color"),b(ie,"class","w-100 h-100"),b(Ne,"for","mainbutton-bg-color"),b(Ne,"class","center svelte-94ousw"),b(oe,"type","color"),b(oe,"id","mainbutton-bg-color"),b(oe,"class","w-100 h-100"),b(je,"for","mainbutton-active"),b(je,"class","center svelte-94ousw"),b(se,"type","checkbox"),b(se,"id","mainbutton-active"),b(se,"class","w-100 h-100"),b(Me,"for","mainbutton-visible"),b(Me,"class","center svelte-94ousw"),b(ae,"type","checkbox"),b(ae,"id","mainbutton-visible"),b(ae,"class","w-100 h-100"),b(N,"class","buttons mt-5 svelte-94ousw"),b(Ie,"class","btn outline large w-100 my-5"),b(tt,"class","title"),b(he,"class","btn"),te(he,"outline",t[6]),b(_e,"class","btn"),te(_e,"outline",!t[6]),b(xe,"class","buttons mt-5 svelte-94ousw"),b(V,"class","wrapp py-5 svelte-94ousw"),b(nt,"class","title-2"),b(De,"class","p-3"),fl(De,"overflow","auto"),b(ke,"class","wrapp py-5 svelte-94ousw"),b(e,"class","my-5 px-3")},m(O,H){A(O,e,H),m(e,l),m(e,n),m(e,r),m(r,i),m(e,o),m(e,s),m(s,a),m(s,c),m(s,u);for(let ee=0;ee<K.length;ee+=1)K[ee].m(u,null);m(e,p),m(e,h),m(h,_),m(h,d),m(h,$);for(let ee=0;ee<J.length;ee+=1)J[ee].m($,null);m(e,f),m(e,g),m(g,x),m(g,w),m(g,C),ce(C,t[0]),m(g,B),m(g,k),m(k,E),m(k,z),m(z,me),m(g,Ut),m(g,ye),m(ye,Ee),m(ye,qt),m(ye,we),m(we,Gt),m(e,Vt),m(e,V),m(V,Xe),m(V,Kt),m(V,et),m(V,Jt),m(V,N),m(N,Te),m(N,Yt),m(N,le),ce(le,t[1]),m(N,Qt),m(N,Be),m(N,Zt),m(N,ie),ce(ie,t[2]),m(N,Xt),m(N,Ne),m(N,en),m(N,oe),ce(oe,t[3]),m(N,tn),m(N,je),m(N,nn),m(N,se),se.checked=t[4],m(N,ln),m(N,Me),m(N,rn),m(N,ae),ae.checked=t[5],m(V,on),m(V,Ie),m(V,sn),m(V,tt),m(V,an),m(V,xe),m(xe,he),m(xe,cn),m(xe,_e),m(e,un),m(e,ke),m(ke,nt),m(ke,fn),m(ke,De),bt||(pn=[L(i,"click",t[10]),L(C,"input",t[13]),L(Ee,"click",t[14]),L(we,"click",t[15]),L(le,"input",t[16]),L(ie,"input",t[17]),L(oe,"input",t[18]),L(se,"change",t[19]),L(ae,"change",t[20]),L(Ie,"click",t[9]),L(he,"click",t[21]),L(_e,"click",t[22])],bt=!0)},p(O,[H]){var ee;if(H&128){$e=O[7];let T;for(T=0;T<$e.length;T+=1){const ze=Ln(O,$e,T);K[T]?K[T].p(ze,H):(K[T]=Fn(ze),K[T].c(),K[T].m(u,null))}for(;T<K.length;T+=1)K[T].d(1);K.length=$e.length}if(H&256){Ce=O[8];let T;for(T=0;T<Ce.length;T+=1){const ze=zn(O,Ce,T);J[T]?J[T].p(ze,H):(J[T]=Wn(ze),J[T].c(),J[T].m($,null))}for(;T<J.length;T+=1)J[T].d(1);J.length=Ce.length}H&1&&C.value!==O[0]&&ce(C,O[0]),H&1&&X!==(X=((ee=O[0])!=null?ee:"Not set")+"")&&Ye(me,X),H&2&&le.value!==O[1]&&ce(le,O[1]),H&4&&ce(ie,O[2]),H&8&&ce(oe,O[3]),H&16&&(se.checked=O[4]),H&32&&(ae.checked=O[5]),H&64&&te(he,"outline",O[6]),H&64&&te(_e,"outline",!O[6])},i:D,o:D,d(O){O&&P(e),qe(K,O),qe(J,O),bt=!1,re(pn)}}}function Er(t,e,l){let n;const r=[{style:"light",class:"medium outline"},{style:"medium",class:"medium"},{style:"heavy",class:"medium"},{style:"rigid",class:"medium"},{style:"soft",class:"medium outline"}],i=[{type:"success",class:""},{type:"warning"},{type:"error"}];let o,s,a,c,u,p;const h=()=>{window.Telegram.WebApp.MainButton.setParams({text:s,color:c,text_color:a,is_active:u,is_visible:p})},_=()=>window.Telegram.WebApp.ready(),d=me=>window.Telegram.WebApp.HapticFeedback.impactOccurred(me.style),$=me=>window.Telegram.WebApp.HapticFeedback.notificationOccurred(me.type);function f(){o=this.value,l(0,o)}const g=()=>window.Telegram.WebApp.setHeaderColor(o),x=()=>window.Telegram.WebApp.setBackgroundColor(o);function w(){s=this.value,l(1,s)}function C(){a=this.value,l(2,a)}function B(){c=this.value,l(3,c)}function k(){u=this.checked,l(4,u)}function E(){p=this.checked,l(5,p)}const z=()=>window.Telegram.WebApp.BackButton.show(),X=()=>window.Telegram.WebApp.BackButton.hide();return l(6,n=window.Telegram.WebApp.BackButton.isVisible),[o,s,a,c,u,p,n,r,i,h,_,d,$,f,g,x,w,C,B,k,E,z,X]}class Tr extends Q{constructor(e){super(),Y(this,e,Er,Ar,G,{})}}function Br(t){let e,l;return e=new ql({props:{roomId:t[0].id}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.roomId=n[0].id),e.$set(i)},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Nr(t){let e,l;return e=new Tr({}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function jr(t){let e,l;return e=new Pr({}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},i(n){l||(y(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Mr(t){let e,l,n,r,i,o;return e=new kt({props:{path:"/game/:id",$$slots:{default:[Br,({params:s})=>({0:s}),({params:s})=>s?1:0]},$$scope:{ctx:t}}}),n=new kt({props:{path:"/tg-test",$$slots:{default:[Nr]},$$scope:{ctx:t}}}),i=new kt({props:{path:"/",$$slots:{default:[jr]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment),l=R(),I(n.$$.fragment),r=R(),I(i.$$.fragment)},m(s,a){j(e,s,a),A(s,l,a),j(n,s,a),A(s,r,a),j(i,s,a),o=!0},p(s,a){const c={};a&3&&(c.$$scope={dirty:a,ctx:s}),e.$set(c);const u={};a&2&&(u.$$scope={dirty:a,ctx:s}),n.$set(u);const p={};a&2&&(p.$$scope={dirty:a,ctx:s}),i.$set(p)},i(s){o||(y(e.$$.fragment,s),y(n.$$.fragment,s),y(i.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(n.$$.fragment,s),S(i.$$.fragment,s),o=!1},d(s){M(e,s),s&&P(l),M(n,s),s&&P(r),M(i,s)}}}function Ir(t){let e,l,n,r,i;return e=new yr({}),r=new cr({props:{basepath:kl,$$slots:{default:[Mr]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment),l=R(),n=v("main"),I(r.$$.fragment),b(n,"class","main svelte-4h074o")},m(o,s){j(e,o,s),A(o,l,s),A(o,n,s),j(r,n,null),i=!0},p(o,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:o}),r.$set(a)},i(o){i||(y(e.$$.fragment,o),y(r.$$.fragment,o),i=!0)},o(o){S(e.$$.fragment,o),S(r.$$.fragment,o),i=!1},d(o){M(e,o),o&&P(l),o&&P(n),M(r)}}}function Dr(t){var e,l;return Ct("user",(l=(e=window.Telegram.WebApp.initDataUnsafe)==null?void 0:e.user)!=null?l:{username:prompt("username","serg"),id:Date.now(),first_name:"Serg",last_name:"",language_code:"en"}),[]}class zr extends Q{constructor(e){super(),Y(this,e,Dr,Ir,G,{})}}new zr({target:document.getElementById("app")});

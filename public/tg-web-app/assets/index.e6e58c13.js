var Ut=Object.defineProperty;var Wt=(t,e,r)=>e in t?Ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var he=(t,e,r)=>(Wt(t,typeof e!="symbol"?e+"":e,r),r);const Kt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}};Kt();function L(){}const Ee=t=>t;function J(t,e){for(const r in e)t[r]=e[r];return t}function jt(t){return t()}function lt(){return Object.create(null)}function Q(t){t.forEach(jt)}function ie(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gt(t){return Object.keys(t).length===0}function We(t,...e){if(t==null)return L;const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function Yt(t){let e;return We(t,r=>e=r)(),e}function K(t,e,r){t.$$.on_destroy.push(We(e,r))}function Ke(t,e,r,n){if(t){const i=Mt(t,e,r,n);return t[0](i)}}function Mt(t,e,r,n){return t[1]&&n?J(r.ctx.slice(),t[1](n(e))):r.ctx}function Ge(t,e,r,n){if(t[2]&&n){const i=t[2](n(r));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)l[a]=e.dirty[a]|i[a];return l}return e.dirty|i}return e.dirty}function Ye(t,e,r,n,i,l){if(i){const o=Mt(e,r,n,l);t.p(o,i)}}function Je(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let n=0;n<r;n++)e[n]=-1;return e}return-1}function De(t){const e={};for(const r in t)r[0]!=="$"&&(e[r]=t[r]);return e}function ot(t,e){const r={};e=new Set(e);for(const n in t)!e.has(n)&&n[0]!=="$"&&(r[n]=t[n]);return r}function ve(t){return t==null?"":t}function Jt(t){return t&&ie(t.destroy)?t.destroy:L}const Pt=typeof window!="undefined";let Qe=Pt?()=>window.performance.now():()=>Date.now(),Ve=Pt?t=>requestAnimationFrame(t):L;const ne=new Set;function Lt(t){ne.forEach(e=>{e.c(t)||(ne.delete(e),e.f())}),ne.size!==0&&Ve(Lt)}function Ze(t){let e;return ne.size===0&&Ve(Lt),{promise:new Promise(r=>{ne.add(e={c:t,f:r})}),abort(){ne.delete(e)}}}function $(t,e){t.appendChild(e)}function It(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Qt(t){const e=C("style");return Vt(It(t),e),e.sheet}function Vt(t,e){$(t.head||t,e)}function O(t,e,r){t.insertBefore(e,r||null)}function R(t){t.parentNode.removeChild(t)}function Xe(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function C(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function A(){return U(" ")}function V(){return U("")}function et(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function S(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function xe(t,e){const r=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set?t[n]=e[n]:S(t,n,e[n])}function Zt(t){return Array.from(t.childNodes)}function je(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function te(t,e,r){t.classList[r?"add":"remove"](e)}function Nt(t,e,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}const ke=new Map;let we=0;function Xt(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function en(t,e){const r={stylesheet:Qt(e),rules:{}};return ke.set(t,r),r}function $e(t,e,r,n,i,l,o,a=0){const s=16.666/n;let c=`{
`;for(let g=0;g<=1;g+=s){const h=e+(r-e)*l(g);c+=g*100+`%{${o(h,1-h)}}
`}const p=c+`100% {${o(r,1-r)}}
}`,f=`__svelte_${Xt(p)}_${a}`,d=It(t),{stylesheet:u,rules:b}=ke.get(d)||en(d,t);b[f]||(b[f]=!0,u.insertRule(`@keyframes ${f} ${p}`,u.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${n}ms linear ${i}ms 1 both`,we+=1,f}function Re(t,e){const r=(t.style.animation||"").split(", "),n=r.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),i=r.length-n.length;i&&(t.style.animation=n.join(", "),we-=i,we||tn())}function tn(){Ve(()=>{we||(ke.forEach(t=>{const{stylesheet:e}=t;let r=e.cssRules.length;for(;r--;)e.deleteRule(r);t.rules={}}),ke.clear())})}let ue;function ae(t){ue=t}function ge(){if(!ue)throw new Error("Function called outside component initialization");return ue}function Me(t){ge().$$.on_mount.push(t)}function me(t){ge().$$.on_destroy.push(t)}function nn(){const t=ge();return(e,r,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=Nt(e,r,{cancelable:n});return i.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}function ze(t,e){return ge().$$.context.set(t,e),e}function X(t){return ge().$$.context.get(t)}function rn(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(n=>n.call(this,e))}const se=[],st=[],be=[],at=[],ln=Promise.resolve();let Ae=!1;function on(){Ae||(Ae=!0,ln.then(Dt))}function H(t){be.push(t)}const Pe=new Set;let _e=0;function Dt(){const t=ue;do{for(;_e<se.length;){const e=se[_e];_e++,ae(e),sn(e.$$)}for(ae(null),se.length=0,_e=0;st.length;)st.pop()();for(let e=0;e<be.length;e+=1){const r=be[e];Pe.has(r)||(Pe.add(r),r())}be.length=0}while(se.length);for(;at.length;)at.pop()();Ae=!1,Pe.clear(),ae(t)}function sn(t){if(t.fragment!==null){t.update(),Q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}let oe;function tt(){return oe||(oe=Promise.resolve(),oe.then(()=>{oe=null})),oe}function Z(t,e,r){t.dispatchEvent(Nt(`${e?"intro":"outro"}${r}`))}const ye=new Set;let W;function D(){W={r:0,c:[],p:W}}function z(){W.r||Q(W.c),W=W.p}function y(t,e){t&&t.i&&(ye.delete(t),t.i(e))}function v(t,e,r,n){if(t&&t.o){if(ye.has(t))return;ye.add(t),W.c.push(()=>{ye.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}const nt={duration:0};function Fe(t,e,r){let n=e(t,r),i=!1,l,o,a=0;function s(){l&&Re(t,l)}function c(){const{delay:f=0,duration:d=300,easing:u=Ee,tick:b=L,css:m}=n||nt;m&&(l=$e(t,0,1,d,f,u,m,a++)),b(0,1);const g=Qe()+f,h=g+d;o&&o.abort(),i=!0,H(()=>Z(t,!0,"start")),o=Ze(_=>{if(i){if(_>=h)return b(1,0),Z(t,!0,"end"),s(),i=!1;if(_>=g){const w=u((_-g)/d);b(w,1-w)}}return i})}let p=!1;return{start(){p||(p=!0,Re(t),ie(n)?(n=n(),tt().then(c)):c())},invalidate(){p=!1},end(){i&&(s(),i=!1)}}}function zt(t,e,r){let n=e(t,r),i=!0,l;const o=W;o.r+=1;function a(){const{delay:s=0,duration:c=300,easing:p=Ee,tick:f=L,css:d}=n||nt;d&&(l=$e(t,1,0,c,s,p,d));const u=Qe()+s,b=u+c;H(()=>Z(t,!1,"start")),Ze(m=>{if(i){if(m>=b)return f(0,1),Z(t,!1,"end"),--o.r||Q(o.c),!1;if(m>=u){const g=p((m-u)/c);f(1-g,g)}}return i})}return ie(n)?tt().then(()=>{n=n(),a()}):a(),{end(s){s&&n.tick&&n.tick(1,0),i&&(l&&Re(t,l),i=!1)}}}function re(t,e,r,n){let i=e(t,r),l=n?0:1,o=null,a=null,s=null;function c(){s&&Re(t,s)}function p(d,u){const b=d.b-l;return u*=Math.abs(b),{a:l,b:d.b,d:b,duration:u,start:d.start,end:d.start+u,group:d.group}}function f(d){const{delay:u=0,duration:b=300,easing:m=Ee,tick:g=L,css:h}=i||nt,_={start:Qe()+u,b:d};d||(_.group=W,W.r+=1),o||a?a=_:(h&&(c(),s=$e(t,l,d,b,u,m,h)),d&&g(0,1),o=p(_,b),H(()=>Z(t,d,"start")),Ze(w=>{if(a&&w>a.start&&(o=p(a,b),a=null,Z(t,o.b,"start"),h&&(c(),s=$e(t,l,o.b,o.duration,0,m,i.css))),o){if(w>=o.end)g(l=o.b,1-l),Z(t,o.b,"end"),a||(o.b?c():--o.group.r||Q(o.group.c)),o=null;else if(w>=o.start){const k=w-o.start;l=o.a+o.d*m(k/o.duration),g(l,1-l)}}return!!(o||a)}))}return{run(d){ie(i)?tt().then(()=>{i=i(),f(d)}):f(d)},end(){c(),o=a=null}}}function an(t,e){v(t,1,1,()=>{e.delete(t.key)})}function cn(t,e,r,n,i,l,o,a,s,c,p,f){let d=t.length,u=l.length,b=d;const m={};for(;b--;)m[t[b].key]=b;const g=[],h=new Map,_=new Map;for(b=u;b--;){const x=f(i,l,b),E=r(x);let q=o.get(E);q?n&&q.p(x,e):(q=c(E,x),q.c()),h.set(E,g[b]=q),E in m&&_.set(E,Math.abs(b-m[E]))}const w=new Set,k=new Set;function j(x){y(x,1),x.m(a,p),o.set(x.key,x),p=x.first,u--}for(;d&&u;){const x=g[u-1],E=t[d-1],q=x.key,le=E.key;x===E?(p=x.first,d--,u--):h.has(le)?!o.has(q)||w.has(q)?j(x):k.has(le)?d--:_.get(q)>_.get(le)?(k.add(q),j(x)):(w.add(le),d--):(s(E,o),d--)}for(;d--;){const x=t[d];h.has(x.key)||s(x,o)}for(;u;)j(g[u-1]);return g}function rt(t,e){const r={},n={},i={$$scope:1};let l=t.length;for(;l--;){const o=t[l],a=e[l];if(a){for(const s in o)s in a||(n[s]=1);for(const s in a)i[s]||(r[s]=a[s],i[s]=1);t[l]=a}else for(const s in o)i[s]=1}for(const o in n)o in r||(r[o]=void 0);return r}function ct(t){return typeof t=="object"&&t!==null?t:{}}function I(t){t&&t.c()}function M(t,e,r,n){const{fragment:i,on_mount:l,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,r),n||H(()=>{const s=l.map(jt).filter(ie);o?o.push(...s):Q(s),t.$$.on_mount=[]}),a.forEach(H)}function P(t,e){const r=t.$$;r.fragment!==null&&(Q(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function un(t,e){t.$$.dirty[0]===-1&&(se.push(t),on(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function T(t,e,r,n,i,l,o,a=[-1]){const s=ue;ae(t);const c=t.$$={fragment:null,ctx:null,props:l,update:L,not_equal:i,bound:lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:lt(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};o&&o(c.root);let p=!1;if(c.ctx=r?r(t,e.props||{},(f,d,...u)=>{const b=u.length?u[0]:d;return c.ctx&&i(c.ctx[f],c.ctx[f]=b)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](b),p&&un(t,f)),d}):[],c.update(),p=!0,Q(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const f=Zt(e.target);c.fragment&&c.fragment.l(f),f.forEach(R)}else c.fragment&&c.fragment.c();e.intro&&y(t.$$.fragment),M(t,e.target,e.anchor,e.customElement),Dt()}ae(s)}class B{$destroy(){P(this,1),this.$destroy=L}$on(e,r){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fe=document.baseURI;class fn{constructor(e,r){he(this,"wss");he(this,"callbacks",{board:null,eat:null,participantRole:null,error:null,participantIn:null,participantOut:null,highlight:null,gameOver:null});he(this,"callbacksOnMessage",{board:e=>(this.callbacks.board=e,this.callbacksOnMessage),eat:e=>(this.callbacks.eat=e,this.callbacksOnMessage),participantRole:e=>(this.callbacks.participantRole=e,this.callbacksOnMessage),error:e=>(this.callbacks.error=e,this.callbacksOnMessage),participantIn:e=>(this.callbacks.participantIn=e,this.callbacksOnMessage),participantOut:e=>(this.callbacks.participantOut=e,this.callbacksOnMessage),highlight:e=>(this.callbacks.highlight=e,this.callbacksOnMessage),gameOver:e=>(this.callbacks.gameOver=e,this.callbacksOnMessage)});this.wss=new WebSocket(`${fe}?roomId=${e}&userName=${r}`)}onEvents(){return this.wss.onmessage=({data:e})=>{var i,l;const{type:r,message:n}=this.parsePayload(e);(l=(i=this.callbacks)[r])==null||l.call(i,n)},this.callbacksOnMessage}onConnect(e){return this.wss.onopen=e,this.onEvents()}onClose(e){this.wss.onclose=e}sendEvent(e,r){this.wss.send(this.getPayload(e,r))}end(){this.wss.close()}parsePayload(e){return JSON.parse(e)}getPayload(e,r){return JSON.stringify({type:e,message:r})}}const ee=[];function dn(t,e){return{subscribe:N(t,e).subscribe}}function N(t,e=L){let r;const n=new Set;function i(a){if(F(t,a)&&(t=a,r)){const s=!ee.length;for(const c of n)c[1](),ee.push(c,t);if(s){for(let c=0;c<ee.length;c+=2)ee[c][0](ee[c+1]);ee.length=0}}}function l(a){i(a(t))}function o(a,s=L){const c=[a,s];return n.add(c),n.size===1&&(r=e(i)||L),a(t),()=>{n.delete(c),n.size===0&&(r(),r=null)}}return{set:i,update:l,subscribe:o}}function pn(t,e,r){const n=!Array.isArray(t),i=n?[t]:t,l=e.length<2;return dn(r,o=>{let a=!1;const s=[];let c=0,p=L;const f=()=>{if(c)return;p();const u=e(n?s[0]:s,o);l?o(u):p=ie(u)?u:L},d=i.map((u,b)=>We(u,m=>{s[b]=m,c&=~(1<<b),a&&f()},()=>{c|=1<<b}));return a=!0,f(),function(){Q(d),p()}})}const de=N(null);de.subscribe(t=>console.log("err",t));const ce={error:N(null),eat:N(null),board:N([]),participantRole:N(null),participantIn:N(null),participantOut:N(null),highlight:N([]),gameOver:N(!1)},At=N(null);var Te=(t=>(t.Move="move",t.Highlight="highlight",t))(Te||{});function Ft(t){const e=t-1;return e*e*e+1}function G(t,{delay:e=0,duration:r=400,easing:n=Ee}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:l=>`opacity: ${l*i}`}}function Ce(t,{delay:e=0,duration:r=400,easing:n=Ft,x:i=0,y:l=0,opacity:o=0}={}){const a=getComputedStyle(t),s=+a.opacity,c=a.transform==="none"?"":a.transform,p=s*(1-o);return{delay:e,duration:r,easing:n,css:(f,d)=>`
			transform: ${c} translate(${(1-f)*i}px, ${(1-f)*l}px);
			opacity: ${s-p*d}`}}function gn(t,{delay:e=0,duration:r=400,easing:n=Ft,start:i=0,opacity:l=0}={}){const o=getComputedStyle(t),a=+o.opacity,s=o.transform==="none"?"":o.transform,c=1-i,p=a*(1-l);return{delay:e,duration:r,easing:n,css:(f,d)=>`
			transform: ${s} scale(${1-c*d});
			opacity: ${a-p*d}
		`}}function mn(t){let e,r,n,i,l;return{c(){e=C("div"),S(e,"class",r=ve(`figure ${t[0].color}`)+" svelte-yq1388")},m(o,a){O(o,e,a),l=!0},p(o,[a]){t=o,(!l||a&1&&r!==(r=ve(`figure ${t[0].color}`)+" svelte-yq1388"))&&S(e,"class",r)},i(o){l||(H(()=>{i&&i.end(1),n=Fe(e,t[2],{delay:t[1]}),n.start()}),l=!0)},o(o){n&&n.invalidate(),i=zt(e,t[3],{delay:t[1]}),l=!1},d(o){o&&R(e),o&&i&&i.end()}}}function hn(t,e,r){let n,i,l,{figure:o}=e,{animDelay:a=0}=e,{isFirstRender:s=!0}=e;return t.$$set=c=>{"figure"in c&&r(0,o=c.figure),"animDelay"in c&&r(4,a=c.animDelay),"isFirstRender"in c&&r(5,s=c.isFirstRender)},t.$$.update=()=>{t.$$.dirty&32&&r(3,n=G),t.$$.dirty&32&&r(2,i=s?gn:G),t.$$.dirty&48&&r(1,l=s?500+a:0)},[o,l,i,n,a,s]}class it extends B{constructor(e){super(),T(this,e,hn,mn,F,{figure:0,animDelay:4,isFirstRender:5})}}function ut(t){let e,r;return e=new it({props:{figure:t[0].figure,animDelay:t[1],isFirstRender:t[2]}}),{c(){I(e.$$.fragment)},m(n,i){M(e,n,i),r=!0},p(n,i){const l={};i&1&&(l.figure=n[0].figure),i&2&&(l.animDelay=n[1]),i&4&&(l.isFirstRender=n[2]),e.$set(l)},i(n){r||(y(e.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),r=!1},d(n){P(e,n)}}}function _n(t){let e,r,n,i,l,o=t[0].figure&&ut(t);return{c(){e=C("div"),o&&o.c(),S(e,"class",r=ve(`cell ${t[0].color} d-flex center`)+" svelte-1schn10"),te(e,"highlight",t[3])},m(a,s){O(a,e,s),o&&o.m(e,null),n=!0,i||(l=et(e,"click",t[4]),i=!0)},p(a,[s]){a[0].figure?o?(o.p(a,s),s&1&&y(o,1)):(o=ut(a),o.c(),y(o,1),o.m(e,null)):o&&(D(),v(o,1,1,()=>{o=null}),z()),(!n||s&1&&r!==(r=ve(`cell ${a[0].color} d-flex center`)+" svelte-1schn10"))&&S(e,"class",r),s&9&&te(e,"highlight",a[3])},i(a){n||(y(o),n=!0)},o(a){v(o),n=!1},d(a){a&&R(e),o&&o.d(),i=!1,l()}}}function bn(t,e,r){let{cell:n}=e,{animFigureDelay:i=0}=e,{isFirstRender:l}=e,o=!1;const a=f=>f.findIndex(({col:d,row:u})=>d===n.col&&u===n.row)!==-1,s=ce.highlight.subscribe(f=>{r(3,o=a(f))}),c=(f,d)=>({[f]:{id:d.id}}),p=()=>{At.update(f=>f?f.from.id===n.id?null:a(Yt(ce.highlight))?{...f,...c("to",n)}:n.figure?c("from",n):null:c("from",n))};return me(()=>{s()}),t.$$set=f=>{"cell"in f&&r(0,n=f.cell),"animFigureDelay"in f&&r(1,i=f.animFigureDelay),"isFirstRender"in f&&r(2,l=f.isFirstRender)},[n,i,l,o,p]}class yn extends B{constructor(e){super(),T(this,e,bn,_n,F,{cell:0,animFigureDelay:1,isFirstRender:2})}}function ft(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function dt(t){let e,r=[],n=new Map,i,l,o=t[0];const a=s=>s[7].id;for(let s=0;s<o.length;s+=1){let c=ft(t,o,s),p=a(c);n.set(p,r[s]=pt(p,c))}return{c(){e=C("div");for(let s=0;s<r.length;s+=1)r[s].c();S(e,"class","board svelte-my1oz1")},m(s,c){O(s,e,c);for(let p=0;p<r.length;p+=1)r[p].m(e,null);l=!0},p(s,c){c&3&&(o=s[0],D(),r=cn(r,c,a,1,s,o,n,e,an,pt,null,ft),z())},i(s){if(!l){for(let c=0;c<o.length;c+=1)y(r[c]);H(()=>{i||(i=re(e,Ce,{y:-100,duration:500},!0)),i.run(1)}),l=!0}},o(s){for(let c=0;c<r.length;c+=1)v(r[c]);i||(i=re(e,Ce,{y:-100,duration:500},!1)),i.run(0),l=!1},d(s){s&&R(e);for(let c=0;c<r.length;c+=1)r[c].d();s&&i&&i.end()}}}function pt(t,e){let r,n,i;return n=new yn({props:{cell:e[7],animFigureDelay:e[9]*5,isFirstRender:e[1]}}),n.$on("unselect",e[5]),{key:t,first:null,c(){r=V(),I(n.$$.fragment),this.first=r},m(l,o){O(l,r,o),M(n,l,o),i=!0},p(l,o){e=l;const a={};o&1&&(a.cell=e[7]),o&1&&(a.animFigureDelay=e[9]*5),o&2&&(a.isFirstRender=e[1]),n.$set(a)},i(l){i||(y(n.$$.fragment,l),i=!0)},o(l){v(n.$$.fragment,l),i=!1},d(l){l&&R(r),P(n,l)}}}function vn(t){let e,r,n=t[2]&&dt(t);return{c(){n&&n.c(),e=V()},m(i,l){n&&n.m(i,l),O(i,e,l),r=!0},p(i,[l]){i[2]?n?(n.p(i,l),l&4&&y(n,1)):(n=dt(i),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(D(),v(n,1,1,()=>{n=null}),z())},i(i){r||(y(n),r=!0)},o(i){v(n),r=!1},d(i){n&&n.d(i),i&&R(e)}}}function xn(t,e,r){let n,i,{cells:l=[]}=e,{highlightedCells:o=[]}=e,a=!0;Me(()=>{setTimeout(()=>{r(1,a=!1)},100)});function s(c){rn.call(this,t,c)}return t.$$set=c=>{"cells"in c&&r(3,l=c.cells),"highlightedCells"in c&&r(4,o=c.highlightedCells)},t.$$.update=()=>{t.$$.dirty&24&&r(0,n=l.map(c=>(o.find(({col:f,row:d})=>f===c.col&&d===c.row)&&(c={...c},c.isHighlight=!0),c))),t.$$.dirty&1&&r(2,i=n.length>0),t.$$.dirty&1&&console.log(n)},[n,a,i,l,o,s]}class kn extends B{constructor(e){super(),T(this,e,xn,vn,F,{cells:3,highlightedCells:4})}}function gt(t){let e,r,n,i,l,o,a,s,c;return{c(){e=C("div"),r=C("div"),n=U("! "),i=U(t[0]),l=U(" !"),S(r,"class","msg svelte-1i1odkc"),S(e,"class","msg-wrapp svelte-1i1odkc")},m(p,f){O(p,e,f),$(e,r),$(r,n),$(r,i),$(r,l),c=!0},p(p,f){(!c||f&1)&&je(i,p[0])},i(p){c||(o||H(()=>{o=Fe(r,G,{duration:100,delay:100}),o.start()}),H(()=>{s&&s.end(1),a=Fe(e,G,{duration:100}),a.start()}),c=!0)},o(p){a&&a.invalidate(),s=zt(e,G,{duration:500}),c=!1},d(p){p&&R(e),p&&s&&s.end()}}}function wn(t){let e,r,n=t[0]&&gt(t);return{c(){n&&n.c(),e=V()},m(i,l){n&&n.m(i,l),O(i,e,l),r=!0},p(i,[l]){i[0]?n?(n.p(i,l),l&1&&y(n,1)):(n=gt(i),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(D(),v(n,1,1,()=>{n=null}),z())},i(i){r||(y(n),r=!0)},o(i){v(n),r=!1},d(i){n&&n.d(i),i&&R(e)}}}let $n=1e3;function Rn(t,e,r){let n=null;const i=de.subscribe(l=>{r(0,n=l),setTimeout(()=>{de.set(null)},$n)});return me(()=>{i()}),[n]}class Cn extends B{constructor(e){super(),T(this,e,Rn,wn,F,{})}}function On(t){let e,r=[{class:"avatar"},t[1]],n={};for(let i=0;i<r.length;i+=1)n=J(n,r[i]);return{c(){e=C("div"),xe(e,n),te(e,"no-avatar",!t[0].photo_url),te(e,"svelte-1iem2ua",!0)},m(i,l){O(i,e,l)},p(i,[l]){xe(e,n=rt(r,[{class:"avatar"},l&2&&i[1]])),te(e,"no-avatar",!i[0].photo_url),te(e,"svelte-1iem2ua",!0)},i:L,o:L,d(i){i&&R(e)}}}function Sn(t,e,r){let n,{user:i}=e;return t.$$set=l=>{"user"in l&&r(0,i=l.user)},t.$$.update=()=>{t.$$.dirty&1&&r(1,n=i.photo_url?{"style:backgroundImage":"url(user.photo_url)"}:{"data-letter":i.name[0]})},[i,n]}class Tt extends B{constructor(e){super(),T(this,e,Sn,On,F,{user:0})}}const Y=N(!1);var Be=(t=>(t.Black="black",t.White="white",t.Watcher="watcher",t))(Be||{});function mt(t,e,r){const n=t.slice();return n[14]=e[r],n}function ht(t,e,r){const n=t.slice();return n[14]=e[r],n}function _t(t){let e,r,n,i,l=t[6]&&bt(t),o=t[5]&&vt(t);return{c(){e=C("div"),l&&l.c(),r=A(),o&&o.c(),S(e,"class","players-container d-flex space-between")},m(a,s){O(a,e,s),l&&l.m(e,null),$(e,r),o&&o.m(e,null),i=!0},p(a,s){a[6]?l?(l.p(a,s),s&64&&y(l,1)):(l=bt(a),l.c(),y(l,1),l.m(e,r)):l&&(D(),v(l,1,1,()=>{l=null}),z()),a[5]?o?(o.p(a,s),s&32&&y(o,1)):(o=vt(a),o.c(),y(o,1),o.m(e,null)):o&&(D(),v(o,1,1,()=>{o=null}),z())},i(a){i||(y(l),y(o),H(()=>{n||(n=re(e,Ce,{y:20,duration:500},!0)),n.run(1)}),i=!0)},o(a){v(l),v(o),n||(n=re(e,Ce,{y:20,duration:500},!1)),n.run(0),i=!1},d(a){a&&R(e),l&&l.d(),o&&o.d(),a&&n&&n.end()}}}function bt(t){let e,r,n,i,l,o=t[6].name+"",a,s,c,p,f;n=new Tt({props:{user:t[6]}});let d=t[3],u=[];for(let m=0;m<d.length;m+=1)u[m]=yt(ht(t,d,m));const b=m=>v(u[m],1,1,()=>{u[m]=null});return{c(){e=C("div"),r=C("div"),I(n.$$.fragment),i=A(),l=C("div"),a=U(o),s=A(),c=C("br"),p=A();for(let m=0;m<u.length;m+=1)u[m].c();S(l,"class","name mx-2"),S(r,"class","d-flex y-center p-4"),S(e,"class","player-info")},m(m,g){O(m,e,g),$(e,r),M(n,r,null),$(r,i),$(r,l),$(l,a),$(e,s),$(e,c),$(e,p);for(let h=0;h<u.length;h+=1)u[h].m(e,null);f=!0},p(m,g){const h={};if(g&64&&(h.user=m[6]),n.$set(h),(!f||g&64)&&o!==(o=m[6].name+"")&&je(a,o),g&8){d=m[3];let _;for(_=0;_<d.length;_+=1){const w=ht(m,d,_);u[_]?(u[_].p(w,g),y(u[_],1)):(u[_]=yt(w),u[_].c(),y(u[_],1),u[_].m(e,null))}for(D(),_=d.length;_<u.length;_+=1)b(_);z()}},i(m){if(!f){y(n.$$.fragment,m);for(let g=0;g<d.length;g+=1)y(u[g]);f=!0}},o(m){v(n.$$.fragment,m),u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)v(u[g]);f=!1},d(m){m&&R(e),P(n),Xe(u,m)}}}function yt(t){let e,r;return e=new it({props:{figure:t[14]}}),{c(){I(e.$$.fragment)},m(n,i){M(e,n,i),r=!0},p(n,i){const l={};i&8&&(l.figure=n[14]),e.$set(l)},i(n){r||(y(e.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),r=!1},d(n){P(e,n)}}}function vt(t){let e,r,n,i=t[5].name+"",l,o,a,s,c,p,f;a=new Tt({props:{user:t[5]}});let d=t[4],u=[];for(let m=0;m<d.length;m+=1)u[m]=xt(mt(t,d,m));const b=m=>v(u[m],1,1,()=>{u[m]=null});return{c(){e=C("div"),r=C("div"),n=C("div"),l=U(i),o=A(),I(a.$$.fragment),s=A(),c=C("br"),p=A();for(let m=0;m<u.length;m+=1)u[m].c();S(n,"class","name mx-2"),S(r,"class","d-flex y-center p-4 text-right"),S(e,"class","player-info")},m(m,g){O(m,e,g),$(e,r),$(r,n),$(n,l),$(r,o),M(a,r,null),$(e,s),$(e,c),$(e,p);for(let h=0;h<u.length;h+=1)u[h].m(e,null);f=!0},p(m,g){(!f||g&32)&&i!==(i=m[5].name+"")&&je(l,i);const h={};if(g&32&&(h.user=m[5]),a.$set(h),g&16){d=m[4];let _;for(_=0;_<d.length;_+=1){const w=mt(m,d,_);u[_]?(u[_].p(w,g),y(u[_],1)):(u[_]=xt(w),u[_].c(),y(u[_],1),u[_].m(e,null))}for(D(),_=d.length;_<u.length;_+=1)b(_);z()}},i(m){if(!f){y(a.$$.fragment,m);for(let g=0;g<d.length;g+=1)y(u[g]);f=!0}},o(m){v(a.$$.fragment,m),u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)v(u[g]);f=!1},d(m){m&&R(e),P(a),Xe(u,m)}}}function xt(t){let e,r;return e=new it({props:{figure:t[14]}}),{c(){I(e.$$.fragment)},m(n,i){M(e,n,i),r=!0},p(n,i){const l={};i&16&&(l.figure=n[14]),e.$set(l)},i(n){r||(y(e.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),r=!1},d(n){P(e,n)}}}function En(t){let e,r,n,i,l,o,a,s,c,p;e=new Cn({}),o=new kn({props:{cells:t[2],highlightedCells:t[7]}});let f=t[1]&&_t(t);return{c(){I(e.$$.fragment),r=A(),n=C("div"),i=C("div"),l=C("div"),I(o.$$.fragment),a=A(),f&&f.c(),S(l,"class","board-wrapp svelte-ez6xnd"),S(i,"class","board-container svelte-ez6xnd"),S(n,"class","h-100 w-100 d-flex column")},m(d,u){M(e,d,u),O(d,r,u),O(d,n,u),$(n,i),$(i,l),M(o,l,null),$(n,a),f&&f.m(n,null),s=!0,c||(p=Jt(t[0].call(null,n)),c=!0)},p(d,[u]){const b={};u&4&&(b.cells=d[2]),o.$set(b),d[1]?f?(f.p(d,u),u&2&&y(f,1)):(f=_t(d),f.c(),y(f,1),f.m(n,null)):f&&(D(),v(f,1,1,()=>{f=null}),z())},i(d){s||(y(e.$$.fragment,d),y(o.$$.fragment,d),y(f),s=!0)},o(d){v(e.$$.fragment,d),v(o.$$.fragment,d),v(f),s=!1},d(d){P(e,d),d&&R(r),d&&R(n),P(o),f&&f.d(),c=!1,p()}}}function jn(t,e,r){let n,i,{roomId:l="Rhmw41bl55d02ae"}=e,{useLoading:o}=e,{username:a}=X("user"),s,c=[],p=[],f=[],d=[],u,b;const m=async()=>{r(1,u=await fetch(`${fe}/api/room/${l}`).then(h=>h.json()))};Me(()=>{Y.set(!0),b=new fn(l,a),b.onConnect(async()=>{await m(),Y.set(!1)}).board(h=>{r(2,c=h),ce.highlight.set([])}).eat(({white:h,black:_})=>{h.length!==f.length&&r(3,f=h),_.length!==d.length&&r(4,d=_),console.log(h,_)}).participantRole(h=>{r(9,s=h)}).participantIn(()=>m()).participantOut(()=>m()).highlight(h=>{ce.highlight.set(h)}).error(h=>{de.set(h)})});const g=At.subscribe(h=>{if(!u)return;if(!h){ce.highlight.set([]);return}console.log(h);const{from:_,to:w}=h;w?_&&w&&b.sendEvent(Te.Move,{from:_,to:w}):b.sendEvent(Te.Highlight,{from:_})});return me(()=>{g(),b.end()}),t.$$set=h=>{"roomId"in h&&r(8,l=h.roomId),"useLoading"in h&&r(0,o=h.useLoading)},t.$$.update=()=>{t.$$.dirty&514&&r(6,n=u&&u.players[s]),t.$$.dirty&514&&r(5,i=u&&u.players&&s===Be.Watcher?u.watchers.find(h=>h.name===a):s===Be.Black?u==null?void 0:u.players.white:u==null?void 0:u.players.black)},[o,u,c,f,d,i,n,p,l,s]}class Mn extends B{constructor(e){super(),T(this,e,jn,En,F,{roomId:8,useLoading:0})}}const Oe={},Se={};function Le(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function Pn(t,e){const r=[];let n=Le(t);return{get location(){return n},listen(i){r.push(i);const l=()=>{n=Le(t),i({location:n,action:"POP"})};return t.addEventListener("popstate",l),()=>{t.removeEventListener("popstate",l);const o=r.indexOf(i);r.splice(o,1)}},navigate(i,{state:l,replace:o=!1}={}){l={...l,key:Date.now()+""};try{o?t.history.replaceState(l,null,i):t.history.pushState(l,null,i)}catch{t.location[o?"replace":"assign"](i)}n=Le(t),r.forEach(a=>a({location:n,action:"PUSH"}))}}}function Ln(t="/"){let e=0;const r=[{pathname:t,search:""}],n=[];return{get location(){return r[e]},addEventListener(i,l){},removeEventListener(i,l){},history:{get entries(){return r},get index(){return e},get state(){return n[e]},pushState(i,l,o){const[a,s=""]=o.split("?");e++,r.push({pathname:a,search:s}),n.push(i)},replaceState(i,l,o){const[a,s=""]=o.split("?");r[e]={pathname:a,search:s},n[e]=i}}}}const In=Boolean(typeof window!="undefined"&&window.document&&window.document.createElement),qe=Pn(In?window:Ln()),{navigate:Nn}=qe,Bt=/^:(.+)/,kt=4,Dn=3,zn=2,An=1,Fn=1;function He(t,e){return t.substr(0,e.length)===e}function Tn(t){return t===""}function Bn(t){return Bt.test(t)}function qt(t){return t[0]==="*"}function pe(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Ie(t){return t.replace(/(^\/+|\/+$)/g,"")}function qn(t,e){const r=t.default?0:pe(t.path).reduce((n,i)=>(n+=kt,Tn(i)?n+=Fn:Bn(i)?n+=zn:qt(i)?n-=kt+An:n+=Dn,n),0);return{route:t,score:r,index:e}}function Hn(t){return t.map(qn).sort((e,r)=>e.score<r.score?1:e.score>r.score?-1:e.index-r.index)}function Ht(t,e){let r,n;const[i]=e.split("?"),l=pe(i),o=l[0]==="",a=Hn(t);for(let s=0,c=a.length;s<c;s++){const p=a[s].route;let f=!1;if(p.default){n={route:p,params:{},uri:e};continue}const d=pe(p.path),u={},b=Math.max(l.length,d.length);let m=0;for(;m<b;m++){const g=d[m],h=l[m];if(g!==void 0&&qt(g)){const w=g==="*"?"*":g.slice(1);u[w]=l.slice(m).map(decodeURIComponent).join("/");break}if(h===void 0){f=!0;break}let _=Bt.exec(g);if(_&&!o){const w=decodeURIComponent(h);u[_[1]]=w}else if(g!==h){f=!0;break}}if(!f){r={route:p,params:u,uri:"/"+l.slice(0,m).join("/")};break}}return r||n||null}function Un(t,e){return Ht([t],e)}function Ne(t,e){return t+(e?`?${e}`:"")}function Wn(t,e){if(He(t,"/"))return t;const[r,n]=t.split("?"),[i]=e.split("?"),l=pe(r),o=pe(i);if(l[0]==="")return Ne(i,n);if(!He(l[0],".")){const c=o.concat(l).join("/");return Ne((i==="/"?"":"/")+c,n)}const a=o.concat(l),s=[];return a.forEach(c=>{c===".."?s.pop():c!=="."&&s.push(c)}),Ne("/"+s.join("/"),n)}function wt(t,e){return`${Ie(e==="/"?t:`${Ie(t)}/${Ie(e)}`)}/`}function Kn(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Gn(t){let e;const r=t[9].default,n=Ke(r,t,t[8],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,[l]){n&&n.p&&(!e||l&256)&&Ye(n,r,i,i[8],e?Ge(r,i[8],l,null):Je(i[8]),null)},i(i){e||(y(n,i),e=!0)},o(i){v(n,i),e=!1},d(i){n&&n.d(i)}}}function Yn(t,e,r){let n,i,l,{$$slots:o={},$$scope:a}=e,{basepath:s="/"}=e,{url:c=null}=e;const p=X(Oe),f=X(Se),d=N([]);K(t,d,k=>r(6,i=k));const u=N(null);let b=!1;const m=p||N(c?{pathname:c}:qe.location);K(t,m,k=>r(5,n=k));const g=f?f.routerBase:N({path:s,uri:s});K(t,g,k=>r(7,l=k));const h=pn([g,u],([k,j])=>{if(j===null)return k;const{path:x}=k,{route:E,uri:q}=j;return{path:E.default?x:E.path.replace(/\*.*$/,""),uri:q}});function _(k){const{path:j}=l;let{path:x}=k;if(k._path=x,k.path=wt(j,x),typeof window=="undefined"){if(b)return;const E=Un(k,n.pathname);E&&(u.set(E),b=!0)}else d.update(E=>(E.push(k),E))}function w(k){d.update(j=>{const x=j.indexOf(k);return j.splice(x,1),j})}return p||(Me(()=>qe.listen(j=>{m.set(j.location)})),ze(Oe,m)),ze(Se,{activeRoute:u,base:g,routerBase:h,registerRoute:_,unregisterRoute:w}),t.$$set=k=>{"basepath"in k&&r(3,s=k.basepath),"url"in k&&r(4,c=k.url),"$$scope"in k&&r(8,a=k.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128){const{path:k}=l;d.update(j=>(j.forEach(x=>x.path=wt(k,x._path)),j))}if(t.$$.dirty&96){const k=Ht(i,n.pathname);u.set(k)}},[d,m,g,s,c,n,i,l,a,o]}class Jn extends B{constructor(e){super(),T(this,e,Yn,Gn,F,{basepath:3,url:4})}}const Qn=t=>({params:t&4,location:t&16}),$t=t=>({params:t[2],location:t[4]});function Rt(t){let e,r,n,i;const l=[Zn,Vn],o=[];function a(s,c){return s[0]!==null?0:1}return e=a(t),r=o[e]=l[e](t),{c(){r.c(),n=V()},m(s,c){o[e].m(s,c),O(s,n,c),i=!0},p(s,c){let p=e;e=a(s),e===p?o[e].p(s,c):(D(),v(o[p],1,1,()=>{o[p]=null}),z(),r=o[e],r?r.p(s,c):(r=o[e]=l[e](s),r.c()),y(r,1),r.m(n.parentNode,n))},i(s){i||(y(r),i=!0)},o(s){v(r),i=!1},d(s){o[e].d(s),s&&R(n)}}}function Vn(t){let e;const r=t[10].default,n=Ke(r,t,t[9],$t);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l&532)&&Ye(n,r,i,i[9],e?Ge(r,i[9],l,Qn):Je(i[9]),$t)},i(i){e||(y(n,i),e=!0)},o(i){v(n,i),e=!1},d(i){n&&n.d(i)}}}function Zn(t){let e,r,n;const i=[{location:t[4]},t[2],t[3]];var l=t[0];function o(a){let s={};for(let c=0;c<i.length;c+=1)s=J(s,i[c]);return{props:s}}return l&&(e=new l(o())),{c(){e&&I(e.$$.fragment),r=V()},m(a,s){e&&M(e,a,s),O(a,r,s),n=!0},p(a,s){const c=s&28?rt(i,[s&16&&{location:a[4]},s&4&&ct(a[2]),s&8&&ct(a[3])]):{};if(l!==(l=a[0])){if(e){D();const p=e;v(p.$$.fragment,1,0,()=>{P(p,1)}),z()}l?(e=new l(o()),I(e.$$.fragment),y(e.$$.fragment,1),M(e,r.parentNode,r)):e=null}else l&&e.$set(c)},i(a){n||(e&&y(e.$$.fragment,a),n=!0)},o(a){e&&v(e.$$.fragment,a),n=!1},d(a){a&&R(r),e&&P(e,a)}}}function Xn(t){let e,r,n=t[1]!==null&&t[1].route===t[7]&&Rt(t);return{c(){n&&n.c(),e=V()},m(i,l){n&&n.m(i,l),O(i,e,l),r=!0},p(i,[l]){i[1]!==null&&i[1].route===i[7]?n?(n.p(i,l),l&2&&y(n,1)):(n=Rt(i),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(D(),v(n,1,1,()=>{n=null}),z())},i(i){r||(y(n),r=!0)},o(i){v(n),r=!1},d(i){n&&n.d(i),i&&R(e)}}}function er(t,e,r){let n,i,{$$slots:l={},$$scope:o}=e,{path:a=""}=e,{component:s=null}=e;const{registerRoute:c,unregisterRoute:p,activeRoute:f}=X(Se);K(t,f,g=>r(1,n=g));const d=X(Oe);K(t,d,g=>r(4,i=g));const u={path:a,default:a===""};let b={},m={};return c(u),typeof window!="undefined"&&me(()=>{p(u)}),t.$$set=g=>{r(13,e=J(J({},e),De(g))),"path"in g&&r(8,a=g.path),"component"in g&&r(0,s=g.component),"$$scope"in g&&r(9,o=g.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&n&&n.route===u&&r(2,b=n.params);{const{path:g,component:h,..._}=e;r(3,m=_)}},e=De(e),[s,n,b,m,i,f,d,u,a,o,l]}class Ct extends B{constructor(e){super(),T(this,e,er,Xn,F,{path:8,component:0})}}function tr(t){let e,r,n,i;const l=t[16].default,o=Ke(l,t,t[15],null);let a=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],s={};for(let c=0;c<a.length;c+=1)s=J(s,a[c]);return{c(){e=C("a"),o&&o.c(),xe(e,s)},m(c,p){O(c,e,p),o&&o.m(e,null),r=!0,n||(i=et(e,"click",t[5]),n=!0)},p(c,[p]){o&&o.p&&(!r||p&32768)&&Ye(o,l,c,c[15],r?Ge(l,c[15],p,null):Je(c[15]),null),xe(e,s=rt(a,[(!r||p&1)&&{href:c[0]},(!r||p&4)&&{"aria-current":c[2]},p&2&&c[1],p&64&&c[6]]))},i(c){r||(y(o,c),r=!0)},o(c){v(o,c),r=!1},d(c){c&&R(e),o&&o.d(c),n=!1,i()}}}function nr(t,e,r){let n;const i=["to","replace","state","getProps"];let l=ot(e,i),o,a,{$$slots:s={},$$scope:c}=e,{to:p="#"}=e,{replace:f=!1}=e,{state:d={}}=e,{getProps:u=()=>({})}=e;const{base:b}=X(Se);K(t,b,x=>r(14,a=x));const m=X(Oe);K(t,m,x=>r(13,o=x));const g=nn();let h,_,w,k;function j(x){if(g("click",x),Kn(x)){x.preventDefault();const E=o.pathname===h||f;Nn(h,{state:d,replace:E})}}return t.$$set=x=>{e=J(J({},e),De(x)),r(6,l=ot(e,i)),"to"in x&&r(7,p=x.to),"replace"in x&&r(8,f=x.replace),"state"in x&&r(9,d=x.state),"getProps"in x&&r(10,u=x.getProps),"$$scope"in x&&r(15,c=x.$$scope)},t.$$.update=()=>{t.$$.dirty&16512&&r(0,h=p==="/"?a.uri:Wn(p,a.uri)),t.$$.dirty&8193&&r(11,_=He(o.pathname,h)),t.$$.dirty&8193&&r(12,w=h===o.pathname),t.$$.dirty&4096&&r(2,n=w?"page":void 0),t.$$.dirty&15361&&r(1,k=u({location:o,href:h,isPartiallyCurrent:_,isCurrent:w}))},[h,k,n,b,m,j,l,p,f,d,u,_,w,o,a,c,s]}class rr extends B{constructor(e){super(),T(this,e,nr,tr,F,{to:7,replace:8,state:9,getProps:10})}}function Ot(t){let e,r,n;return{c(){e=C("div"),e.innerHTML=`<div class="spinner-wrapp d-flex center svelte-upyxi7"></div> 
    <svg class="spinner svelte-upyxi7" width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.4625 20.5C40.3116 20.5 41.006 21.1893 40.9424 22.0361C40.6784 25.5496 39.5122 28.9452 37.5451 31.8892C35.2926 35.2604 32.0909 37.8879 28.345 39.4395C24.5991 40.9911 20.4773 41.3971 16.5006 40.6061C12.524 39.8151 8.87129 37.8627 6.00431 34.9957C3.13733 32.1287 1.1849 28.476 0.393902 24.4994C-0.397095 20.5227 0.00887314 16.4009 1.56047 12.655C3.11207 8.9091 5.7396 5.70744 9.11081 3.45487C12.0548 1.48777 15.4504 0.321606 18.9639 0.0576201C19.8107 -0.00600024 20.5 0.688362 20.5 1.5375C20.5 2.38664 19.8103 3.06795 18.9644 3.14278C16.0599 3.39972 13.2573 4.38254 10.8192 6.01164C7.95366 7.92632 5.72026 10.6477 4.4014 13.8317C3.08254 17.0157 2.73747 20.5193 3.40982 23.8994C4.08216 27.2796 5.74173 30.3844 8.17866 32.8213C10.6156 35.2583 13.7204 36.9178 17.1006 37.5902C20.4807 38.2625 23.9843 37.9175 27.1683 36.5986C30.3523 35.2797 33.0737 33.0463 34.9884 30.1808C36.6175 27.7427 37.6003 24.9401 37.8572 22.0356C37.932 21.1897 38.6134 20.5 39.4625 20.5Z" fill="#6B7278" class="svelte-upyxi7"></path></svg>`,S(e,"class","spinner-bg d-flex center svelte-upyxi7")},m(i,l){O(i,e,l),n=!0},i(i){n||(H(()=>{r||(r=re(e,G,{},!0)),r.run(1)}),n=!0)},o(i){r||(r=re(e,G,{},!1)),r.run(0),n=!1},d(i){i&&R(e),i&&r&&r.end()}}}function ir(t){let e,r,n=t[0]&&Ot();return{c(){n&&n.c(),e=V()},m(i,l){n&&n.m(i,l),O(i,e,l),r=!0},p(i,[l]){i[0]?n?l&1&&y(n,1):(n=Ot(),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(D(),v(n,1,1,()=>{n=null}),z())},i(i){r||(y(n),r=!0)},o(i){v(n),r=!1},d(i){n&&n.d(i),i&&R(e)}}}function lr(t,e,r){let n=!1;const i=Y.subscribe(l=>{r(0,n=l)});return me(()=>{i()}),[n]}class or extends B{constructor(e){super(),T(this,e,lr,ir,F,{})}}var Ue=(t=>(t.users="/api/users",t.rooms="/api/rooms",t.createRoom="/api/room",t))(Ue||{});function sr(t){let e;return{c(){e=U("Play")},m(r,n){O(r,e,n)},d(r){r&&R(e)}}}function ar(t){let e,r,n,i=t[0].id+"",l,o,a,s;return a=new rr({props:{to:"/game/"+t[0].id,class:"btn medium h-100 mr-4",$$slots:{default:[sr]},$$scope:{ctx:t}}}),{c(){e=C("div"),r=C("div"),n=C("span"),l=U(i),o=A(),I(a.$$.fragment),S(n,"class","headline"),S(r,"class","room-info pl-4 d-flex space-between y-center svelte-17jgl3g"),S(e,"class","room d-flex svelte-17jgl3g")},m(c,p){O(c,e,p),$(e,r),$(r,n),$(n,l),$(r,o),M(a,r,null),s=!0},p(c,[p]){(!s||p&1)&&i!==(i=c[0].id+"")&&je(l,i);const f={};p&1&&(f.to="/game/"+c[0].id),p&2&&(f.$$scope={dirty:p,ctx:c}),a.$set(f)},i(c){s||(y(a.$$.fragment,c),s=!0)},o(c){v(a.$$.fragment,c),s=!1},d(c){c&&R(e),P(a)}}}function cr(t,e,r){let{room:n}=e;return t.$$set=i=>{"room"in i&&r(0,n=i.room)},[n]}class ur extends B{constructor(e){super(),T(this,e,cr,ar,F,{room:0})}}function St(t,e,r){const n=t.slice();return n[6]=e[r],n}function fr(t){let e;return{c(){e=C("div"),e.innerHTML='<div class="text my-5 svelte-jw8n2v">No rooms</div>',S(e,"class","wrapp py-5 text-center svelte-jw8n2v")},m(r,n){O(r,e,n)},p:L,i:L,o:L,d(r){r&&R(e)}}}function dr(t){let e,r,n=t[0],i=[];for(let o=0;o<n.length;o+=1)i[o]=Et(St(t,n,o));const l=o=>v(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=V()},m(o,a){for(let s=0;s<i.length;s+=1)i[s].m(o,a);O(o,e,a),r=!0},p(o,a){if(a&1){n=o[0];let s;for(s=0;s<n.length;s+=1){const c=St(o,n,s);i[s]?(i[s].p(c,a),y(i[s],1)):(i[s]=Et(c),i[s].c(),y(i[s],1),i[s].m(e.parentNode,e))}for(D(),s=n.length;s<i.length;s+=1)l(s);z()}},i(o){if(!r){for(let a=0;a<n.length;a+=1)y(i[a]);r=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)v(i[a]);r=!1},d(o){Xe(i,o),o&&R(e)}}}function Et(t){let e,r;return e=new ur({props:{room:t[6]}}),{c(){I(e.$$.fragment)},m(n,i){M(e,n,i),r=!0},p(n,i){const l={};i&1&&(l.room=n[6]),e.$set(l)},i(n){r||(y(e.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),r=!1},d(n){P(e,n)}}}function pr(t){let e,r,n,i,l,o,a,s,c,p,f,d;const u=[dr,fr],b=[];function m(g,h){return g[1]?0:1}return i=m(t),l=b[i]=u[i](t),{c(){e=C("h3"),e.textContent="Rooms:",r=A(),n=C("div"),l.c(),o=A(),a=C("div"),s=C("button"),c=U("Create room"),S(e,"class","px-2 title text-left"),S(s,"class","btn large outlined"),s.disabled=t[2],S(a,"class","text-center my-5"),S(n,"class","rooms-list mt-2")},m(g,h){O(g,e,h),O(g,r,h),O(g,n,h),b[i].m(n,null),$(n,o),$(n,a),$(a,s),$(s,c),p=!0,f||(d=et(s,"click",t[3]),f=!0)},p(g,[h]){let _=i;i=m(g),i===_?b[i].p(g,h):(D(),v(b[_],1,1,()=>{b[_]=null}),z(),l=b[i],l?l.p(g,h):(l=b[i]=u[i](g),l.c()),y(l,1),l.m(n,o)),(!p||h&4)&&(s.disabled=g[2])},i(g){p||(y(l),p=!0)},o(g){v(l),p=!1},d(g){g&&R(e),g&&R(r),g&&R(n),b[i].d(),f=!1,d()}}}function gr(t,e,r){let n,i;K(t,Y,c=>r(4,i=c));let l=[],o=!1;const a=async()=>{const p=await(await fetch(fe+Ue.rooms)).json();r(0,l=p),r(1,o=l.length>0)};Me(async()=>{await a()});const s=async()=>{Y.set(!0);try{const c=await fetch(fe+Ue.createRoom,{method:"POST"}).then(p=>p.json());console.log(c),c&&await a(),Y.set(!1)}catch{de.set("Something went wrong")}};return t.$$.update=()=>{t.$$.dirty&17&&r(2,n=l.length===0&&i)},[l,o,n,s,i]}class mr extends B{constructor(e){super(),T(this,e,gr,pr,F,{})}}function hr(t){let e,r;return e=new Mn({props:{roomId:t[1].id,useLoading:t[0]}}),{c(){I(e.$$.fragment)},m(n,i){M(e,n,i),r=!0},p(n,i){const l={};i&2&&(l.roomId=n[1].id),e.$set(l)},i(n){r||(y(e.$$.fragment,n),r=!0)},o(n){v(e.$$.fragment,n),r=!1},d(n){P(e,n)}}}function _r(t){let e,r,n;return r=new mr({}),{c(){e=U(`no path
      `),I(r.$$.fragment)},m(i,l){O(i,e,l),M(r,i,l),n=!0},i(i){n||(y(r.$$.fragment,i),n=!0)},o(i){v(r.$$.fragment,i),n=!1},d(i){i&&R(e),P(r,i)}}}function br(t){let e,r,n,i;return e=new Ct({props:{path:"/game/:id",$$slots:{default:[hr,({params:l})=>({1:l}),({params:l})=>l?2:0]},$$scope:{ctx:t}}}),n=new Ct({props:{path:"*",$$slots:{default:[_r]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment),r=A(),I(n.$$.fragment)},m(l,o){M(e,l,o),O(l,r,o),M(n,l,o),i=!0},p(l,o){const a={};o&6&&(a.$$scope={dirty:o,ctx:l}),e.$set(a);const s={};o&4&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){i||(y(e.$$.fragment,l),y(n.$$.fragment,l),i=!0)},o(l){v(e.$$.fragment,l),v(n.$$.fragment,l),i=!1},d(l){P(e,l),l&&R(r),P(n,l)}}}function yr(t){let e,r,n,i,l;return e=new or({}),i=new Jn({props:{url:fe,$$slots:{default:[br]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment),r=A(),n=C("main"),I(i.$$.fragment),S(n,"class","main svelte-1gwloq6")},m(o,a){M(e,o,a),O(o,r,a),O(o,n,a),M(i,n,null),l=!0},p(o,[a]){const s={};a&4&&(s.$$scope={dirty:a,ctx:o}),i.$set(s)},i(o){l||(y(e.$$.fragment,o),y(i.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),v(i.$$.fragment,o),l=!1},d(o){P(e,o),o&&R(r),o&&R(n),P(i)}}}function vr(t){var r,n;ze("user",(n=(r=window.Telegram.WebApp.initDataUnsafe)==null?void 0:r.user)!=null?n:{username:prompt("username","serg"),id:Date.now(),first_name:"Serg",last_name:"",language_code:"en"});const e=()=>(Y.set(!1),()=>({destroy(){Y.set(!0)}}));return console.log(window.Telegram),[e]}class xr extends B{constructor(e){super(),T(this,e,vr,yr,F,{})}}new xr({target:document.getElementById("app")});

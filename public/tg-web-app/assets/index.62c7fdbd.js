var el=Object.defineProperty;var tl=(t,e,l)=>e in t?el(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var tt=(t,e,l)=>(tl(t,typeof e!="symbol"?e+"":e,l),l);const nl=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=l(r);fetch(r.href,i)}};nl();function D(){}const gt=t=>t;function pe(t,e){for(const l in e)t[l]=e[l];return t}function Ln(t){return t()}function fn(){return Object.create(null)}function re(t){t.forEach(Ln)}function Ve(t){return typeof t=="function"}function V(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ll(t){return Object.keys(t).length===0}function At(t,...e){if(t==null)return D;const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function rl(t){let e;return At(t,l=>e=l)(),e}function ue(t,e,l){t.$$.on_destroy.push(At(e,l))}function Et(t,e,l,n){if(t){const r=Fn(t,e,l,n);return t[0](r)}}function Fn(t,e,l,n){return t[1]&&n?pe(l.ctx.slice(),t[1](n(e))):l.ctx}function Tt(t,e,l,n){if(t[2]&&n){const r=t[2](n(l));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(e.dirty.length,r.length);for(let s=0;s<o;s+=1)i[s]=e.dirty[s]|r[s];return i}return e.dirty|r}return e.dirty}function Bt(t,e,l,n,r,i){if(r){const o=Fn(e,l,n,i);t.p(o,r)}}function Nt(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function xt(t){const e={};for(const l in t)l[0]!=="$"&&(e[l]=t[l]);return e}function pn(t,e){const l={};e=new Set(e);for(const n in t)!e.has(n)&&n[0]!=="$"&&(l[n]=t[n]);return l}function ot(t){return t==null?"":t}const Wn=typeof window!="undefined";let jt=Wn?()=>window.performance.now():()=>Date.now(),Mt=Wn?t=>requestAnimationFrame(t):D;const Ce=new Set;function Hn(t){Ce.forEach(e=>{e.c(t)||(Ce.delete(e),e.f())}),Ce.size!==0&&Mt(Hn)}function It(t){let e;return Ce.size===0&&Mt(Hn),{promise:new Promise(l=>{Ce.add(e={c:t,f:l})}),abort(){Ce.delete(e)}}}function m(t,e){t.appendChild(e)}function Un(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function il(t){const e=v("style");return ol(Un(t),e),e.sheet}function ol(t,e){m(t.head||t,e)}function A(t,e,l){t.insertBefore(e,l||null)}function P(t){t.parentNode.removeChild(t)}function He(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function v(t){return document.createElement(t)}function L(t){return document.createTextNode(t)}function R(){return L(" ")}function ge(){return L("")}function W(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function b(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function st(t,e){const l=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:l[n]&&l[n].set?t[n]=e[n]:b(t,n,e[n])}function sl(t){return Array.from(t.childNodes)}function Ke(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ce(t,e){t.value=e==null?"":e}function al(t,e,l,n){l===null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function te(t,e,l){t.classList[l?"add":"remove"](e)}function qn(t,e,{bubbles:l=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,l,n,e),r}const at=new Map;let ct=0;function cl(t){let e=5381,l=t.length;for(;l--;)e=(e<<5)-e^t.charCodeAt(l);return e>>>0}function ul(t,e){const l={stylesheet:il(e),rules:{}};return at.set(t,l),l}function ut(t,e,l,n,r,i,o,s=0){const c=16.666/n;let a=`{
`;for(let f=0;f<=1;f+=c){const g=e+(l-e)*i(f);a+=f*100+`%{${o(g,1-g)}}
`}const u=a+`100% {${o(l,1-l)}}
}`,p=`__svelte_${cl(u)}_${s}`,h=Un(t),{stylesheet:_,rules:d}=at.get(h)||ul(h,t);d[p]||(d[p]=!0,_.insertRule(`@keyframes ${p} ${u}`,_.cssRules.length));const k=t.style.animation||"";return t.style.animation=`${k?`${k}, `:""}${p} ${n}ms linear ${r}ms 1 both`,ct+=1,p}function ft(t,e){const l=(t.style.animation||"").split(", "),n=l.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=l.length-n.length;r&&(t.style.animation=n.join(", "),ct-=r,ct||fl())}function fl(){Mt(()=>{ct||(at.forEach(t=>{const{stylesheet:e}=t;let l=e.cssRules.length;for(;l--;)e.deleteRule(l);t.rules={}}),at.clear())})}let Ue;function Fe(t){Ue=t}function Je(){if(!Ue)throw new Error("Function called outside component initialization");return Ue}function mt(t){Je().$$.on_mount.push(t)}function Ye(t){Je().$$.on_destroy.push(t)}function pl(){const t=Je();return(e,l,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=qn(e,l,{cancelable:n});return r.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function kt(t,e){return Je().$$.context.set(t,e),e}function be(t){return Je().$$.context.get(t)}function dl(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const ze=[],dn=[],lt=[],gn=[],gl=Promise.resolve();let $t=!1;function ml(){$t||($t=!0,gl.then(Gn))}function X(t){lt.push(t)}const _t=new Set;let nt=0;function Gn(){const t=Ue;do{for(;nt<ze.length;){const e=ze[nt];nt++,Fe(e),hl(e.$$)}for(Fe(null),ze.length=0,nt=0;dn.length;)dn.pop()();for(let e=0;e<lt.length;e+=1){const l=lt[e];_t.has(l)||(_t.add(l),l())}lt.length=0}while(ze.length);for(;gn.length;)gn.pop()();$t=!1,_t.clear(),Fe(t)}function hl(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}let De;function Dt(){return De||(De=Promise.resolve(),De.then(()=>{De=null})),De}function _e(t,e,l){t.dispatchEvent(qn(`${e?"intro":"outro"}${l}`))}const rt=new Set;let ne;function q(){ne={r:0,c:[],p:ne}}function G(){ne.r||re(ne.c),ne=ne.p}function w(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function C(t,e,l,n){if(t&&t.o){if(rt.has(t))return;rt.add(t),ne.c.push(()=>{rt.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}}const zt={duration:0};function Ct(t,e,l){let n=e(t,l),r=!1,i,o,s=0;function c(){i&&ft(t,i)}function a(){const{delay:p=0,duration:h=300,easing:_=gt,tick:d=D,css:k}=n||zt;k&&(i=ut(t,0,1,h,p,_,k,s++)),d(0,1);const f=jt()+p,g=f+h;o&&o.abort(),r=!0,X(()=>_e(t,!0,"start")),o=It($=>{if(r){if($>=g)return d(1,0),_e(t,!0,"end"),c(),r=!1;if($>=f){const y=_(($-f)/h);d(y,1-y)}}return r})}let u=!1;return{start(){u||(u=!0,ft(t),Ve(n)?(n=n(),Dt().then(a)):a())},invalidate(){u=!1},end(){r&&(c(),r=!1)}}}function Vn(t,e,l){let n=e(t,l),r=!0,i;const o=ne;o.r+=1;function s(){const{delay:c=0,duration:a=300,easing:u=gt,tick:p=D,css:h}=n||zt;h&&(i=ut(t,1,0,a,c,u,h));const _=jt()+c,d=_+a;X(()=>_e(t,!1,"start")),It(k=>{if(r){if(k>=d)return p(0,1),_e(t,!1,"end"),--o.r||re(o.c),!1;if(k>=_){const f=u((k-_)/a);p(1-f,f)}}return r})}return Ve(n)?Dt().then(()=>{n=n(),s()}):s(),{end(c){c&&n.tick&&n.tick(1,0),r&&(i&&ft(t,i),r=!1)}}}function de(t,e,l,n){let r=e(t,l),i=n?0:1,o=null,s=null,c=null;function a(){c&&ft(t,c)}function u(h,_){const d=h.b-i;return _*=Math.abs(d),{a:i,b:h.b,d,duration:_,start:h.start,end:h.start+_,group:h.group}}function p(h){const{delay:_=0,duration:d=300,easing:k=gt,tick:f=D,css:g}=r||zt,$={start:jt()+_,b:h};h||($.group=ne,ne.r+=1),o||s?s=$:(g&&(a(),c=ut(t,i,h,d,_,k,g)),h&&f(0,1),o=u($,d),X(()=>_e(t,h,"start")),It(y=>{if(s&&y>s.start&&(o=u(s,d),s=null,_e(t,o.b,"start"),g&&(a(),c=ut(t,i,o.b,o.duration,0,k,r.css))),o){if(y>=o.end)f(i=o.b,1-i),_e(t,o.b,"end"),s||(o.b?a():--o.group.r||re(o.group.c)),o=null;else if(y>=o.start){const S=y-o.start;i=o.a+o.d*k(S/o.duration),f(i,1-i)}}return!!(o||s)}))}return{run(h){Ve(r)?Dt().then(()=>{r=r(),p(h)}):p(h)},end(){a(),o=s=null}}}function _l(t,e){C(t,1,1,()=>{e.delete(t.key)})}function bl(t,e,l,n,r,i,o,s,c,a,u,p){let h=t.length,_=i.length,d=h;const k={};for(;d--;)k[t[d].key]=d;const f=[],g=new Map,$=new Map;for(d=_;d--;){const x=p(r,i,d),E=l(x);let z=o.get(E);z?n&&z.p(x,e):(z=a(E,x),z.c()),g.set(E,f[d]=z),E in k&&$.set(E,Math.abs(d-k[E]))}const y=new Set,S=new Set;function T(x){w(x,1),x.m(s,u),o.set(x.key,x),u=x.first,_--}for(;h&&_;){const x=f[_-1],E=t[h-1],z=x.key,F=E.key;x===E?(u=x.first,h--,_--):g.has(F)?!o.has(z)||y.has(z)?T(x):S.has(F)?h--:$.get(z)>$.get(F)?(S.add(z),T(x)):(y.add(F),h--):(c(E,o),h--)}for(;h--;){const x=t[h];g.has(x.key)||c(x,o)}for(;_;)T(f[_-1]);return f}function Lt(t,e){const l={},n={},r={$$scope:1};let i=t.length;for(;i--;){const o=t[i],s=e[i];if(s){for(const c in o)c in s||(n[c]=1);for(const c in s)r[c]||(l[c]=s[c],r[c]=1);t[i]=s}else for(const c in o)r[c]=1}for(const o in n)o in l||(l[o]=void 0);return l}function mn(t){return typeof t=="object"&&t!==null?t:{}}function I(t){t&&t.c()}function j(t,e,l,n){const{fragment:r,on_mount:i,on_destroy:o,after_update:s}=t.$$;r&&r.m(e,l),n||X(()=>{const c=i.map(Ln).filter(Ve);o?o.push(...c):re(c),t.$$.on_mount=[]}),s.forEach(X)}function M(t,e){const l=t.$$;l.fragment!==null&&(re(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function vl(t,e){t.$$.dirty[0]===-1&&(ze.push(t),ml(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,l,n,r,i,o,s=[-1]){const c=Ue;Fe(t);const a=t.$$={fragment:null,ctx:null,props:i,update:D,not_equal:r,bound:fn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:fn(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let u=!1;if(a.ctx=l?l(t,e.props||{},(p,h,..._)=>{const d=_.length?_[0]:h;return a.ctx&&r(a.ctx[p],a.ctx[p]=d)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](d),u&&vl(t,p)),h}):[],a.update(),u=!0,re(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const p=sl(e.target);a.fragment&&a.fragment.l(p),p.forEach(P)}else a.fragment&&a.fragment.c();e.intro&&w(t.$$.fragment),j(t,e.target,e.anchor,e.customElement),Gn()}Fe(c)}class Z{$destroy(){M(this,1),this.$destroy=D}$on(e,l){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const r=n.indexOf(l);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!ll(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const yl=window.WEB_APP_BASE_URL,Se=window.WEB_APP_API_HOST,hn=Se.startsWith("https"),wl=Se.replace(hn?"https":"http",hn?"wss":"ws");class xl{constructor(e,l){tt(this,"wss");tt(this,"callbacks",{board:null,eat:null,error:null,participant:null,highlight:null,gameStatus:null,gameOver:null});tt(this,"callbacksOnMessage",{board:e=>(this.callbacks.board=e,this.callbacksOnMessage),eat:e=>(this.callbacks.eat=e,this.callbacksOnMessage),error:e=>(this.callbacks.error=e,this.callbacksOnMessage),participant:e=>(this.callbacks.participant=e,this.callbacksOnMessage),highlight:e=>(this.callbacks.highlight=e,this.callbacksOnMessage),gameStatus:e=>(this.callbacks.gameStatus=e,this.callbacksOnMessage),gameOver:e=>(this.callbacks.gameOver=e,this.callbacksOnMessage)});this.wss=new WebSocket(`${wl}?roomId=${e}&userName=${l}`)}onEvents(){return this.wss.onmessage=({data:e})=>{var r,i;const{type:l,message:n}=this.parsePayload(e);(i=(r=this.callbacks)[l])==null||i.call(r,n)},this.callbacksOnMessage}onConnect(e){return this.wss.onopen=e,this.onEvents()}onClose(e){this.wss.onclose=e}sendEvent(e,l){this.wss.send(this.getPayload(e,l))}end(){this.wss.close()}parsePayload(e){return JSON.parse(e)}getPayload(e,l){return JSON.stringify({type:e,message:l})}}const $e=[];function kl(t,e){return{subscribe:H(t,e).subscribe}}function H(t,e=D){let l;const n=new Set;function r(s){if(V(t,s)&&(t=s,l)){const c=!$e.length;for(const a of n)a[1](),$e.push(a,t);if(c){for(let a=0;a<$e.length;a+=2)$e[a][0]($e[a+1]);$e.length=0}}}function i(s){r(s(t))}function o(s,c=D){const a=[s,c];return n.add(a),n.size===1&&(l=e(r)||D),s(t),()=>{n.delete(a),n.size===0&&(l(),l=null)}}return{set:r,update:i,subscribe:o}}function $l(t,e,l){const n=!Array.isArray(t),r=n?[t]:t,i=e.length<2;return kl(l,o=>{let s=!1;const c=[];let a=0,u=D;const p=()=>{if(a)return;u();const _=e(n?c[0]:c,o);i?o(_):u=Ve(_)?_:D},h=r.map((_,d)=>At(_,k=>{c[d]=k,a&=~(1<<d),s&&p()},()=>{a|=1<<d}));return s=!0,p(),function(){re(h),u()}})}const qe=H(null);qe.subscribe(t=>console.log("err",t));const We={error:H(null),eat:H(null),board:H([]),participantRole:H(null),participantIn:H(null),participantOut:H(null),highlight:H([]),gameOver:H(!1)},Kn=H(null);var St=(t=>(t.Move="move",t.Highlight="highlight",t))(St||{});function Jn(t){const e=t-1;return e*e*e+1}function fe(t,{delay:e=0,duration:l=400,easing:n=gt}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:l,easing:n,css:i=>`opacity: ${i*r}`}}function Oe(t,{delay:e=0,duration:l=400,easing:n=Jn,x:r=0,y:i=0,opacity:o=0}={}){const s=getComputedStyle(t),c=+s.opacity,a=s.transform==="none"?"":s.transform,u=c*(1-o);return{delay:e,duration:l,easing:n,css:(p,h)=>`
			transform: ${a} translate(${(1-p)*r}px, ${(1-p)*i}px);
			opacity: ${c-u*h}`}}function Cl(t,{delay:e=0,duration:l=400,easing:n=Jn,start:r=0,opacity:i=0}={}){const o=getComputedStyle(t),s=+o.opacity,c=o.transform==="none"?"":o.transform,a=1-r,u=s*(1-i);return{delay:e,duration:l,easing:n,css:(p,h)=>`
			transform: ${c} scale(${1-a*h});
			opacity: ${s-u*h}
		`}}function Sl(t){let e,l,n,r,i;return{c(){e=v("div"),b(e,"class",l=ot(`figure ${t[0].color}`)+" svelte-yq1388")},m(o,s){A(o,e,s),i=!0},p(o,[s]){t=o,(!i||s&1&&l!==(l=ot(`figure ${t[0].color}`)+" svelte-yq1388"))&&b(e,"class",l)},i(o){i||(X(()=>{r&&r.end(1),n=Ct(e,t[2],{delay:t[1]}),n.start()}),i=!0)},o(o){n&&n.invalidate(),r=Vn(e,t[3],{delay:t[1]}),i=!1},d(o){o&&P(e),o&&r&&r.end()}}}function Rl(t,e,l){let n,r,i,{figure:o}=e,{animDelay:s=0}=e,{isFirstRender:c=!0}=e;return t.$$set=a=>{"figure"in a&&l(0,o=a.figure),"animDelay"in a&&l(4,s=a.animDelay),"isFirstRender"in a&&l(5,c=a.isFirstRender)},t.$$.update=()=>{t.$$.dirty&32&&l(3,n=fe),t.$$.dirty&32&&l(2,r=c?Cl:fe),t.$$.dirty&48&&l(1,i=c?500+s:0)},[o,i,r,n,s,c]}class Ft extends Z{constructor(e){super(),Q(this,e,Rl,Sl,V,{figure:0,animDelay:4,isFirstRender:5})}}function _n(t){let e,l;return e=new Ft({props:{figure:t[0].figure,animDelay:t[1],isFirstRender:t[2]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.figure=n[0].figure),r&2&&(i.animDelay=n[1]),r&4&&(i.isFirstRender=n[2]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Ol(t){let e,l,n,r,i,o=t[0].figure&&_n(t);return{c(){e=v("div"),o&&o.c(),b(e,"class",l=ot(`cell ${t[0].color} d-flex center`)+" svelte-1schn10"),te(e,"highlight",t[3])},m(s,c){A(s,e,c),o&&o.m(e,null),n=!0,r||(i=W(e,"click",t[4]),r=!0)},p(s,[c]){s[0].figure?o?(o.p(s,c),c&1&&w(o,1)):(o=_n(s),o.c(),w(o,1),o.m(e,null)):o&&(q(),C(o,1,1,()=>{o=null}),G()),(!n||c&1&&l!==(l=ot(`cell ${s[0].color} d-flex center`)+" svelte-1schn10"))&&b(e,"class",l),c&9&&te(e,"highlight",s[3])},i(s){n||(w(o),n=!0)},o(s){C(o),n=!1},d(s){s&&P(e),o&&o.d(),r=!1,i()}}}function Pl(t,e,l){let{cell:n}=e,{animFigureDelay:r=0}=e,{isFirstRender:i}=e,o=!1;const s=p=>p.findIndex(({col:h,row:_})=>h===n.col&&_===n.row)!==-1,c=We.highlight.subscribe(p=>{l(3,o=s(p))}),a=(p,h)=>({[p]:{id:h.id}}),u=()=>{Kn.update(p=>p?p.from.id===n.id?null:s(rl(We.highlight))?{...p,...a("to",n)}:n.figure?a("from",n):null:a("from",n))};return Ye(()=>{c()}),t.$$set=p=>{"cell"in p&&l(0,n=p.cell),"animFigureDelay"in p&&l(1,r=p.animFigureDelay),"isFirstRender"in p&&l(2,i=p.isFirstRender)},[n,r,i,o,u]}class Al extends Z{constructor(e){super(),Q(this,e,Pl,Ol,V,{cell:0,animFigureDelay:1,isFirstRender:2})}}function bn(t,e,l){const n=t.slice();return n[7]=e[l],n[9]=l,n}function vn(t){let e,l=[],n=new Map,r,i,o=t[0];const s=c=>c[7].id;for(let c=0;c<o.length;c+=1){let a=bn(t,o,c),u=s(a);n.set(u,l[c]=yn(u,a))}return{c(){e=v("div");for(let c=0;c<l.length;c+=1)l[c].c();b(e,"class","board svelte-my1oz1")},m(c,a){A(c,e,a);for(let u=0;u<l.length;u+=1)l[u].m(e,null);i=!0},p(c,a){a&3&&(o=c[0],q(),l=bl(l,a,s,1,c,o,n,e,_l,yn,null,bn),G())},i(c){if(!i){for(let a=0;a<o.length;a+=1)w(l[a]);X(()=>{r||(r=de(e,Oe,{y:-100,duration:500},!0)),r.run(1)}),i=!0}},o(c){for(let a=0;a<l.length;a+=1)C(l[a]);r||(r=de(e,Oe,{y:-100,duration:500},!1)),r.run(0),i=!1},d(c){c&&P(e);for(let a=0;a<l.length;a+=1)l[a].d();c&&r&&r.end()}}}function yn(t,e){let l,n,r;return n=new Al({props:{cell:e[7],animFigureDelay:e[9]*5,isFirstRender:e[1]}}),n.$on("unselect",e[5]),{key:t,first:null,c(){l=ge(),I(n.$$.fragment),this.first=l},m(i,o){A(i,l,o),j(n,i,o),r=!0},p(i,o){e=i;const s={};o&1&&(s.cell=e[7]),o&1&&(s.animFigureDelay=e[9]*5),o&2&&(s.isFirstRender=e[1]),n.$set(s)},i(i){r||(w(n.$$.fragment,i),r=!0)},o(i){C(n.$$.fragment,i),r=!1},d(i){i&&P(l),M(n,i)}}}function El(t){let e,l,n=t[2]&&vn(t);return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[2]?n?(n.p(r,i),i&4&&w(n,1)):(n=vn(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(q(),C(n,1,1,()=>{n=null}),G())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}function Tl(t,e,l){let n,r,{cells:i=[]}=e,{highlightedCells:o=[]}=e;console.log(i);let s=!0;mt(()=>{setTimeout(()=>{l(1,s=!1)},100)});function c(a){dl.call(this,t,a)}return t.$$set=a=>{"cells"in a&&l(3,i=a.cells),"highlightedCells"in a&&l(4,o=a.highlightedCells)},t.$$.update=()=>{t.$$.dirty&24&&l(0,n=i.map(a=>(o.find(({col:p,row:h})=>p===a.col&&h===a.row)&&(a={...a},a.isHighlight=!0),a))),t.$$.dirty&1&&l(2,r=n.length>0),t.$$.dirty&1&&console.log(n)},[n,s,r,i,o,c]}class Bl extends Z{constructor(e){super(),Q(this,e,Tl,El,V,{cells:3,highlightedCells:4})}}function wn(t){let e,l,n,r,i,o,s,c,a;return{c(){e=v("div"),l=v("div"),n=L("! "),r=L(t[0]),i=L(" !"),b(l,"class","msg svelte-1i1odkc"),b(e,"class","msg-wrapp svelte-1i1odkc")},m(u,p){A(u,e,p),m(e,l),m(l,n),m(l,r),m(l,i),a=!0},p(u,p){(!a||p&1)&&Ke(r,u[0])},i(u){a||(o||X(()=>{o=Ct(l,fe,{duration:100,delay:100}),o.start()}),X(()=>{c&&c.end(1),s=Ct(e,fe,{duration:100}),s.start()}),a=!0)},o(u){s&&s.invalidate(),c=Vn(e,fe,{duration:500}),a=!1},d(u){u&&P(e),u&&c&&c.end()}}}function Nl(t){let e,l,n=t[0]&&wn(t);return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&w(n,1)):(n=wn(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(q(),C(n,1,1,()=>{n=null}),G())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}let jl=1e3;function Ml(t,e,l){let n=null;const r=qe.subscribe(i=>{l(0,n=i),setTimeout(()=>{qe.set(null)},jl)});return Ye(()=>{r()}),[n]}class Il extends Z{constructor(e){super(),Q(this,e,Ml,Nl,V,{})}}function Dl(t){let e,l=[{class:"avatar"},t[1]],n={};for(let r=0;r<l.length;r+=1)n=pe(n,l[r]);return{c(){e=v("div"),st(e,n),te(e,"no-avatar",!t[0].photo_url),te(e,"svelte-1iem2ua",!0)},m(r,i){A(r,e,i)},p(r,[i]){st(e,n=Lt(l,[{class:"avatar"},i&2&&r[1]])),te(e,"no-avatar",!r[0].photo_url),te(e,"svelte-1iem2ua",!0)},i:D,o:D,d(r){r&&P(e)}}}function zl(t,e,l){let n,{user:r}=e;return t.$$set=i=>{"user"in i&&l(0,r=i.user)},t.$$.update=()=>{t.$$.dirty&1&&l(1,n=r.photo_url?{"style:backgroundImage":"url(user.photo_url)"}:{"data-letter":r.name[0]})},[r,n]}class Yn extends Z{constructor(e){super(),Q(this,e,zl,Dl,V,{user:0})}}const Re=H(!1);var Le=(t=>(t.Black="black",t.White="white",t.Watcher="watcher",t))(Le||{}),Rt=(t=>(t.Play="Play",t.GameOver="Game Over",t.GameNotStarted="Game is not started",t))(Rt||{});function xn(t,e,l){const n=t.slice();return n[16]=e[l],n}function kn(t,e,l){const n=t.slice();return n[16]=e[l],n}function $n(t){let e,l,n,r=t[5]&&Cn(t),i=t[4]&&Rn(t);return{c(){e=v("div"),r&&r.c(),l=R(),i&&i.c(),b(e,"class","players-container d-flex space-between")},m(o,s){A(o,e,s),r&&r.m(e,null),m(e,l),i&&i.m(e,null),n=!0},p(o,s){o[5]?r?(r.p(o,s),s&32&&w(r,1)):(r=Cn(o),r.c(),w(r,1),r.m(e,l)):r&&(q(),C(r,1,1,()=>{r=null}),G()),o[4]?i?(i.p(o,s),s&16&&w(i,1)):(i=Rn(o),i.c(),w(i,1),i.m(e,null)):i&&(q(),C(i,1,1,()=>{i=null}),G())},i(o){n||(w(r),w(i),n=!0)},o(o){C(r),C(i),n=!1},d(o){o&&P(e),r&&r.d(),i&&i.d()}}}function Cn(t){let e,l,n,r,i,o=t[5].name+"",s,c,a,u,p,h;n=new Yn({props:{user:t[5]}});let _=t[1],d=[];for(let f=0;f<_.length;f+=1)d[f]=Sn(kn(t,_,f));const k=f=>C(d[f],1,1,()=>{d[f]=null});return{c(){e=v("div"),l=v("div"),I(n.$$.fragment),r=R(),i=v("div"),s=L(o),c=R(),a=v("br"),u=R();for(let f=0;f<d.length;f+=1)d[f].c();b(i,"class","name mx-2"),b(l,"class","d-flex y-center p-4"),b(e,"class","player-info")},m(f,g){A(f,e,g),m(e,l),j(n,l,null),m(l,r),m(l,i),m(i,s),m(e,c),m(e,a),m(e,u);for(let $=0;$<d.length;$+=1)d[$].m(e,null);h=!0},p(f,g){const $={};if(g&32&&($.user=f[5]),n.$set($),(!h||g&32)&&o!==(o=f[5].name+"")&&Ke(s,o),g&2){_=f[1];let y;for(y=0;y<_.length;y+=1){const S=kn(f,_,y);d[y]?(d[y].p(S,g),w(d[y],1)):(d[y]=Sn(S),d[y].c(),w(d[y],1),d[y].m(e,null))}for(q(),y=_.length;y<d.length;y+=1)k(y);G()}},i(f){if(!h){w(n.$$.fragment,f);for(let g=0;g<_.length;g+=1)w(d[g]);X(()=>{p||(p=de(e,Oe,{y:20,duration:500},!0)),p.run(1)}),h=!0}},o(f){C(n.$$.fragment,f),d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)C(d[g]);p||(p=de(e,Oe,{y:20,duration:500},!1)),p.run(0),h=!1},d(f){f&&P(e),M(n),He(d,f),f&&p&&p.end()}}}function Sn(t){let e,l;return e=new Ft({props:{figure:t[16]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&2&&(i.figure=n[16]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Rn(t){let e,l,n,r=t[4].name+"",i,o,s,c,a,u,p,h;s=new Yn({props:{user:t[4]}});let _=t[2],d=[];for(let f=0;f<_.length;f+=1)d[f]=On(xn(t,_,f));const k=f=>C(d[f],1,1,()=>{d[f]=null});return{c(){e=v("div"),l=v("div"),n=v("div"),i=L(r),o=R(),I(s.$$.fragment),c=R(),a=v("br"),u=R();for(let f=0;f<d.length;f+=1)d[f].c();b(n,"class","name mx-2"),b(l,"class","d-flex y-center p-4 text-right"),b(e,"class","player-info")},m(f,g){A(f,e,g),m(e,l),m(l,n),m(n,i),m(l,o),j(s,l,null),m(e,c),m(e,a),m(e,u);for(let $=0;$<d.length;$+=1)d[$].m(e,null);h=!0},p(f,g){(!h||g&16)&&r!==(r=f[4].name+"")&&Ke(i,r);const $={};if(g&16&&($.user=f[4]),s.$set($),g&4){_=f[2];let y;for(y=0;y<_.length;y+=1){const S=xn(f,_,y);d[y]?(d[y].p(S,g),w(d[y],1)):(d[y]=On(S),d[y].c(),w(d[y],1),d[y].m(e,null))}for(q(),y=_.length;y<d.length;y+=1)k(y);G()}},i(f){if(!h){w(s.$$.fragment,f);for(let g=0;g<_.length;g+=1)w(d[g]);X(()=>{p||(p=de(e,Oe,{y:20,duration:500},!0)),p.run(1)}),h=!0}},o(f){C(s.$$.fragment,f),d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)C(d[g]);p||(p=de(e,Oe,{y:20,duration:500},!1)),p.run(0),h=!1},d(f){f&&P(e),M(s),He(d,f),f&&p&&p.end()}}}function On(t){let e,l;return e=new Ft({props:{figure:t[16]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&4&&(i.figure=n[16]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Ll(t){let e,l,n,r,i,o,s,c;e=new Il({}),o=new Bl({props:{cells:t[0],highlightedCells:t[6]}});let a=t[3]&&$n(t);return{c(){I(e.$$.fragment),l=R(),n=v("div"),r=v("div"),i=v("div"),I(o.$$.fragment),s=R(),a&&a.c(),b(i,"class","board-wrapp svelte-ez6xnd"),b(r,"class","board-container svelte-ez6xnd"),b(n,"class","h-100 w-100 d-flex column")},m(u,p){j(e,u,p),A(u,l,p),A(u,n,p),m(n,r),m(r,i),j(o,i,null),m(n,s),a&&a.m(n,null),c=!0},p(u,[p]){const h={};p&1&&(h.cells=u[0]),o.$set(h),u[3]?a?(a.p(u,p),p&8&&w(a,1)):(a=$n(u),a.c(),w(a,1),a.m(n,null)):a&&(q(),C(a,1,1,()=>{a=null}),G())},i(u){c||(w(e.$$.fragment,u),w(o.$$.fragment,u),w(a),c=!0)},o(u){C(e.$$.fragment,u),C(o.$$.fragment,u),C(a),c=!1},d(u){M(e,u),u&&P(l),u&&P(n),M(o),a&&a.d()}}}function Fl(t,e,l){let n,r,{roomId:i="Rhmw41bl55d02ae"}=e,{username:o}=be("user"),s;Rt.GameNotStarted;let c=[],a=[],u=[],p=[],h,_,d;const k=async()=>{l(3,h=await fetch(`${Se}/api/room/${i}`).then(g=>g.json()))};mt(()=>{Re.set(!0),d=new xl(i,o),d.onConnect(async()=>{try{await k()}catch(g){console.log(g)}finally{Re.set(!1)}}).board(g=>{l(0,c=g),We.highlight.set([])}).eat(({white:g,black:$})=>{g.length!==u.length&&l(1,u=g),$.length!==p.length&&l(2,p=$),console.log(g,$)}).participant(g=>{l(9,_=g.players),g.watchers,_.white.name===o?l(8,s=Le.White):_.black.name===o?l(8,s=Le.Black):l(8,s=Le.Watcher)}).gameStatus(g=>{g===Rt.Play&&window.Telegram.WebApp.ready()}).highlight(g=>{We.highlight.set(g)}).error(g=>{qe.set(g)})});const f=Kn.subscribe(g=>{if(!h)return;if(!g){We.highlight.set([]);return}console.log(g);const{from:$,to:y}=g;y?$&&y&&d.sendEvent(St.Move,{from:$,to:y}):d.sendEvent(St.Highlight,{from:$})});return Ye(()=>{f(),d.end()}),t.$$set=g=>{"roomId"in g&&l(7,i=g.roomId)},t.$$.update=()=>{t.$$.dirty&768&&l(5,n=!!s&&_[s]),t.$$.dirty&768&&l(4,r=!!s&&_[s===Le.Black?"white":"black"])},[c,u,p,h,r,n,a,i,s,_]}class Wl extends Z{constructor(e){super(),Q(this,e,Fl,Ll,V,{roomId:7})}}const pt={},dt={};function bt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function Hl(t,e){const l=[];let n=bt(t);return{get location(){return n},listen(r){l.push(r);const i=()=>{n=bt(t),r({location:n,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const o=l.indexOf(r);l.splice(o,1)}},navigate(r,{state:i,replace:o=!1}={}){i={...i,key:Date.now()+""};try{o?t.history.replaceState(i,null,r):t.history.pushState(i,null,r)}catch{t.location[o?"replace":"assign"](r)}n=bt(t),l.forEach(s=>s({location:n,action:"PUSH"}))}}}function Ul(t="/"){let e=0;const l=[{pathname:t,search:""}],n=[];return{get location(){return l[e]},addEventListener(r,i){},removeEventListener(r,i){},history:{get entries(){return l},get index(){return e},get state(){return n[e]},pushState(r,i,o){const[s,c=""]=o.split("?");e++,l.push({pathname:s,search:c}),n.push(r)},replaceState(r,i,o){const[s,c=""]=o.split("?");l[e]={pathname:s,search:c},n[e]=r}}}}const ql=Boolean(typeof window!="undefined"&&window.document&&window.document.createElement),Ot=Hl(ql?window:Ul()),{navigate:Gl}=Ot,Qn=/^:(.+)/,Pn=4,Vl=3,Kl=2,Jl=1,Yl=1;function Pt(t,e){return t.substr(0,e.length)===e}function Ql(t){return t===""}function Zl(t){return Qn.test(t)}function Zn(t){return t[0]==="*"}function Ge(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function vt(t){return t.replace(/(^\/+|\/+$)/g,"")}function Xl(t,e){const l=t.default?0:Ge(t.path).reduce((n,r)=>(n+=Pn,Ql(r)?n+=Yl:Zl(r)?n+=Kl:Zn(r)?n-=Pn+Jl:n+=Vl,n),0);return{route:t,score:l,index:e}}function er(t){return t.map(Xl).sort((e,l)=>e.score<l.score?1:e.score>l.score?-1:e.index-l.index)}function Xn(t,e){let l,n;const[r]=e.split("?"),i=Ge(r),o=i[0]==="",s=er(t);for(let c=0,a=s.length;c<a;c++){const u=s[c].route;let p=!1;if(u.default){n={route:u,params:{},uri:e};continue}const h=Ge(u.path),_={},d=Math.max(i.length,h.length);let k=0;for(;k<d;k++){const f=h[k],g=i[k];if(f!==void 0&&Zn(f)){const y=f==="*"?"*":f.slice(1);_[y]=i.slice(k).map(decodeURIComponent).join("/");break}if(g===void 0){p=!0;break}let $=Qn.exec(f);if($&&!o){const y=decodeURIComponent(g);_[$[1]]=y}else if(f!==g){p=!0;break}}if(!p){l={route:u,params:_,uri:"/"+i.slice(0,k).join("/")};break}}return l||n||null}function tr(t,e){return Xn([t],e)}function yt(t,e){return t+(e?`?${e}`:"")}function nr(t,e){if(Pt(t,"/"))return t;const[l,n]=t.split("?"),[r]=e.split("?"),i=Ge(l),o=Ge(r);if(i[0]==="")return yt(r,n);if(!Pt(i[0],".")){const a=o.concat(i).join("/");return yt((r==="/"?"":"/")+a,n)}const s=o.concat(i),c=[];return s.forEach(a=>{a===".."?c.pop():a!=="."&&c.push(a)}),yt("/"+c.join("/"),n)}function An(t,e){return`${vt(e==="/"?t:`${vt(t)}/${vt(e)}`)}/`}function lr(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rr(t){let e;const l=t[9].default,n=Et(l,t,t[8],null);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),e=!0},p(r,[i]){n&&n.p&&(!e||i&256)&&Bt(n,l,r,r[8],e?Tt(l,r[8],i,null):Nt(r[8]),null)},i(r){e||(w(n,r),e=!0)},o(r){C(n,r),e=!1},d(r){n&&n.d(r)}}}function ir(t,e,l){let n,r,i,{$$slots:o={},$$scope:s}=e,{basepath:c="/"}=e,{url:a=null}=e;const u=be(pt),p=be(dt),h=H([]);ue(t,h,S=>l(6,r=S));const _=H(null);let d=!1;const k=u||H(a?{pathname:a}:Ot.location);ue(t,k,S=>l(5,n=S));const f=p?p.routerBase:H({path:c,uri:c});ue(t,f,S=>l(7,i=S));const g=$l([f,_],([S,T])=>{if(T===null)return S;const{path:x}=S,{route:E,uri:z}=T;return{path:E.default?x:E.path.replace(/\*.*$/,""),uri:z}});function $(S){const{path:T}=i;let{path:x}=S;if(S._path=x,S.path=An(T,x),typeof window=="undefined"){if(d)return;const E=tr(S,n.pathname);E&&(_.set(E),d=!0)}else h.update(E=>(E.push(S),E))}function y(S){h.update(T=>{const x=T.indexOf(S);return T.splice(x,1),T})}return u||(mt(()=>Ot.listen(T=>{k.set(T.location)})),kt(pt,k)),kt(dt,{activeRoute:_,base:f,routerBase:g,registerRoute:$,unregisterRoute:y}),t.$$set=S=>{"basepath"in S&&l(3,c=S.basepath),"url"in S&&l(4,a=S.url),"$$scope"in S&&l(8,s=S.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128){const{path:S}=i;h.update(T=>(T.forEach(x=>x.path=An(S,x._path)),T))}if(t.$$.dirty&96){const S=Xn(r,n.pathname);_.set(S)}},[h,k,f,c,a,n,r,i,s,o]}class or extends Z{constructor(e){super(),Q(this,e,ir,rr,V,{basepath:3,url:4})}}const sr=t=>({params:t&4,location:t&16}),En=t=>({params:t[2],location:t[4]});function Tn(t){let e,l,n,r;const i=[cr,ar],o=[];function s(c,a){return c[0]!==null?0:1}return e=s(t),l=o[e]=i[e](t),{c(){l.c(),n=ge()},m(c,a){o[e].m(c,a),A(c,n,a),r=!0},p(c,a){let u=e;e=s(c),e===u?o[e].p(c,a):(q(),C(o[u],1,1,()=>{o[u]=null}),G(),l=o[e],l?l.p(c,a):(l=o[e]=i[e](c),l.c()),w(l,1),l.m(n.parentNode,n))},i(c){r||(w(l),r=!0)},o(c){C(l),r=!1},d(c){o[e].d(c),c&&P(n)}}}function ar(t){let e;const l=t[10].default,n=Et(l,t,t[9],En);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),e=!0},p(r,i){n&&n.p&&(!e||i&532)&&Bt(n,l,r,r[9],e?Tt(l,r[9],i,sr):Nt(r[9]),En)},i(r){e||(w(n,r),e=!0)},o(r){C(n,r),e=!1},d(r){n&&n.d(r)}}}function cr(t){let e,l,n;const r=[{location:t[4]},t[2],t[3]];var i=t[0];function o(s){let c={};for(let a=0;a<r.length;a+=1)c=pe(c,r[a]);return{props:c}}return i&&(e=new i(o())),{c(){e&&I(e.$$.fragment),l=ge()},m(s,c){e&&j(e,s,c),A(s,l,c),n=!0},p(s,c){const a=c&28?Lt(r,[c&16&&{location:s[4]},c&4&&mn(s[2]),c&8&&mn(s[3])]):{};if(i!==(i=s[0])){if(e){q();const u=e;C(u.$$.fragment,1,0,()=>{M(u,1)}),G()}i?(e=new i(o()),I(e.$$.fragment),w(e.$$.fragment,1),j(e,l.parentNode,l)):e=null}else i&&e.$set(a)},i(s){n||(e&&w(e.$$.fragment,s),n=!0)},o(s){e&&C(e.$$.fragment,s),n=!1},d(s){s&&P(l),e&&M(e,s)}}}function ur(t){let e,l,n=t[1]!==null&&t[1].route===t[7]&&Tn(t);return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[1]!==null&&r[1].route===r[7]?n?(n.p(r,i),i&2&&w(n,1)):(n=Tn(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(q(),C(n,1,1,()=>{n=null}),G())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}function fr(t,e,l){let n,r,{$$slots:i={},$$scope:o}=e,{path:s=""}=e,{component:c=null}=e;const{registerRoute:a,unregisterRoute:u,activeRoute:p}=be(dt);ue(t,p,f=>l(1,n=f));const h=be(pt);ue(t,h,f=>l(4,r=f));const _={path:s,default:s===""};let d={},k={};return a(_),typeof window!="undefined"&&Ye(()=>{u(_)}),t.$$set=f=>{l(13,e=pe(pe({},e),xt(f))),"path"in f&&l(8,s=f.path),"component"in f&&l(0,c=f.component),"$$scope"in f&&l(9,o=f.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&n&&n.route===_&&l(2,d=n.params);{const{path:f,component:g,...$}=e;l(3,k=$)}},e=xt(e),[c,n,d,k,r,p,h,_,s,o,i]}class wt extends Z{constructor(e){super(),Q(this,e,fr,ur,V,{path:8,component:0})}}function pr(t){let e,l,n,r;const i=t[16].default,o=Et(i,t,t[15],null);let s=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],c={};for(let a=0;a<s.length;a+=1)c=pe(c,s[a]);return{c(){e=v("a"),o&&o.c(),st(e,c)},m(a,u){A(a,e,u),o&&o.m(e,null),l=!0,n||(r=W(e,"click",t[5]),n=!0)},p(a,[u]){o&&o.p&&(!l||u&32768)&&Bt(o,i,a,a[15],l?Tt(i,a[15],u,null):Nt(a[15]),null),st(e,c=Lt(s,[(!l||u&1)&&{href:a[0]},(!l||u&4)&&{"aria-current":a[2]},u&2&&a[1],u&64&&a[6]]))},i(a){l||(w(o,a),l=!0)},o(a){C(o,a),l=!1},d(a){a&&P(e),o&&o.d(a),n=!1,r()}}}function dr(t,e,l){let n;const r=["to","replace","state","getProps"];let i=pn(e,r),o,s,{$$slots:c={},$$scope:a}=e,{to:u="#"}=e,{replace:p=!1}=e,{state:h={}}=e,{getProps:_=()=>({})}=e;const{base:d}=be(dt);ue(t,d,x=>l(14,s=x));const k=be(pt);ue(t,k,x=>l(13,o=x));const f=pl();let g,$,y,S;function T(x){if(f("click",x),lr(x)){x.preventDefault();const E=o.pathname===g||p;Gl(g,{state:h,replace:E})}}return t.$$set=x=>{e=pe(pe({},e),xt(x)),l(6,i=pn(e,r)),"to"in x&&l(7,u=x.to),"replace"in x&&l(8,p=x.replace),"state"in x&&l(9,h=x.state),"getProps"in x&&l(10,_=x.getProps),"$$scope"in x&&l(15,a=x.$$scope)},t.$$.update=()=>{t.$$.dirty&16512&&l(0,g=u==="/"?s.uri:nr(u,s.uri)),t.$$.dirty&8193&&l(11,$=Pt(o.pathname,g)),t.$$.dirty&8193&&l(12,y=g===o.pathname),t.$$.dirty&4096&&l(2,n=y?"page":void 0),t.$$.dirty&15361&&l(1,S=_({location:o,href:g,isPartiallyCurrent:$,isCurrent:y}))},[g,S,n,d,k,T,i,u,p,h,_,$,y,o,s,a,c]}class gr extends Z{constructor(e){super(),Q(this,e,dr,pr,V,{to:7,replace:8,state:9,getProps:10})}}function Bn(t){let e,l,n;return{c(){e=v("div"),e.innerHTML=`<div class="spinner-wrapp d-flex center svelte-upyxi7"></div> 
    <svg class="spinner svelte-upyxi7" width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.4625 20.5C40.3116 20.5 41.006 21.1893 40.9424 22.0361C40.6784 25.5496 39.5122 28.9452 37.5451 31.8892C35.2926 35.2604 32.0909 37.8879 28.345 39.4395C24.5991 40.9911 20.4773 41.3971 16.5006 40.6061C12.524 39.8151 8.87129 37.8627 6.00431 34.9957C3.13733 32.1287 1.1849 28.476 0.393902 24.4994C-0.397095 20.5227 0.00887314 16.4009 1.56047 12.655C3.11207 8.9091 5.7396 5.70744 9.11081 3.45487C12.0548 1.48777 15.4504 0.321606 18.9639 0.0576201C19.8107 -0.00600024 20.5 0.688362 20.5 1.5375C20.5 2.38664 19.8103 3.06795 18.9644 3.14278C16.0599 3.39972 13.2573 4.38254 10.8192 6.01164C7.95366 7.92632 5.72026 10.6477 4.4014 13.8317C3.08254 17.0157 2.73747 20.5193 3.40982 23.8994C4.08216 27.2796 5.74173 30.3844 8.17866 32.8213C10.6156 35.2583 13.7204 36.9178 17.1006 37.5902C20.4807 38.2625 23.9843 37.9175 27.1683 36.5986C30.3523 35.2797 33.0737 33.0463 34.9884 30.1808C36.6175 27.7427 37.6003 24.9401 37.8572 22.0356C37.932 21.1897 38.6134 20.5 39.4625 20.5Z" fill="#6B7278" class="svelte-upyxi7"></path></svg>`,b(e,"class","spinner-bg d-flex center svelte-upyxi7")},m(r,i){A(r,e,i),n=!0},i(r){n||(X(()=>{l||(l=de(e,fe,{},!0)),l.run(1)}),n=!0)},o(r){l||(l=de(e,fe,{},!1)),l.run(0),n=!1},d(r){r&&P(e),r&&l&&l.end()}}}function mr(t){let e,l,n=t[0]&&Bn();return{c(){n&&n.c(),e=ge()},m(r,i){n&&n.m(r,i),A(r,e,i),l=!0},p(r,[i]){r[0]?n?i&1&&w(n,1):(n=Bn(),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(q(),C(n,1,1,()=>{n=null}),G())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&P(e)}}}function hr(t,e,l){let n=!1;const r=Re.subscribe(i=>{l(0,n=i)});return Ye(()=>{r()}),[n]}class _r extends Z{constructor(e){super(),Q(this,e,hr,mr,V,{})}}var it=(t=>(t.users="/api/users",t.rooms="/api/rooms",t.createRoom="/api/room",t))(it||{});function br(t){let e;return{c(){e=L("Play")},m(l,n){A(l,e,n)},d(l){l&&P(e)}}}function vr(t){let e,l,n,r=t[0].id+"",i,o,s,c;return s=new gr({props:{to:"./game/"+t[0].id,class:"btn medium h-100 mr-4",$$slots:{default:[br]},$$scope:{ctx:t}}}),{c(){e=v("div"),l=v("div"),n=v("span"),i=L(r),o=R(),I(s.$$.fragment),b(n,"class","headline"),b(l,"class","room-info pl-4 d-flex space-between y-center svelte-17jgl3g"),b(e,"class","room d-flex svelte-17jgl3g")},m(a,u){A(a,e,u),m(e,l),m(l,n),m(n,i),m(l,o),j(s,l,null),c=!0},p(a,[u]){(!c||u&1)&&r!==(r=a[0].id+"")&&Ke(i,r);const p={};u&1&&(p.to="./game/"+a[0].id),u&2&&(p.$$scope={dirty:u,ctx:a}),s.$set(p)},i(a){c||(w(s.$$.fragment,a),c=!0)},o(a){C(s.$$.fragment,a),c=!1},d(a){a&&P(e),M(s)}}}function yr(t,e,l){let{room:n}=e;return t.$$set=r=>{"room"in r&&l(0,n=r.room)},[n]}class wr extends Z{constructor(e){super(),Q(this,e,yr,vr,V,{room:0})}}function Nn(t,e,l){const n=t.slice();return n[6]=e[l],n}function xr(t){let e;return{c(){e=v("div"),e.innerHTML='<div class="text my-5 svelte-jw8n2v">No rooms</div>',b(e,"class","wrapp py-5 text-center svelte-jw8n2v")},m(l,n){A(l,e,n)},p:D,i:D,o:D,d(l){l&&P(e)}}}function kr(t){let e,l,n=t[0],r=[];for(let o=0;o<n.length;o+=1)r[o]=jn(Nn(t,n,o));const i=o=>C(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=ge()},m(o,s){for(let c=0;c<r.length;c+=1)r[c].m(o,s);A(o,e,s),l=!0},p(o,s){if(s&1){n=o[0];let c;for(c=0;c<n.length;c+=1){const a=Nn(o,n,c);r[c]?(r[c].p(a,s),w(r[c],1)):(r[c]=jn(a),r[c].c(),w(r[c],1),r[c].m(e.parentNode,e))}for(q(),c=n.length;c<r.length;c+=1)i(c);G()}},i(o){if(!l){for(let s=0;s<n.length;s+=1)w(r[s]);l=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)C(r[s]);l=!1},d(o){He(r,o),o&&P(e)}}}function jn(t){let e,l;return e=new wr({props:{room:t[6]}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.room=n[6]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function $r(t){let e,l,n,r,i,o,s,c,a,u,p,h;const _=[kr,xr],d=[];function k(f,g){return f[1]?0:1}return r=k(t),i=d[r]=_[r](t),{c(){e=v("h3"),e.textContent="Rooms:",l=R(),n=v("div"),i.c(),o=R(),s=v("div"),c=v("button"),a=L("Create room"),b(e,"class","px-2 title text-left"),b(c,"class","btn large outlined"),c.disabled=t[2],b(s,"class","text-center my-5"),b(n,"class","rooms-list mt-2")},m(f,g){A(f,e,g),A(f,l,g),A(f,n,g),d[r].m(n,null),m(n,o),m(n,s),m(s,c),m(c,a),u=!0,p||(h=W(c,"click",t[3]),p=!0)},p(f,[g]){let $=r;r=k(f),r===$?d[r].p(f,g):(q(),C(d[$],1,1,()=>{d[$]=null}),G(),i=d[r],i?i.p(f,g):(i=d[r]=_[r](f),i.c()),w(i,1),i.m(n,o)),(!u||g&4)&&(c.disabled=f[2])},i(f){u||(w(i),u=!0)},o(f){C(i),u=!1},d(f){f&&P(e),f&&P(l),f&&P(n),d[r].d(),p=!1,h()}}}function Cr(t,e,l){let n,r;ue(t,Re,a=>l(4,r=a));let i=[],o=!1;const s=async()=>{console.log("here",Se+it.rooms);const u=await(await fetch(Se+it.rooms)).json();console.log("here"),l(0,i=u),l(1,o=i.length>0)};mt(async()=>{await s()});const c=async()=>{Re.set(!0);try{const a=await fetch(Se+it.createRoom,{method:"POST"}).then(u=>u.json());console.log(a),a&&await s(),Re.set(!1)}catch{qe.set("Something went wrong")}};return t.$$.update=()=>{t.$$.dirty&17&&l(2,n=i.length===0&&r)},[i,o,n,c,r]}class Sr extends Z{constructor(e){super(),Q(this,e,Cr,$r,V,{})}}function Mn(t,e,l){const n=t.slice();return n[22]=e[l],n}function In(t,e,l){const n=t.slice();return n[22]=e[l],n}function Dn(t){let e,l,n=t[22].style+"",r,i,o,s;function c(){return t[10](t[22])}return{c(){e=v("button"),l=L("Test "),r=L(n),b(e,"class",i="btn "+t[22].class+" svelte-94ousw")},m(a,u){A(a,e,u),m(e,l),m(e,r),o||(s=W(e,"click",c),o=!0)},p(a,u){t=a},d(a){a&&P(e),o=!1,s()}}}function zn(t){let e,l,n=t[22].type+"",r,i,o,s,c;function a(){return t[11](t[22])}return{c(){var u;e=v("button"),l=L("Test "),r=L(n),b(e,"class",i="btn "+((u=t[22].class)!=null?u:"")+" svelte-94ousw"),e.disabled=o=window.Telegram.WebApp.version<6.1},m(u,p){A(u,e,p),m(e,l),m(e,r),s||(c=W(e,"click",a),s=!0)},p(u,p){t=u},d(u){u&&P(e),s=!1,c()}}}function Rr(t){var un;let e,l,n,r,i,o,s,c,a,u,p,h,_,d,k,f,g,$,y,S,T,x=((un=t[0])!=null?un:"Not set")+"",E,z,F,Pe,Wt,ve,Ht,Ut,K,Qe,qt,Ze,Gt,N,Ae,Vt,le,Kt,Ee,Jt,ie,Yt,Te,Qt,oe,Zt,Be,Xt,se,en,Ne,tn,ae,nn,je,ln,Xe,rn,ye,me,on,he,sn,we,et,an,Me,ht,cn,xe=t[7],J=[];for(let O=0;O<xe.length;O+=1)J[O]=Dn(In(t,xe,O));let ke=t[8],Y=[];for(let O=0;O<ke.length;O+=1)Y[O]=zn(Mn(t,ke,O));return{c(){e=v("div"),l=v("div"),l.textContent=`Version ${window.Telegram.WebApp.version}`,n=R(),r=v("div"),i=v("div"),i.textContent="Haptics",o=R(),s=v("div");for(let O=0;O<J.length;O+=1)J[O].c();c=R(),a=v("div"),u=v("div"),u.textContent="Notifications",p=R(),h=v("div");for(let O=0;O<Y.length;O+=1)Y[O].c();_=R(),d=v("div"),k=v("div"),k.textContent="Colors",f=R(),g=v("input"),$=R(),y=v("span"),S=L("Value: "),T=v("code"),E=L(x),z=R(),F=v("div"),Pe=v("button"),Pe.textContent="Set header",Wt=R(),ve=v("button"),Ht=L("Set background"),Ut=R(),K=v("div"),Qe=v("div"),Qe.textContent="Buttons",qt=R(),Ze=v("div"),Ze.textContent="Main button:",Gt=R(),N=v("div"),Ae=v("label"),Ae.textContent="Button text",Vt=R(),le=v("input"),Kt=R(),Ee=v("label"),Ee.textContent="Button text color",Jt=R(),ie=v("input"),Yt=R(),Te=v("label"),Te.textContent="Button bg color",Qt=R(),oe=v("input"),Zt=R(),Be=v("label"),Be.textContent="Active",Xt=R(),se=v("input"),en=R(),Ne=v("label"),Ne.textContent="Visible",tn=R(),ae=v("input"),nn=R(),je=v("button"),je.textContent="Apply",ln=R(),Xe=v("div"),Xe.textContent="Back button:",rn=R(),ye=v("div"),me=v("button"),me.textContent="Show",on=R(),he=v("button"),he.textContent="Hide",sn=R(),we=v("div"),et=v("div"),et.textContent="Telegram data",an=R(),Me=v("pre"),Me.textContent=`      ${JSON.stringify(window.Telegram,null,5)}
    `,b(l,"class","p5 text-center"),b(i,"class","title-2"),b(s,"class","buttons mt-5 svelte-94ousw"),b(r,"class","wrapp py-5 svelte-94ousw"),b(u,"class","title-2"),b(h,"class","buttons mt-5 svelte-94ousw"),b(a,"class","wrapp py-5 svelte-94ousw"),b(k,"class","title-2"),b(g,"type","color"),b(g,"class","w-100 mt-5 mb-2"),b(Pe,"class","btn outline"),b(ve,"class","btn outline"),ve.disabled=window.Telegram.WebApp.version<6.1,b(F,"class","buttons mt-5 svelte-94ousw"),b(d,"class","wrapp py-5 svelte-94ousw"),b(Qe,"class","title-2"),b(Ze,"class","title"),b(Ae,"for","mainbutton-text"),b(Ae,"class","center svelte-94ousw"),b(le,"type","text"),b(le,"id","mainbutton-text"),b(le,"class","p-4"),b(Ee,"for","mainbutton-text-color"),b(Ee,"class","center svelte-94ousw"),b(ie,"type","color"),b(ie,"id","mainbutton-text-color"),b(ie,"class","w-100 h-100"),b(Te,"for","mainbutton-bg-color"),b(Te,"class","center svelte-94ousw"),b(oe,"type","color"),b(oe,"id","mainbutton-bg-color"),b(oe,"class","w-100 h-100"),b(Be,"for","mainbutton-active"),b(Be,"class","center svelte-94ousw"),b(se,"type","checkbox"),b(se,"id","mainbutton-active"),b(se,"class","w-100 h-100"),b(Ne,"for","mainbutton-visible"),b(Ne,"class","center svelte-94ousw"),b(ae,"type","checkbox"),b(ae,"id","mainbutton-visible"),b(ae,"class","w-100 h-100"),b(N,"class","buttons mt-5 svelte-94ousw"),b(je,"class","btn outline large w-100 my-5"),b(Xe,"class","title"),b(me,"class","btn"),te(me,"outline",t[6]),b(he,"class","btn"),te(he,"outline",!t[6]),b(ye,"class","buttons mt-5 svelte-94ousw"),b(K,"class","wrapp py-5 svelte-94ousw"),b(et,"class","title-2"),b(Me,"class","p-3"),al(Me,"overflow","auto"),b(we,"class","wrapp py-5 svelte-94ousw"),b(e,"class","my-5 px-3")},m(O,U){A(O,e,U),m(e,l),m(e,n),m(e,r),m(r,i),m(r,o),m(r,s);for(let ee=0;ee<J.length;ee+=1)J[ee].m(s,null);m(e,c),m(e,a),m(a,u),m(a,p),m(a,h);for(let ee=0;ee<Y.length;ee+=1)Y[ee].m(h,null);m(e,_),m(e,d),m(d,k),m(d,f),m(d,g),ce(g,t[0]),m(d,$),m(d,y),m(y,S),m(y,T),m(T,E),m(d,z),m(d,F),m(F,Pe),m(F,Wt),m(F,ve),m(ve,Ht),m(e,Ut),m(e,K),m(K,Qe),m(K,qt),m(K,Ze),m(K,Gt),m(K,N),m(N,Ae),m(N,Vt),m(N,le),ce(le,t[1]),m(N,Kt),m(N,Ee),m(N,Jt),m(N,ie),ce(ie,t[2]),m(N,Yt),m(N,Te),m(N,Qt),m(N,oe),ce(oe,t[3]),m(N,Zt),m(N,Be),m(N,Xt),m(N,se),se.checked=t[4],m(N,en),m(N,Ne),m(N,tn),m(N,ae),ae.checked=t[5],m(K,nn),m(K,je),m(K,ln),m(K,Xe),m(K,rn),m(K,ye),m(ye,me),m(ye,on),m(ye,he),m(e,sn),m(e,we),m(we,et),m(we,an),m(we,Me),ht||(cn=[W(g,"input",t[12]),W(Pe,"click",t[13]),W(ve,"click",t[14]),W(le,"input",t[15]),W(ie,"input",t[16]),W(oe,"input",t[17]),W(se,"change",t[18]),W(ae,"change",t[19]),W(je,"click",t[9]),W(me,"click",t[20]),W(he,"click",t[21])],ht=!0)},p(O,[U]){var ee;if(U&128){xe=O[7];let B;for(B=0;B<xe.length;B+=1){const Ie=In(O,xe,B);J[B]?J[B].p(Ie,U):(J[B]=Dn(Ie),J[B].c(),J[B].m(s,null))}for(;B<J.length;B+=1)J[B].d(1);J.length=xe.length}if(U&256){ke=O[8];let B;for(B=0;B<ke.length;B+=1){const Ie=Mn(O,ke,B);Y[B]?Y[B].p(Ie,U):(Y[B]=zn(Ie),Y[B].c(),Y[B].m(h,null))}for(;B<Y.length;B+=1)Y[B].d(1);Y.length=ke.length}U&1&&ce(g,O[0]),U&1&&x!==(x=((ee=O[0])!=null?ee:"Not set")+"")&&Ke(E,x),U&2&&le.value!==O[1]&&ce(le,O[1]),U&4&&ce(ie,O[2]),U&8&&ce(oe,O[3]),U&16&&(se.checked=O[4]),U&32&&(ae.checked=O[5]),U&64&&te(me,"outline",O[6]),U&64&&te(he,"outline",!O[6])},i:D,o:D,d(O){O&&P(e),He(J,O),He(Y,O),ht=!1,re(cn)}}}function Or(t,e,l){let n;const r=[{style:"light",class:"medium outline"},{style:"medium",class:"medium"},{style:"heavy",class:"medium"},{style:"rigid",class:"medium"},{style:"soft",class:"medium outline"}],i=[{type:"success",class:""},{type:"warning"},{type:"error"}];let o,s,c,a,u,p;const h=()=>{window.Telegram.WebApp.MainButton.setParams({text:s,color:a,text_color:c,is_active:u,is_visible:p})},_=F=>window.Telegram.WebApp.HapticFeedback.impactOccurred(F.style),d=F=>window.Telegram.WebApp.HapticFeedback.notificationOccurred(F.type);function k(){o=this.value,l(0,o)}const f=()=>window.Telegram.WebApp.setHeaderColor(o),g=()=>window.Telegram.WebApp.setBackgroundColor(o);function $(){s=this.value,l(1,s)}function y(){c=this.value,l(2,c)}function S(){a=this.value,l(3,a)}function T(){u=this.checked,l(4,u)}function x(){p=this.checked,l(5,p)}const E=()=>window.Telegram.WebApp.BackButton.show(),z=()=>window.Telegram.WebApp.BackButton.hide();return l(6,n=window.Telegram.WebApp.BackButton.isVisible),[o,s,c,a,u,p,n,r,i,h,_,d,k,f,g,$,y,S,T,x,E,z]}class Pr extends Z{constructor(e){super(),Q(this,e,Or,Rr,V,{})}}function Ar(t){let e,l;return e=new Wl({props:{roomId:t[0].id}}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.roomId=n[0].id),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Er(t){let e,l;return e=new Pr({}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Tr(t){let e,l;return e=new Sr({}),{c(){I(e.$$.fragment)},m(n,r){j(e,n,r),l=!0},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function Br(t){let e,l,n,r,i,o;return e=new wt({props:{path:"/game/:id",$$slots:{default:[Ar,({params:s})=>({0:s}),({params:s})=>s?1:0]},$$scope:{ctx:t}}}),n=new wt({props:{path:"/tg-test",$$slots:{default:[Er]},$$scope:{ctx:t}}}),i=new wt({props:{path:"/",$$slots:{default:[Tr]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment),l=R(),I(n.$$.fragment),r=R(),I(i.$$.fragment)},m(s,c){j(e,s,c),A(s,l,c),j(n,s,c),A(s,r,c),j(i,s,c),o=!0},p(s,c){const a={};c&3&&(a.$$scope={dirty:c,ctx:s}),e.$set(a);const u={};c&2&&(u.$$scope={dirty:c,ctx:s}),n.$set(u);const p={};c&2&&(p.$$scope={dirty:c,ctx:s}),i.$set(p)},i(s){o||(w(e.$$.fragment,s),w(n.$$.fragment,s),w(i.$$.fragment,s),o=!0)},o(s){C(e.$$.fragment,s),C(n.$$.fragment,s),C(i.$$.fragment,s),o=!1},d(s){M(e,s),s&&P(l),M(n,s),s&&P(r),M(i,s)}}}function Nr(t){let e,l,n,r,i;return e=new _r({}),r=new or({props:{basepath:yl,$$slots:{default:[Br]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment),l=R(),n=v("main"),I(r.$$.fragment),b(n,"class","main svelte-4h074o")},m(o,s){j(e,o,s),A(o,l,s),A(o,n,s),j(r,n,null),i=!0},p(o,[s]){const c={};s&2&&(c.$$scope={dirty:s,ctx:o}),r.$set(c)},i(o){i||(w(e.$$.fragment,o),w(r.$$.fragment,o),i=!0)},o(o){C(e.$$.fragment,o),C(r.$$.fragment,o),i=!1},d(o){M(e,o),o&&P(l),o&&P(n),M(r)}}}function jr(t){var e,l;return kt("user",(l=(e=window.Telegram.WebApp.initDataUnsafe)==null?void 0:e.user)!=null?l:{username:prompt("username","serg"),id:Date.now(),first_name:"Serg",last_name:"",language_code:"en"}),[]}class Mr extends Z{constructor(e){super(),Q(this,e,jr,Nr,V,{})}}new Mr({target:document.getElementById("app")});

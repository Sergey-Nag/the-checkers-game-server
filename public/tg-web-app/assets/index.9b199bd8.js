var dl=Object.defineProperty;var gl=(t,e,l)=>e in t?dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var st=(t,e,l)=>(gl(t,typeof e!="symbol"?e+"":e,l),l);const ml=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function l(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=l(r);fetch(r.href,i)}};ml();function W(){}const kt=t=>t;function he(t,e){for(const l in e)t[l]=e[l];return t}function Xn(t){return t()}function Cn(){return Object.create(null)}function ce(t){t.forEach(Xn)}function Me(t){return typeof t=="function"}function H(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function hl(t){return Object.keys(t).length===0}function Ft(t,...e){if(t==null)return W;const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function _l(t){let e;return Ft(t,l=>e=l)(),e}function me(t,e,l){t.$$.on_destroy.push(Ft(e,l))}function Wt(t,e,l,n){if(t){const r=el(t,e,l,n);return t[0](r)}}function el(t,e,l,n){return t[1]&&n?he(l.ctx.slice(),t[1](n(e))):l.ctx}function Ht(t,e,l,n){if(t[2]&&n){const r=t[2](n(l));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],s=Math.max(e.dirty.length,r.length);for(let o=0;o<s;o+=1)i[o]=e.dirty[o]|r[o];return i}return e.dirty|r}return e.dirty}function Ut(t,e,l,n,r,i){if(r){const s=el(e,l,n,i);t.p(s,r)}}function Gt(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function zt(t){const e={};for(const l in t)l[0]!=="$"&&(e[l]=t[l]);return e}function $n(t,e){const l={};e=new Set(e);for(const n in t)!e.has(n)&&n[0]!=="$"&&(l[n]=t[n]);return l}function ft(t){return t==null?"":t}const tl=typeof window!="undefined";let qt=tl?()=>window.performance.now():()=>Date.now(),Kt=tl?t=>requestAnimationFrame(t):W;const Ae=new Set;function nl(t){Ae.forEach(e=>{e.c(t)||(Ae.delete(e),e.f())}),Ae.size!==0&&Kt(nl)}function Vt(t){let e;return Ae.size===0&&Kt(nl),{promise:new Promise(l=>{Ae.add(e={c:t,f:l})}),abort(){Ae.delete(e)}}}function d(t,e){t.appendChild(e)}function ll(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function bl(t){const e=v("style");return vl(ll(t),e),e.sheet}function vl(t,e){d(t.head||t,e)}function P(t,e,l){t.insertBefore(e,l||null)}function T(t){t.parentNode.removeChild(t)}function pt(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function v(t){return document.createElement(t)}function M(t){return document.createTextNode(t)}function $(){return M(" ")}function be(){return M("")}function G(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function _(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function dt(t,e){const l=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:l[n]&&l[n].set?t[n]=e[n]:_(t,n,e[n])}function yl(t){return Array.from(t.childNodes)}function ne(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ge(t,e){t.value=e==null?"":e}function Mt(t,e,l,n){l===null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function F(t,e,l){t.classList[l?"add":"remove"](e)}function rl(t,e,{bubbles:l=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,l,n,e),r}const gt=new Map;let mt=0;function wl(t){let e=5381,l=t.length;for(;l--;)e=(e<<5)-e^t.charCodeAt(l);return e>>>0}function kl(t,e){const l={stylesheet:bl(e),rules:{}};return gt.set(t,l),l}function ht(t,e,l,n,r,i,s,o=0){const a=16.666/n;let c=`{
`;for(let h=0;h<=1;h+=a){const y=e+(l-e)*i(h);c+=h*100+`%{${s(y,1-y)}}
`}const u=c+`100% {${s(l,1-l)}}
}`,g=`__svelte_${wl(u)}_${o}`,m=ll(t),{stylesheet:p,rules:b}=gt.get(m)||kl(m,t);b[g]||(b[g]=!0,p.insertRule(`@keyframes ${g} ${u}`,p.cssRules.length));const f=t.style.animation||"";return t.style.animation=`${f?`${f}, `:""}${g} ${n}ms linear ${r}ms 1 both`,mt+=1,g}function _t(t,e){const l=(t.style.animation||"").split(", "),n=l.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=l.length-n.length;r&&(t.style.animation=n.join(", "),mt-=r,mt||xl())}function xl(){Kt(()=>{mt||(gt.forEach(t=>{const{stylesheet:e}=t;let l=e.cssRules.length;for(;l--;)e.deleteRule(l);t.rules={}}),gt.clear())})}let Ve;function qe(t){Ve=t}function Ze(){if(!Ve)throw new Error("Function called outside component initialization");return Ve}function xt(t){Ze().$$.on_mount.push(t)}function Xe(t){Ze().$$.on_destroy.push(t)}function Cl(){const t=Ze();return(e,l,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=rl(e,l,{cancelable:n});return r.slice().forEach(s=>{s.call(t,i)}),!i.defaultPrevented}return!0}}function Nt(t,e){return Ze().$$.context.set(t,e),e}function Ce(t){return Ze().$$.context.get(t)}function $l(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Ue=[],Rn=[],at=[],Sn=[],Rl=Promise.resolve();let jt=!1;function Sl(){jt||(jt=!0,Rl.then(il))}function Q(t){at.push(t)}const St=new Set;let ot=0;function il(){const t=Ve;do{for(;ot<Ue.length;){const e=Ue[ot];ot++,qe(e),Ol(e.$$)}for(qe(null),Ue.length=0,ot=0;Rn.length;)Rn.pop()();for(let e=0;e<at.length;e+=1){const l=at[e];St.has(l)||(St.add(l),l())}at.length=0}while(Ue.length);for(;Sn.length;)Sn.pop()();jt=!1,St.clear(),qe(t)}function Ol(t){if(t.fragment!==null){t.update(),ce(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}let He;function Jt(){return He||(He=Promise.resolve(),He.then(()=>{He=null})),He}function xe(t,e,l){t.dispatchEvent(rl(`${e?"intro":"outro"}${l}`))}const ct=new Set;let ie;function J(){ie={r:0,c:[],p:ie}}function Y(){ie.r||ce(ie.c),ie=ie.p}function w(t,e){t&&t.i&&(ct.delete(t),t.i(e))}function C(t,e,l,n){if(t&&t.o){if(ct.has(t))return;ct.add(t),ie.c.push(()=>{ct.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}}const Yt={duration:0};function bt(t,e,l){let n=e(t,l),r=!1,i,s,o=0;function a(){i&&_t(t,i)}function c(){const{delay:g=0,duration:m=300,easing:p=kt,tick:b=W,css:f}=n||Yt;f&&(i=ht(t,0,1,m,g,p,f,o++)),b(0,1);const h=qt()+g,y=h+m;s&&s.abort(),r=!0,Q(()=>xe(t,!0,"start")),s=Vt(R=>{if(r){if(R>=y)return b(1,0),xe(t,!0,"end"),a(),r=!1;if(R>=h){const A=p((R-h)/m);b(A,1-A)}}return r})}let u=!1;return{start(){u||(u=!0,_t(t),Me(n)?(n=n(),Jt().then(c)):c())},invalidate(){u=!1},end(){r&&(a(),r=!1)}}}function sl(t,e,l){let n=e(t,l),r=!0,i;const s=ie;s.r+=1;function o(){const{delay:a=0,duration:c=300,easing:u=kt,tick:g=W,css:m}=n||Yt;m&&(i=ht(t,1,0,c,a,u,m));const p=qt()+a,b=p+c;Q(()=>xe(t,!1,"start")),Vt(f=>{if(r){if(f>=b)return g(0,1),xe(t,!1,"end"),--s.r||ce(s.c),!1;if(f>=p){const h=u((f-p)/c);g(1-h,h)}}return r})}return Me(n)?Jt().then(()=>{n=n(),o()}):o(),{end(a){a&&n.tick&&n.tick(1,0),r&&(i&&_t(t,i),r=!1)}}}function se(t,e,l,n){let r=e(t,l),i=n?0:1,s=null,o=null,a=null;function c(){a&&_t(t,a)}function u(m,p){const b=m.b-i;return p*=Math.abs(b),{a:i,b:m.b,d:b,duration:p,start:m.start,end:m.start+p,group:m.group}}function g(m){const{delay:p=0,duration:b=300,easing:f=kt,tick:h=W,css:y}=r||Yt,R={start:qt()+p,b:m};m||(R.group=ie,ie.r+=1),s||o?o=R:(y&&(c(),a=ht(t,i,m,b,p,f,y)),m&&h(0,1),s=u(R,b),Q(()=>xe(t,m,"start")),Vt(A=>{if(o&&A>o.start&&(s=u(o,b),o=null,xe(t,s.b,"start"),y&&(c(),a=ht(t,i,s.b,s.duration,0,f,r.css))),s){if(A>=s.end)h(i=s.b,1-i),xe(t,s.b,"end"),o||(s.b?c():--s.group.r||ce(s.group.c)),s=null;else if(A>=s.start){const S=A-s.start;i=s.a+s.d*f(S/s.duration),h(i,1-i)}}return!!(s||o)}))}return{run(m){Me(r)?Jt().then(()=>{r=r(),g(m)}):g(m)},end(){c(),s=o=null}}}function Tl(t,e){C(t,1,1,()=>{e.delete(t.key)})}function Pl(t,e,l,n,r,i,s,o,a,c,u,g){let m=t.length,p=i.length,b=m;const f={};for(;b--;)f[t[b].key]=b;const h=[],y=new Map,R=new Map;for(b=p;b--;){const k=g(r,i,b),E=l(k);let z=s.get(E);z?n&&z.p(k,e):(z=c(E,k),z.c()),y.set(E,h[b]=z),E in f&&R.set(E,Math.abs(b-f[E]))}const A=new Set,S=new Set;function x(k){w(k,1),k.m(o,u),s.set(k.key,k),u=k.first,p--}for(;m&&p;){const k=h[p-1],E=t[m-1],z=k.key,B=E.key;k===E?(u=k.first,m--,p--):y.has(B)?!s.has(z)||A.has(z)?x(k):S.has(B)?m--:R.get(z)>R.get(B)?(S.add(z),x(k)):(A.add(B),m--):(a(E,s),m--)}for(;m--;){const k=t[m];y.has(k.key)||a(k,s)}for(;p;)x(h[p-1]);return h}function Qt(t,e){const l={},n={},r={$$scope:1};let i=t.length;for(;i--;){const s=t[i],o=e[i];if(o){for(const a in s)a in o||(n[a]=1);for(const a in o)r[a]||(l[a]=o[a],r[a]=1);t[i]=o}else for(const a in s)r[a]=1}for(const s in n)s in l||(l[s]=void 0);return l}function On(t){return typeof t=="object"&&t!==null?t:{}}function D(t){t&&t.c()}function N(t,e,l,n){const{fragment:r,on_mount:i,on_destroy:s,after_update:o}=t.$$;r&&r.m(e,l),n||Q(()=>{const a=i.map(Xn).filter(Me);s?s.push(...a):ce(a),t.$$.on_mount=[]}),o.forEach(Q)}function j(t,e){const l=t.$$;l.fragment!==null&&(ce(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function El(t,e){t.$$.dirty[0]===-1&&(Ue.push(t),Sl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(t,e,l,n,r,i,s,o=[-1]){const a=Ve;qe(t);const c=t.$$={fragment:null,ctx:null,props:i,update:W,not_equal:r,bound:Cn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Cn(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};s&&s(c.root);let u=!1;if(c.ctx=l?l(t,e.props||{},(g,m,...p)=>{const b=p.length?p[0]:m;return c.ctx&&r(c.ctx[g],c.ctx[g]=b)&&(!c.skip_bound&&c.bound[g]&&c.bound[g](b),u&&El(t,g)),m}):[],c.update(),u=!0,ce(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const g=yl(e.target);c.fragment&&c.fragment.l(g),g.forEach(T)}else c.fragment&&c.fragment.c();e.intro&&w(t.$$.fragment),N(t,e.target,e.anchor,e.customElement),il()}qe(a)}class K{$destroy(){j(this,1),this.$destroy=W}$on(e,l){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const r=n.indexOf(l);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!hl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Al=window.WEB_APP_BASE_URL,Je=window.WEB_APP_API_HOST,Tn=Je.startsWith("https"),zl=Je.replace(Tn?"https":"http",Tn?"wss":"ws");class Ml{constructor(e,l){st(this,"wss");st(this,"callbacks",{board:null,eat:null,error:null,participant:null,highlight:null,gameStatus:null,gameOver:null,moveTurn:null});st(this,"callbacksOnMessage",{board:e=>(this.callbacks.board=e,this.callbacksOnMessage),eat:e=>(this.callbacks.eat=e,this.callbacksOnMessage),error:e=>(this.callbacks.error=e,this.callbacksOnMessage),participant:e=>(this.callbacks.participant=e,this.callbacksOnMessage),highlight:e=>(this.callbacks.highlight=e,this.callbacksOnMessage),gameStatus:e=>(this.callbacks.gameStatus=e,this.callbacksOnMessage),gameOver:e=>(this.callbacks.gameOver=e,this.callbacksOnMessage),moveTurn:e=>(this.callbacks.moveTurn=e,this.callbacksOnMessage)});this.wss=new WebSocket(`${zl}?roomId=${e}&userName=${l}`)}onEvents(){return this.wss.onmessage=({data:e})=>{var r,i;const{type:l,message:n}=this.parsePayload(e);(i=(r=this.callbacks)[l])==null||i.call(r,n)},this.callbacksOnMessage}onConnect(e){return this.wss.onopen=e,this.onEvents()}onClose(e){this.wss.onclose=e}sendEvent(e,l){this.wss.send(this.getPayload(e,l))}end(){this.wss.close()}parsePayload(e){return JSON.parse(e)}getPayload(e,l){return JSON.stringify({type:e,message:l})}}const Ee=[];function Nl(t,e){return{subscribe:V(t,e).subscribe}}function V(t,e=W){let l;const n=new Set;function r(o){if(H(t,o)&&(t=o,l)){const a=!Ee.length;for(const c of n)c[1](),Ee.push(c,t);if(a){for(let c=0;c<Ee.length;c+=2)Ee[c][0](Ee[c+1]);Ee.length=0}}}function i(o){r(o(t))}function s(o,a=W){const c=[o,a];return n.add(c),n.size===1&&(l=e(r)||W),o(t),()=>{n.delete(c),n.size===0&&(l(),l=null)}}return{set:r,update:i,subscribe:s}}function jl(t,e,l){const n=!Array.isArray(t),r=n?[t]:t,i=e.length<2;return Nl(l,s=>{let o=!1;const a=[];let c=0,u=W;const g=()=>{if(c)return;u();const p=e(n?a[0]:a,s);i?s(p):u=Me(p)?p:W},m=r.map((p,b)=>Ft(p,f=>{a[b]=f,c&=~(1<<b),o&&g()},()=>{c|=1<<b}));return o=!0,g(),function(){ce(m),u()}})}const Ye=V(null);Ye.subscribe(t=>console.log("err",t));const Ke={error:V(null),eat:V(null),board:V([]),participantRole:V(null),participantIn:V(null),participantOut:V(null),highlight:V([]),gameOver:V(!1)},ol=V(null);var Bt=(t=>(t.Move="move",t.Highlight="highlight",t))(Bt||{});function al(t){const e=t-1;return e*e*e+1}function ae(t,{delay:e=0,duration:l=400,easing:n=kt}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:l,easing:n,css:i=>`opacity: ${i*r}`}}function _e(t,{delay:e=0,duration:l=400,easing:n=al,x:r=0,y:i=0,opacity:s=0}={}){const o=getComputedStyle(t),a=+o.opacity,c=o.transform==="none"?"":o.transform,u=a*(1-s);return{delay:e,duration:l,easing:n,css:(g,m)=>`
			transform: ${c} translate(${(1-g)*r}px, ${(1-g)*i}px);
			opacity: ${a-u*m}`}}function Bl(t,{delay:e=0,duration:l=400,easing:n=al,start:r=0,opacity:i=0}={}){const s=getComputedStyle(t),o=+s.opacity,a=s.transform==="none"?"":s.transform,c=1-r,u=o*(1-i);return{delay:e,duration:l,easing:n,css:(g,m)=>`
			transform: ${a} scale(${1-c*m});
			opacity: ${o-u*m}
		`}}function Il(t){let e,l,n,r,i;return{c(){e=v("div"),_(e,"class",l=ft(`figure ${t[0].color}`)+" svelte-16uu5s4"),F(e,"king",t[0].isKing)},m(s,o){P(s,e,o),i=!0},p(s,[o]){t=s,(!i||o&1&&l!==(l=ft(`figure ${t[0].color}`)+" svelte-16uu5s4"))&&_(e,"class",l),o&1&&F(e,"king",t[0].isKing)},i(s){i||(Q(()=>{r&&r.end(1),n=bt(e,t[2],{delay:t[1]}),n.start()}),i=!0)},o(s){n&&n.invalidate(),r=sl(e,t[3],{delay:t[1]}),i=!1},d(s){s&&T(e),s&&r&&r.end()}}}function Dl(t,e,l){let n,r,i,{figure:s}=e,{animDelay:o=0}=e,{isFirstRender:a=!0}=e;return t.$$set=c=>{"figure"in c&&l(0,s=c.figure),"animDelay"in c&&l(4,o=c.animDelay),"isFirstRender"in c&&l(5,a=c.isFirstRender)},t.$$.update=()=>{t.$$.dirty&32&&l(3,n=ae),t.$$.dirty&32&&l(2,r=a?Bl:ae),t.$$.dirty&48&&l(1,i=a?500+o:0)},[s,i,r,n,o,a]}class cl extends K{constructor(e){super(),q(this,e,Dl,Il,H,{figure:0,animDelay:4,isFirstRender:5})}}function Pn(t){let e,l;return e=new cl({props:{figure:t[0].figure,animDelay:t[1],isFirstRender:t[2]}}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.figure=n[0].figure),r&2&&(i.animDelay=n[1]),r&4&&(i.isFirstRender=n[2]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Ll(t){let e,l,n,r,i,s=t[0].figure&&Pn(t);return{c(){e=v("div"),s&&s.c(),_(e,"class",l=ft(`cell ${t[0].color} d-flex center`)+" svelte-1bprcl8"),F(e,"highlight",t[3]),F(e,"eat",t[4])},m(o,a){P(o,e,a),s&&s.m(e,null),n=!0,r||(i=G(e,"click",function(){Me(t[0].color==="black"&&t[5])&&(t[0].color==="black"&&t[5]).apply(this,arguments)}),r=!0)},p(o,[a]){t=o,t[0].figure?s?(s.p(t,a),a&1&&w(s,1)):(s=Pn(t),s.c(),w(s,1),s.m(e,null)):s&&(J(),C(s,1,1,()=>{s=null}),Y()),(!n||a&1&&l!==(l=ft(`cell ${t[0].color} d-flex center`)+" svelte-1bprcl8"))&&_(e,"class",l),a&9&&F(e,"highlight",t[3]),a&17&&F(e,"eat",t[4])},i(o){n||(w(s),n=!0)},o(o){C(s),n=!1},d(o){o&&T(e),s&&s.d(),r=!1,i()}}}function Fl(t,e,l){let{cell:n}=e,{animFigureDelay:r=0}=e,{isFirstRender:i}=e,{playerColor:s}=e,o=!1,a=!1;const c=p=>p.find(({id:b})=>b===n.id),u=Ke.highlight.subscribe(p=>{const b=c(p);if(!b){l(3,o=!1),l(4,a=!1);return}l(3,o=!0),l(4,a=b.canEat)}),g=(p,b)=>({[p]:{id:b.id}}),m=()=>{n.figure&&n.figure.color!==s||ol.update(p=>p?p.from.id===n.id?null:c(_l(Ke.highlight))?{...p,...g("to",n)}:n.figure?g("from",n):null:g("from",n))};return Xe(()=>{u()}),t.$$set=p=>{"cell"in p&&l(0,n=p.cell),"animFigureDelay"in p&&l(1,r=p.animFigureDelay),"isFirstRender"in p&&l(2,i=p.isFirstRender),"playerColor"in p&&l(6,s=p.playerColor)},[n,r,i,o,a,m,s]}class Wl extends K{constructor(e){super(),q(this,e,Fl,Ll,H,{cell:0,animFigureDelay:1,isFirstRender:2,playerColor:6})}}function En(t,e,l){const n=t.slice();return n[8]=e[l],n[10]=l,n}function An(t){let e,l=[],n=new Map,r,i,s=t[1];const o=a=>a[8].id;for(let a=0;a<s.length;a+=1){let c=En(t,s,a),u=o(c);n.set(u,l[a]=zn(u,c))}return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();_(e,"class","board svelte-my1oz1")},m(a,c){P(a,e,c);for(let u=0;u<l.length;u+=1)l[u].m(e,null);i=!0},p(a,c){c&7&&(s=a[1],J(),l=Pl(l,c,o,1,a,s,n,e,Tl,zn,null,En),Y())},i(a){if(!i){for(let c=0;c<s.length;c+=1)w(l[c]);Q(()=>{r||(r=se(e,_e,{y:-100,duration:500},!0)),r.run(1)}),i=!0}},o(a){for(let c=0;c<l.length;c+=1)C(l[c]);r||(r=se(e,_e,{y:-100,duration:500},!1)),r.run(0),i=!1},d(a){a&&T(e);for(let c=0;c<l.length;c+=1)l[c].d();a&&r&&r.end()}}}function zn(t,e){let l,n,r;return n=new Wl({props:{cell:e[8],animFigureDelay:e[10]*5,isFirstRender:e[2],playerColor:e[0]}}),n.$on("unselect",e[6]),{key:t,first:null,c(){l=be(),D(n.$$.fragment),this.first=l},m(i,s){P(i,l,s),N(n,i,s),r=!0},p(i,s){e=i;const o={};s&2&&(o.cell=e[8]),s&2&&(o.animFigureDelay=e[10]*5),s&4&&(o.isFirstRender=e[2]),s&1&&(o.playerColor=e[0]),n.$set(o)},i(i){r||(w(n.$$.fragment,i),r=!0)},o(i){C(n.$$.fragment,i),r=!1},d(i){i&&T(l),j(n,i)}}}function Hl(t){let e,l,n=t[3]&&An(t);return{c(){n&&n.c(),e=be()},m(r,i){n&&n.m(r,i),P(r,e,i),l=!0},p(r,[i]){r[3]?n?(n.p(r,i),i&8&&w(n,1)):(n=An(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(J(),C(n,1,1,()=>{n=null}),Y())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&T(e)}}}function Ul(t,e,l){let n,r,{cells:i=[]}=e,{highlightedCells:s=[]}=e,{playerColor:o}=e,a=!0;xt(()=>{setTimeout(()=>{l(2,a=!1)},100)});function c(u){$l.call(this,t,u)}return t.$$set=u=>{"cells"in u&&l(4,i=u.cells),"highlightedCells"in u&&l(5,s=u.highlightedCells),"playerColor"in u&&l(0,o=u.playerColor)},t.$$.update=()=>{t.$$.dirty&48&&l(1,n=i.map(u=>{const g=s.find(({id:m})=>m===u.id);return g&&(u={...u},u.isHighlight=!0,u.canEat=g.canEat),u})),t.$$.dirty&2&&l(3,r=n.length>0)},[o,n,a,r,i,s,c]}class Gl extends K{constructor(e){super(),q(this,e,Ul,Hl,H,{cells:4,highlightedCells:5,playerColor:0})}}function Mn(t){let e,l,n,r,i,s,o,a,c;return{c(){e=v("div"),l=v("div"),n=M("! "),r=M(t[0]),i=M(" !"),_(l,"class","msg svelte-1i1odkc"),_(e,"class","msg-wrapp svelte-1i1odkc")},m(u,g){P(u,e,g),d(e,l),d(l,n),d(l,r),d(l,i),c=!0},p(u,g){(!c||g&1)&&ne(r,u[0])},i(u){c||(s||Q(()=>{s=bt(l,ae,{duration:100,delay:100}),s.start()}),Q(()=>{a&&a.end(1),o=bt(e,ae,{duration:100}),o.start()}),c=!0)},o(u){o&&o.invalidate(),a=sl(e,ae,{duration:500}),c=!1},d(u){u&&T(e),u&&a&&a.end()}}}function ql(t){let e,l,n=t[0]&&Mn(t);return{c(){n&&n.c(),e=be()},m(r,i){n&&n.m(r,i),P(r,e,i),l=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&w(n,1)):(n=Mn(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(J(),C(n,1,1,()=>{n=null}),Y())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&T(e)}}}let Kl=1e3;function Vl(t,e,l){let n=null;const r=Ye.subscribe(i=>{l(0,n=i),setTimeout(()=>{Ye.set(null)},Kl)});return Xe(()=>{r()}),[n]}class Jl extends K{constructor(e){super(),q(this,e,Vl,ql,H,{})}}function Yl(t){let e,l=[{class:"avatar"},t[1]],n={};for(let r=0;r<l.length;r+=1)n=he(n,l[r]);return{c(){e=v("div"),dt(e,n),F(e,"no-avatar",!t[0].photo_url),F(e,"svelte-1iem2ua",!0)},m(r,i){P(r,e,i)},p(r,[i]){dt(e,n=Qt(l,[{class:"avatar"},i&2&&r[1]])),F(e,"no-avatar",!r[0].photo_url),F(e,"svelte-1iem2ua",!0)},i:W,o:W,d(r){r&&T(e)}}}function Ql(t,e,l){let n,{user:r}=e;return t.$$set=i=>{"user"in i&&l(0,r=i.user)},t.$$.update=()=>{t.$$.dirty&1&&l(1,n=r.photo_url?{"style:backgroundImage":"url(user.photo_url)"}:{"data-letter":r.name[0]})},[r,n]}class vt extends K{constructor(e){super(),q(this,e,Ql,Yl,H,{user:0})}}const ze=V(!1);var Ge=(t=>(t.Black="black",t.White="white",t.Watcher="watcher",t))(Ge||{}),ut=(t=>(t.Play="Play",t.GameOver="Game Over",t.GameNotStarted="Game is not started",t))(ut||{});function Nn(t){let e,l,n,r,i,s=t[0].name+"",o,a,c,u,g=t[0].color+"",m,p,b;return n=new vt({props:{user:t[0]}}),{c(){e=v("div"),l=v("div"),D(n.$$.fragment),r=$(),i=v("div"),o=M(s),a=v("br"),c=$(),u=v("small"),m=M(g),_(u,"class","player-color svelte-1d0lbgm"),_(i,"class","name ml-4"),_(l,"class","d-flex y-center px-4 py-5"),_(e,"class","player-info svelte-1d0lbgm"),F(e,"highlight",t[2]===t[0].color)},m(f,h){P(f,e,h),d(e,l),N(n,l,null),d(l,r),d(l,i),d(i,o),d(i,a),d(i,c),d(i,u),d(u,m),b=!0},p(f,h){const y={};h&1&&(y.user=f[0]),n.$set(y),(!b||h&1)&&s!==(s=f[0].name+"")&&ne(o,s),(!b||h&1)&&g!==(g=f[0].color+"")&&ne(m,g),h&5&&F(e,"highlight",f[2]===f[0].color)},i(f){b||(w(n.$$.fragment,f),Q(()=>{p||(p=se(e,_e,{y:20,duration:500},!0)),p.run(1)}),b=!0)},o(f){C(n.$$.fragment,f),p||(p=se(e,_e,{y:20,duration:500},!1)),p.run(0),b=!1},d(f){f&&T(e),j(n),f&&p&&p.end()}}}function Zl(t){let e;return{c(){e=v("div"),e.textContent="Waiting...",_(e,"class","d-flex y-center fadind-loading svelte-1d0lbgm")},m(l,n){P(l,e,n)},p:W,i:W,o:W,d(l){l&&T(e)}}}function Xl(t){let e,l,n,r=t[1].name+"",i,s,o,a,c=t[1].color+"",u,g,m,p,b;return m=new vt({props:{user:t[1]}}),{c(){e=v("div"),l=v("div"),n=v("div"),i=M(r),s=v("br"),o=$(),a=v("small"),u=M(c),g=$(),D(m.$$.fragment),_(a,"class","player-color svelte-1d0lbgm"),_(n,"class","name mr-4"),_(l,"class","d-flex y-center px-4 py-5 text-right"),_(e,"class","player-info svelte-1d0lbgm"),F(e,"highlight",t[2]===t[1].color)},m(f,h){P(f,e,h),d(e,l),d(l,n),d(n,i),d(n,s),d(n,o),d(n,a),d(a,u),d(l,g),N(m,l,null),b=!0},p(f,h){(!b||h&2)&&r!==(r=f[1].name+"")&&ne(i,r),(!b||h&2)&&c!==(c=f[1].color+"")&&ne(u,c);const y={};h&2&&(y.user=f[1]),m.$set(y),h&6&&F(e,"highlight",f[2]===f[1].color)},i(f){b||(w(m.$$.fragment,f),Q(()=>{p||(p=se(e,_e,{y:20,duration:500},!0)),p.run(1)}),b=!0)},o(f){C(m.$$.fragment,f),p||(p=se(e,_e,{y:20,duration:500},!1)),p.run(0),b=!1},d(f){f&&T(e),j(m),f&&p&&p.end()}}}function er(t){let e,l,n,r,i,s=t[0]&&Nn(t);const o=[Xl,Zl],a=[];function c(u,g){return u[1]?0:1}return n=c(t),r=a[n]=o[n](t),{c(){e=v("div"),s&&s.c(),l=$(),r.c(),_(e,"class","players-container d-flex space-between")},m(u,g){P(u,e,g),s&&s.m(e,null),d(e,l),a[n].m(e,null),i=!0},p(u,[g]){u[0]?s?(s.p(u,g),g&1&&w(s,1)):(s=Nn(u),s.c(),w(s,1),s.m(e,l)):s&&(J(),C(s,1,1,()=>{s=null}),Y());let m=n;n=c(u),n===m?a[n].p(u,g):(J(),C(a[m],1,1,()=>{a[m]=null}),Y(),r=a[n],r?r.p(u,g):(r=a[n]=o[n](u),r.c()),w(r,1),r.m(e,null))},i(u){i||(w(s),w(r),i=!0)},o(u){C(s),C(r),i=!1},d(u){u&&T(e),s&&s.d(),a[n].d()}}}function tr(t,e,l){let{player:n}=e,{opponent:r}=e,{moveTurn:i}=e;return t.$$set=s=>{"player"in s&&l(0,n=s.player),"opponent"in s&&l(1,r=s.opponent),"moveTurn"in s&&l(2,i=s.moveTurn)},[n,r,i]}class nr extends K{constructor(e){super(),q(this,e,tr,er,H,{player:0,opponent:1,moveTurn:2})}}function jn(t,e,l){const n=t.slice();return n[2]=e[l],n}function Bn(t){let e,l;return e=new cl({props:{figure:t[2]}}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.figure=n[2]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function lr(t){let e,l,n,r,i=t[0].length+"",s,o,a,c,u,g,m=t[0],p=[];for(let f=0;f<m.length;f+=1)p[f]=Bn(jn(t,m,f));const b=f=>C(p[f],1,1,()=>{p[f]=null});return{c(){e=v("div"),l=v("div"),n=M(`Eaten\r
    (`),r=v("span"),s=M(i),o=M(")"),a=$(),c=v("div");for(let f=0;f<p.length;f+=1)p[f].c();_(l,"class","headline mb-4"),_(c,"class","figures-stack d-flex svelte-1iz6yxn"),F(c,"right",t[1]),_(e,"class","figures-wrapp px-4 svelte-1iz6yxn"),F(e,"text-right",t[1])},m(f,h){P(f,e,h),d(e,l),d(l,n),d(l,r),d(r,s),d(l,o),d(e,a),d(e,c);for(let y=0;y<p.length;y+=1)p[y].m(c,null);g=!0},p(f,[h]){if((!g||h&1)&&i!==(i=f[0].length+"")&&ne(s,i),h&1){m=f[0];let y;for(y=0;y<m.length;y+=1){const R=jn(f,m,y);p[y]?(p[y].p(R,h),w(p[y],1)):(p[y]=Bn(R),p[y].c(),w(p[y],1),p[y].m(c,null))}for(J(),y=m.length;y<p.length;y+=1)b(y);Y()}h&2&&F(c,"right",f[1]),h&2&&F(e,"text-right",f[1])},i(f){if(!g){for(let h=0;h<m.length;h+=1)w(p[h]);Q(()=>{u||(u=se(e,_e,{y:40,duration:700,delay:400},!0)),u.run(1)}),g=!0}},o(f){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)C(p[h]);u||(u=se(e,_e,{y:40,duration:700,delay:400},!1)),u.run(0),g=!1},d(f){f&&T(e),pt(p,f),f&&u&&u.end()}}}function rr(t,e,l){let{figures:n}=e,{startsOnTheRight:r=!1}=e;return t.$$set=i=>{"figures"in i&&l(0,n=i.figures),"startsOnTheRight"in i&&l(1,r=i.startsOnTheRight)},[n,r]}class In extends K{constructor(e){super(),q(this,e,rr,lr,H,{figures:0,startsOnTheRight:1})}}function ir(t){let e,l,n,r,i,s,o,a,c,u,g,m=t[0].winner.name+"",p,b,f,h,y,R,A,S,x=t[0].loser.name+"",k,E,z;return c=new vt({props:{user:t[0].winner}}),R=new vt({props:{user:t[0].loser}}),{c(){e=v("div"),l=v("div"),n=v("div"),n.textContent="Game over",r=$(),i=v("div"),s=v("div"),o=v("h2"),o.textContent="Winner",a=$(),D(c.$$.fragment),u=$(),g=v("span"),p=M(m),b=$(),f=v("div"),h=v("h2"),h.textContent="Loser",y=$(),D(R.$$.fragment),A=$(),S=v("span"),k=M(x),_(n,"class","message-title title-3 text-center p-2 mb-5 svelte-1qgfvw8"),_(s,"class","message-winner"),_(f,"class","message-winner"),_(i,"class","d-flex space-between"),_(l,"class","message p-5 svelte-1qgfvw8"),_(e,"class","message-overlay d-flex center svelte-1qgfvw8")},m(B,te){P(B,e,te),d(e,l),d(l,n),d(l,r),d(l,i),d(i,s),d(s,o),d(s,a),N(c,s,null),d(s,u),d(s,g),d(g,p),d(i,b),d(i,f),d(f,h),d(f,y),N(R,f,null),d(f,A),d(f,S),d(S,k),z=!0},p(B,[te]){const ve={};te&1&&(ve.user=B[0].winner),c.$set(ve),(!z||te&1)&&m!==(m=B[0].winner.name+"")&&ne(p,m);const le={};te&1&&(le.user=B[0].loser),R.$set(le),(!z||te&1)&&x!==(x=B[0].loser.name+"")&&ne(k,x)},i(B){z||(w(c.$$.fragment,B),w(R.$$.fragment,B),E||Q(()=>{E=bt(e,ae,{duration:500}),E.start()}),z=!0)},o(B){C(c.$$.fragment,B),C(R.$$.fragment,B),z=!1},d(B){B&&T(e),j(c),j(R)}}}function sr(t,e,l){let{gameResults:n}=e;return t.$$set=r=>{"gameResults"in r&&l(0,n=r.gameResults)},[n]}class or extends K{constructor(e){super(),q(this,e,sr,ir,H,{gameResults:0})}}function Ot(t){const e=t.slice(),l=e[0]==="black"?e[3]:e[4];e[20]=l;const n=e[1]==="black"?e[3]:e[4];return e[21]=n,e}function Dn(t){let e,l;return e=new or({props:{gameResults:t[8]}}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},p(n,r){const i={};r&256&&(i.gameResults=n[8]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Ln(t){let e,l;return e=new nr({props:{player:t[10],opponent:t[9],moveTurn:t[6]}}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},p(n,r){const i={};r&1024&&(i.player=n[10]),r&512&&(i.opponent=n[9]),r&64&&(i.moveTurn=n[6]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Fn(t){let e,l,n,r,i;return l=new In({props:{figures:t[20]}}),r=new In({props:{figures:t[21],startsOnTheRight:!0}}),{c(){e=v("div"),D(l.$$.fragment),n=$(),D(r.$$.fragment),_(e,"class","figures d-flex space-between")},m(s,o){P(s,e,o),N(l,e,null),d(e,n),N(r,e,null),i=!0},p(s,o){const a={};o&25&&(a.figures=s[20]),l.$set(a);const c={};o&26&&(c.figures=s[21]),r.$set(c)},i(s){i||(w(l.$$.fragment,s),w(r.$$.fragment,s),i=!0)},o(s){C(l.$$.fragment,s),C(r.$$.fragment,s),i=!1},d(s){s&&T(e),j(l),j(r)}}}function ar(t){var b;let e,l,n,r,i,s,o,a,c,u;e=new Jl({});let g=t[7]&&t[8]&&Dn(t);o=new Gl({props:{cells:t[2],highlightedCells:t[11],playerColor:(b=t[10])==null?void 0:b.color}});let m=t[5]&&Ln(t),p=t[0]&&Fn(Ot(t));return{c(){D(e.$$.fragment),l=$(),g&&g.c(),n=$(),r=v("div"),i=v("div"),s=v("div"),D(o.$$.fragment),a=$(),m&&m.c(),c=$(),p&&p.c(),_(s,"class","board-wrapp svelte-ez6xnd"),_(i,"class","board-container svelte-ez6xnd"),_(r,"class","h-100 w-100 d-flex column"),Mt(r,"pointer-events",t[7]?"none":"unset",!1)},m(f,h){N(e,f,h),P(f,l,h),g&&g.m(f,h),P(f,n,h),P(f,r,h),d(r,i),d(i,s),N(o,s,null),d(r,a),m&&m.m(r,null),d(r,c),p&&p.m(r,null),u=!0},p(f,[h]){var R;f[7]&&f[8]?g?(g.p(f,h),h&384&&w(g,1)):(g=Dn(f),g.c(),w(g,1),g.m(n.parentNode,n)):g&&(J(),C(g,1,1,()=>{g=null}),Y());const y={};h&4&&(y.cells=f[2]),h&1024&&(y.playerColor=(R=f[10])==null?void 0:R.color),o.$set(y),f[5]?m?(m.p(f,h),h&32&&w(m,1)):(m=Ln(f),m.c(),w(m,1),m.m(r,c)):m&&(J(),C(m,1,1,()=>{m=null}),Y()),f[0]?p?(p.p(Ot(f),h),h&1&&w(p,1)):(p=Fn(Ot(f)),p.c(),w(p,1),p.m(r,null)):p&&(J(),C(p,1,1,()=>{p=null}),Y()),h&128&&Mt(r,"pointer-events",f[7]?"none":"unset",!1)},i(f){u||(w(e.$$.fragment,f),w(g),w(o.$$.fragment,f),w(m),w(p),u=!0)},o(f){C(e.$$.fragment,f),C(g),C(o.$$.fragment,f),C(m),C(p),u=!1},d(f){j(e,f),f&&T(l),g&&g.d(f),f&&T(n),f&&T(r),j(o),m&&m.d(),p&&p.d()}}}function cr(t,e,l){let n,r,i,{roomId:s="Rhmw41bl55d02ae"}=e,{username:o}=Ce("user"),a;ut.GameNotStarted;let c=[],u=[],g=[],m=[],p,b,f,h,y=!1,R;const A=async()=>{l(5,p=await fetch(`${Je}/api/room/${s}`).then(x=>x.json()))};xt(()=>{ze.set(!0),f=new Ml(s,o),f.onConnect(async()=>{try{await A()}catch(x){console.log(x)}finally{ze.set(!1)}}).board(x=>{l(2,c=x),Ke.highlight.set([])}).eat(({white:x,black:k})=>{x.length!==g.length&&l(3,g=x),k.length!==m.length&&l(4,m=k)}).participant(x=>{var k,E;l(13,b=x.players),x.watchers,((k=b.white)==null?void 0:k.name)===o?l(0,a=Ge.White):((E=b.black)==null?void 0:E.name)===o?l(0,a=Ge.Black):l(0,a=Ge.Watcher)}).gameStatus(x=>{console.log(x),x===ut.Play?window.Telegram.WebApp.ready():x===ut.GameOver&&l(7,y=!0)}).highlight(x=>{Ke.highlight.set(x)}).moveTurn(x=>{l(6,h=x)}).gameOver(x=>{l(8,R=x),console.log(x)}).error(x=>{Ye.set(x)})});const S=ol.subscribe(x=>{if(!p)return;if(!x){Ke.highlight.set([]);return}const{from:k,to:E}=x;E?k&&E&&f.sendEvent(Bt.Move,{from:k,to:E}):f.sendEvent(Bt.Highlight,{from:k})});return Xe(()=>{S(),f.end()}),t.$$set=x=>{"roomId"in x&&l(12,s=x.roomId)},t.$$.update=()=>{t.$$.dirty&1&&l(1,n=!!a&&a===Ge.Black?"white":"black"),t.$$.dirty&8193&&l(10,r=!!a&&b[a]),t.$$.dirty&8195&&l(9,i=!!a&&b[n])},[a,n,c,g,m,p,h,y,R,i,r,u,s,b]}class ur extends K{constructor(e){super(),q(this,e,cr,ar,H,{roomId:12})}}const yt={},wt={};function Tt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function fr(t,e){const l=[];let n=Tt(t);return{get location(){return n},listen(r){l.push(r);const i=()=>{n=Tt(t),r({location:n,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const s=l.indexOf(r);l.splice(s,1)}},navigate(r,{state:i,replace:s=!1}={}){i={...i,key:Date.now()+""};try{s?t.history.replaceState(i,null,r):t.history.pushState(i,null,r)}catch{t.location[s?"replace":"assign"](r)}n=Tt(t),l.forEach(o=>o({location:n,action:"PUSH"}))}}}function pr(t="/"){let e=0;const l=[{pathname:t,search:""}],n=[];return{get location(){return l[e]},addEventListener(r,i){},removeEventListener(r,i){},history:{get entries(){return l},get index(){return e},get state(){return n[e]},pushState(r,i,s){const[o,a=""]=s.split("?");e++,l.push({pathname:o,search:a}),n.push(r)},replaceState(r,i,s){const[o,a=""]=s.split("?");l[e]={pathname:o,search:a},n[e]=r}}}}const dr=Boolean(typeof window!="undefined"&&window.document&&window.document.createElement),It=fr(dr?window:pr()),{navigate:gr}=It,ul=/^:(.+)/,Wn=4,mr=3,hr=2,_r=1,br=1;function Dt(t,e){return t.substr(0,e.length)===e}function vr(t){return t===""}function yr(t){return ul.test(t)}function fl(t){return t[0]==="*"}function Qe(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Pt(t){return t.replace(/(^\/+|\/+$)/g,"")}function wr(t,e){const l=t.default?0:Qe(t.path).reduce((n,r)=>(n+=Wn,vr(r)?n+=br:yr(r)?n+=hr:fl(r)?n-=Wn+_r:n+=mr,n),0);return{route:t,score:l,index:e}}function kr(t){return t.map(wr).sort((e,l)=>e.score<l.score?1:e.score>l.score?-1:e.index-l.index)}function pl(t,e){let l,n;const[r]=e.split("?"),i=Qe(r),s=i[0]==="",o=kr(t);for(let a=0,c=o.length;a<c;a++){const u=o[a].route;let g=!1;if(u.default){n={route:u,params:{},uri:e};continue}const m=Qe(u.path),p={},b=Math.max(i.length,m.length);let f=0;for(;f<b;f++){const h=m[f],y=i[f];if(h!==void 0&&fl(h)){const A=h==="*"?"*":h.slice(1);p[A]=i.slice(f).map(decodeURIComponent).join("/");break}if(y===void 0){g=!0;break}let R=ul.exec(h);if(R&&!s){const A=decodeURIComponent(y);p[R[1]]=A}else if(h!==y){g=!0;break}}if(!g){l={route:u,params:p,uri:"/"+i.slice(0,f).join("/")};break}}return l||n||null}function xr(t,e){return pl([t],e)}function Et(t,e){return t+(e?`?${e}`:"")}function Cr(t,e){if(Dt(t,"/"))return t;const[l,n]=t.split("?"),[r]=e.split("?"),i=Qe(l),s=Qe(r);if(i[0]==="")return Et(r,n);if(!Dt(i[0],".")){const c=s.concat(i).join("/");return Et((r==="/"?"":"/")+c,n)}const o=s.concat(i),a=[];return o.forEach(c=>{c===".."?a.pop():c!=="."&&a.push(c)}),Et("/"+a.join("/"),n)}function Hn(t,e){return`${Pt(e==="/"?t:`${Pt(t)}/${Pt(e)}`)}/`}function $r(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Rr(t){let e;const l=t[9].default,n=Wt(l,t,t[8],null);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),e=!0},p(r,[i]){n&&n.p&&(!e||i&256)&&Ut(n,l,r,r[8],e?Ht(l,r[8],i,null):Gt(r[8]),null)},i(r){e||(w(n,r),e=!0)},o(r){C(n,r),e=!1},d(r){n&&n.d(r)}}}function Sr(t,e,l){let n,r,i,{$$slots:s={},$$scope:o}=e,{basepath:a="/"}=e,{url:c=null}=e;const u=Ce(yt),g=Ce(wt),m=V([]);me(t,m,S=>l(6,r=S));const p=V(null);let b=!1;const f=u||V(c?{pathname:c}:It.location);me(t,f,S=>l(5,n=S));const h=g?g.routerBase:V({path:a,uri:a});me(t,h,S=>l(7,i=S));const y=jl([h,p],([S,x])=>{if(x===null)return S;const{path:k}=S,{route:E,uri:z}=x;return{path:E.default?k:E.path.replace(/\*.*$/,""),uri:z}});function R(S){const{path:x}=i;let{path:k}=S;if(S._path=k,S.path=Hn(x,k),typeof window=="undefined"){if(b)return;const E=xr(S,n.pathname);E&&(p.set(E),b=!0)}else m.update(E=>(E.push(S),E))}function A(S){m.update(x=>{const k=x.indexOf(S);return x.splice(k,1),x})}return u||(xt(()=>It.listen(x=>{f.set(x.location)})),Nt(yt,f)),Nt(wt,{activeRoute:p,base:h,routerBase:y,registerRoute:R,unregisterRoute:A}),t.$$set=S=>{"basepath"in S&&l(3,a=S.basepath),"url"in S&&l(4,c=S.url),"$$scope"in S&&l(8,o=S.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128){const{path:S}=i;m.update(x=>(x.forEach(k=>k.path=Hn(S,k._path)),x))}if(t.$$.dirty&96){const S=pl(r,n.pathname);p.set(S)}},[m,f,h,a,c,n,r,i,o,s]}class Or extends K{constructor(e){super(),q(this,e,Sr,Rr,H,{basepath:3,url:4})}}const Tr=t=>({params:t&4,location:t&16}),Un=t=>({params:t[2],location:t[4]});function Gn(t){let e,l,n,r;const i=[Er,Pr],s=[];function o(a,c){return a[0]!==null?0:1}return e=o(t),l=s[e]=i[e](t),{c(){l.c(),n=be()},m(a,c){s[e].m(a,c),P(a,n,c),r=!0},p(a,c){let u=e;e=o(a),e===u?s[e].p(a,c):(J(),C(s[u],1,1,()=>{s[u]=null}),Y(),l=s[e],l?l.p(a,c):(l=s[e]=i[e](a),l.c()),w(l,1),l.m(n.parentNode,n))},i(a){r||(w(l),r=!0)},o(a){C(l),r=!1},d(a){s[e].d(a),a&&T(n)}}}function Pr(t){let e;const l=t[10].default,n=Wt(l,t,t[9],Un);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),e=!0},p(r,i){n&&n.p&&(!e||i&532)&&Ut(n,l,r,r[9],e?Ht(l,r[9],i,Tr):Gt(r[9]),Un)},i(r){e||(w(n,r),e=!0)},o(r){C(n,r),e=!1},d(r){n&&n.d(r)}}}function Er(t){let e,l,n;const r=[{location:t[4]},t[2],t[3]];var i=t[0];function s(o){let a={};for(let c=0;c<r.length;c+=1)a=he(a,r[c]);return{props:a}}return i&&(e=new i(s())),{c(){e&&D(e.$$.fragment),l=be()},m(o,a){e&&N(e,o,a),P(o,l,a),n=!0},p(o,a){const c=a&28?Qt(r,[a&16&&{location:o[4]},a&4&&On(o[2]),a&8&&On(o[3])]):{};if(i!==(i=o[0])){if(e){J();const u=e;C(u.$$.fragment,1,0,()=>{j(u,1)}),Y()}i?(e=new i(s()),D(e.$$.fragment),w(e.$$.fragment,1),N(e,l.parentNode,l)):e=null}else i&&e.$set(c)},i(o){n||(e&&w(e.$$.fragment,o),n=!0)},o(o){e&&C(e.$$.fragment,o),n=!1},d(o){o&&T(l),e&&j(e,o)}}}function Ar(t){let e,l,n=t[1]!==null&&t[1].route===t[7]&&Gn(t);return{c(){n&&n.c(),e=be()},m(r,i){n&&n.m(r,i),P(r,e,i),l=!0},p(r,[i]){r[1]!==null&&r[1].route===r[7]?n?(n.p(r,i),i&2&&w(n,1)):(n=Gn(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(J(),C(n,1,1,()=>{n=null}),Y())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&T(e)}}}function zr(t,e,l){let n,r,{$$slots:i={},$$scope:s}=e,{path:o=""}=e,{component:a=null}=e;const{registerRoute:c,unregisterRoute:u,activeRoute:g}=Ce(wt);me(t,g,h=>l(1,n=h));const m=Ce(yt);me(t,m,h=>l(4,r=h));const p={path:o,default:o===""};let b={},f={};return c(p),typeof window!="undefined"&&Xe(()=>{u(p)}),t.$$set=h=>{l(13,e=he(he({},e),zt(h))),"path"in h&&l(8,o=h.path),"component"in h&&l(0,a=h.component),"$$scope"in h&&l(9,s=h.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&n&&n.route===p&&l(2,b=n.params);{const{path:h,component:y,...R}=e;l(3,f=R)}},e=zt(e),[a,n,b,f,r,g,m,p,o,s,i]}class At extends K{constructor(e){super(),q(this,e,zr,Ar,H,{path:8,component:0})}}function Mr(t){let e,l,n,r;const i=t[16].default,s=Wt(i,t,t[15],null);let o=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],a={};for(let c=0;c<o.length;c+=1)a=he(a,o[c]);return{c(){e=v("a"),s&&s.c(),dt(e,a)},m(c,u){P(c,e,u),s&&s.m(e,null),l=!0,n||(r=G(e,"click",t[5]),n=!0)},p(c,[u]){s&&s.p&&(!l||u&32768)&&Ut(s,i,c,c[15],l?Ht(i,c[15],u,null):Gt(c[15]),null),dt(e,a=Qt(o,[(!l||u&1)&&{href:c[0]},(!l||u&4)&&{"aria-current":c[2]},u&2&&c[1],u&64&&c[6]]))},i(c){l||(w(s,c),l=!0)},o(c){C(s,c),l=!1},d(c){c&&T(e),s&&s.d(c),n=!1,r()}}}function Nr(t,e,l){let n;const r=["to","replace","state","getProps"];let i=$n(e,r),s,o,{$$slots:a={},$$scope:c}=e,{to:u="#"}=e,{replace:g=!1}=e,{state:m={}}=e,{getProps:p=()=>({})}=e;const{base:b}=Ce(wt);me(t,b,k=>l(14,o=k));const f=Ce(yt);me(t,f,k=>l(13,s=k));const h=Cl();let y,R,A,S;function x(k){if(h("click",k),$r(k)){k.preventDefault();const E=s.pathname===y||g;gr(y,{state:m,replace:E})}}return t.$$set=k=>{e=he(he({},e),zt(k)),l(6,i=$n(e,r)),"to"in k&&l(7,u=k.to),"replace"in k&&l(8,g=k.replace),"state"in k&&l(9,m=k.state),"getProps"in k&&l(10,p=k.getProps),"$$scope"in k&&l(15,c=k.$$scope)},t.$$.update=()=>{t.$$.dirty&16512&&l(0,y=u==="/"?o.uri:Cr(u,o.uri)),t.$$.dirty&8193&&l(11,R=Dt(s.pathname,y)),t.$$.dirty&8193&&l(12,A=y===s.pathname),t.$$.dirty&4096&&l(2,n=A?"page":void 0),t.$$.dirty&15361&&l(1,S=p({location:s,href:y,isPartiallyCurrent:R,isCurrent:A}))},[y,S,n,b,f,x,i,u,g,m,p,R,A,s,o,c,a]}class jr extends K{constructor(e){super(),q(this,e,Nr,Mr,H,{to:7,replace:8,state:9,getProps:10})}}function qn(t){let e,l,n;return{c(){e=v("div"),e.innerHTML=`<div class="spinner-wrapp d-flex center svelte-upyxi7"></div> 
    <svg class="spinner svelte-upyxi7" width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.4625 20.5C40.3116 20.5 41.006 21.1893 40.9424 22.0361C40.6784 25.5496 39.5122 28.9452 37.5451 31.8892C35.2926 35.2604 32.0909 37.8879 28.345 39.4395C24.5991 40.9911 20.4773 41.3971 16.5006 40.6061C12.524 39.8151 8.87129 37.8627 6.00431 34.9957C3.13733 32.1287 1.1849 28.476 0.393902 24.4994C-0.397095 20.5227 0.00887314 16.4009 1.56047 12.655C3.11207 8.9091 5.7396 5.70744 9.11081 3.45487C12.0548 1.48777 15.4504 0.321606 18.9639 0.0576201C19.8107 -0.00600024 20.5 0.688362 20.5 1.5375C20.5 2.38664 19.8103 3.06795 18.9644 3.14278C16.0599 3.39972 13.2573 4.38254 10.8192 6.01164C7.95366 7.92632 5.72026 10.6477 4.4014 13.8317C3.08254 17.0157 2.73747 20.5193 3.40982 23.8994C4.08216 27.2796 5.74173 30.3844 8.17866 32.8213C10.6156 35.2583 13.7204 36.9178 17.1006 37.5902C20.4807 38.2625 23.9843 37.9175 27.1683 36.5986C30.3523 35.2797 33.0737 33.0463 34.9884 30.1808C36.6175 27.7427 37.6003 24.9401 37.8572 22.0356C37.932 21.1897 38.6134 20.5 39.4625 20.5Z" fill="#6B7278" class="svelte-upyxi7"></path></svg>`,_(e,"class","spinner-bg d-flex center svelte-upyxi7")},m(r,i){P(r,e,i),n=!0},i(r){n||(Q(()=>{l||(l=se(e,ae,{},!0)),l.run(1)}),n=!0)},o(r){l||(l=se(e,ae,{},!1)),l.run(0),n=!1},d(r){r&&T(e),r&&l&&l.end()}}}function Br(t){let e,l,n=t[0]&&qn();return{c(){n&&n.c(),e=be()},m(r,i){n&&n.m(r,i),P(r,e,i),l=!0},p(r,[i]){r[0]?n?i&1&&w(n,1):(n=qn(),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(J(),C(n,1,1,()=>{n=null}),Y())},i(r){l||(w(n),l=!0)},o(r){C(n),l=!1},d(r){n&&n.d(r),r&&T(e)}}}function Ir(t,e,l){let n=!1;const r=ze.subscribe(i=>{l(0,n=i)});return Xe(()=>{r()}),[n]}class Dr extends K{constructor(e){super(),q(this,e,Ir,Br,H,{})}}var Lt=(t=>(t.users="/api/users",t.rooms="/api/rooms",t.createRoom="/api/room",t))(Lt||{});function Lr(t){let e;return{c(){e=M("Play")},m(l,n){P(l,e,n)},d(l){l&&T(e)}}}function Fr(t){let e,l,n,r=t[0].id+"",i,s,o,a;return o=new jr({props:{to:"./game/"+t[0].id,class:"btn medium h-100 mr-4",$$slots:{default:[Lr]},$$scope:{ctx:t}}}),{c(){e=v("div"),l=v("div"),n=v("span"),i=M(r),s=$(),D(o.$$.fragment),_(n,"class","headline"),_(l,"class","room-info pl-4 d-flex space-between y-center svelte-17jgl3g"),_(e,"class","room d-flex svelte-17jgl3g")},m(c,u){P(c,e,u),d(e,l),d(l,n),d(n,i),d(l,s),N(o,l,null),a=!0},p(c,[u]){(!a||u&1)&&r!==(r=c[0].id+"")&&ne(i,r);const g={};u&1&&(g.to="./game/"+c[0].id),u&2&&(g.$$scope={dirty:u,ctx:c}),o.$set(g)},i(c){a||(w(o.$$.fragment,c),a=!0)},o(c){C(o.$$.fragment,c),a=!1},d(c){c&&T(e),j(o)}}}function Wr(t,e,l){let{room:n}=e;return t.$$set=r=>{"room"in r&&l(0,n=r.room)},[n]}class Hr extends K{constructor(e){super(),q(this,e,Wr,Fr,H,{room:0})}}function Kn(t,e,l){const n=t.slice();return n[6]=e[l],n}function Ur(t){let e;return{c(){e=v("div"),e.innerHTML='<div class="text my-5 svelte-jw8n2v">No rooms</div>',_(e,"class","wrapp py-5 text-center svelte-jw8n2v")},m(l,n){P(l,e,n)},p:W,i:W,o:W,d(l){l&&T(e)}}}function Gr(t){let e,l,n=t[0],r=[];for(let s=0;s<n.length;s+=1)r[s]=Vn(Kn(t,n,s));const i=s=>C(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=be()},m(s,o){for(let a=0;a<r.length;a+=1)r[a].m(s,o);P(s,e,o),l=!0},p(s,o){if(o&1){n=s[0];let a;for(a=0;a<n.length;a+=1){const c=Kn(s,n,a);r[a]?(r[a].p(c,o),w(r[a],1)):(r[a]=Vn(c),r[a].c(),w(r[a],1),r[a].m(e.parentNode,e))}for(J(),a=n.length;a<r.length;a+=1)i(a);Y()}},i(s){if(!l){for(let o=0;o<n.length;o+=1)w(r[o]);l=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)C(r[o]);l=!1},d(s){pt(r,s),s&&T(e)}}}function Vn(t){let e,l;return e=new Hr({props:{room:t[6]}}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.room=n[6]),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function qr(t){let e,l,n,r,i,s,o,a,c,u,g,m;const p=[Gr,Ur],b=[];function f(h,y){return h[1]?0:1}return r=f(t),i=b[r]=p[r](t),{c(){e=v("h3"),e.textContent="Rooms:",l=$(),n=v("div"),i.c(),s=$(),o=v("div"),a=v("button"),c=M("Create room"),_(e,"class","px-2 title text-left"),_(a,"class","btn large outlined"),a.disabled=t[2],_(o,"class","text-center my-5"),_(n,"class","rooms-list mt-2")},m(h,y){P(h,e,y),P(h,l,y),P(h,n,y),b[r].m(n,null),d(n,s),d(n,o),d(o,a),d(a,c),u=!0,g||(m=G(a,"click",t[3]),g=!0)},p(h,[y]){let R=r;r=f(h),r===R?b[r].p(h,y):(J(),C(b[R],1,1,()=>{b[R]=null}),Y(),i=b[r],i?i.p(h,y):(i=b[r]=p[r](h),i.c()),w(i,1),i.m(n,s)),(!u||y&4)&&(a.disabled=h[2])},i(h){u||(w(i),u=!0)},o(h){C(i),u=!1},d(h){h&&T(e),h&&T(l),h&&T(n),b[r].d(),g=!1,m()}}}function Kr(t,e,l){let n,r;me(t,ze,c=>l(4,r=c));let i=[],s=!1;const o=async()=>{const u=await(await fetch(Je+Lt.rooms)).json();l(0,i=u),l(1,s=i.length>0)};xt(async()=>{await o()});const a=async()=>{ze.set(!0);try{await fetch(Je+Lt.createRoom,{method:"POST"}).then(u=>u.json())&&await o()}catch{Ye.set("Something went wrong")}finally{ze.set(!1)}};return t.$$.update=()=>{t.$$.dirty&17&&l(2,n=i.length===0&&r)},[i,s,n,a,r]}class Vr extends K{constructor(e){super(),q(this,e,Kr,qr,H,{})}}function Jn(t,e,l){const n=t.slice();return n[25]=e[l],n}function Yn(t,e,l){const n=t.slice();return n[25]=e[l],n}function Qn(t){let e,l,n=t[25].style+"",r,i,s,o;function a(){return t[13](t[25])}return{c(){e=v("button"),l=M("Test "),r=M(n),_(e,"class",i="btn "+t[25].class+" svelte-94ousw")},m(c,u){P(c,e,u),d(e,l),d(e,r),s||(o=G(e,"click",a),s=!0)},p(c,u){t=c},d(c){c&&T(e),s=!1,o()}}}function Zn(t){let e,l,n=t[25].type+"",r,i,s,o,a;function c(){return t[14](t[25])}return{c(){var u;e=v("button"),l=M("Test "),r=M(n),_(e,"class",i="btn "+((u=t[25].class)!=null?u:"")+" svelte-94ousw"),e.disabled=s=window.Telegram.WebApp.version<6.1},m(u,g){P(u,e,g),d(e,l),d(e,r),o||(a=G(e,"click",c),o=!0)},p(u,g){t=u},d(u){u&&T(e),o=!1,a()}}}function Jr(t){var xn;let e,l,n,r,i,s,o,a,c,u,g,m,p,b,f,h,y,R,A,S,x,k,E,z,B,te,ve,le,et=((xn=t[1])!=null?xn:"Not set")+"",Ct,Zt,$e,Ne,Xt,Re,en,tn,Z,tt,nn,nt,ln,L,je,rn,oe,sn,Be,on,ue,an,Ie,cn,fe,un,De,fn,pe,pn,Le,dn,de,gn,Fe,mn,lt,hn,Se,ye,_n,we,bn,Oe,rt,vn,ke,yn,it=JSON.stringify(t[7],null,5)+"",$t,wn,Rt,kn,Te=t[9],X=[];for(let O=0;O<Te.length;O+=1)X[O]=Qn(Yn(t,Te,O));let Pe=t[10],ee=[];for(let O=0;O<Pe.length;O+=1)ee[O]=Zn(Jn(t,Pe,O));return{c(){e=v("div"),l=v("div"),l.textContent=`Version ${window.Telegram.WebApp.version}`,n=$(),r=v("div"),i=v("span"),s=M("is ready: $"),o=M(t[0]),a=$(),c=v("button"),c.textContent="Ready",u=$(),g=v("div"),m=v("div"),m.textContent="Haptics",p=$(),b=v("div");for(let O=0;O<X.length;O+=1)X[O].c();f=$(),h=v("div"),y=v("div"),y.textContent="Notifications",R=$(),A=v("div");for(let O=0;O<ee.length;O+=1)ee[O].c();S=$(),x=v("div"),k=v("div"),k.textContent="Colors",E=$(),z=v("input"),B=$(),te=v("span"),ve=M("Value: "),le=v("code"),Ct=M(et),Zt=$(),$e=v("div"),Ne=v("button"),Ne.textContent="Set header",Xt=$(),Re=v("button"),en=M("Set background"),tn=$(),Z=v("div"),tt=v("div"),tt.textContent="Buttons",nn=$(),nt=v("div"),nt.textContent="Main button:",ln=$(),L=v("div"),je=v("label"),je.textContent="Button text",rn=$(),oe=v("input"),sn=$(),Be=v("label"),Be.textContent="Button text color",on=$(),ue=v("input"),an=$(),Ie=v("label"),Ie.textContent="Button bg color",cn=$(),fe=v("input"),un=$(),De=v("label"),De.textContent="Active",fn=$(),pe=v("input"),pn=$(),Le=v("label"),Le.textContent="Visible",dn=$(),de=v("input"),gn=$(),Fe=v("button"),Fe.textContent="Apply",mn=$(),lt=v("div"),lt.textContent="Back button:",hn=$(),Se=v("div"),ye=v("button"),ye.textContent="Show",_n=$(),we=v("button"),we.textContent="Hide",bn=$(),Oe=v("div"),rt=v("div"),rt.textContent="Telegram data",vn=$(),ke=v("pre"),yn=M("      "),$t=M(it),wn=M(`\r
    `),_(l,"class","p5 text-center"),_(i,"class","p-4"),_(c,"class","btn w-100 p-5"),_(r,"class","wrapp mt-5 py-5 svelte-94ousw"),_(m,"class","title-2"),_(b,"class","buttons mt-5 svelte-94ousw"),_(g,"class","wrapp py-5 svelte-94ousw"),_(y,"class","title-2"),_(A,"class","buttons mt-5 svelte-94ousw"),_(h,"class","wrapp py-5 svelte-94ousw"),_(k,"class","title-2"),_(z,"type","text"),_(z,"class","w-100 mt-5 mb-2 p-5"),_(Ne,"class","btn outline"),_(Re,"class","btn outline"),Re.disabled=window.Telegram.WebApp.version<6.1,_($e,"class","buttons mt-5 svelte-94ousw"),_(x,"class","wrapp py-5 svelte-94ousw"),_(tt,"class","title-2"),_(nt,"class","title"),_(je,"for","mainbutton-text"),_(je,"class","center svelte-94ousw"),_(oe,"type","text"),_(oe,"id","mainbutton-text"),_(oe,"class","p-4"),_(Be,"for","mainbutton-text-color"),_(Be,"class","center svelte-94ousw"),_(ue,"type","color"),_(ue,"id","mainbutton-text-color"),_(ue,"class","w-100 h-100"),_(Ie,"for","mainbutton-bg-color"),_(Ie,"class","center svelte-94ousw"),_(fe,"type","color"),_(fe,"id","mainbutton-bg-color"),_(fe,"class","w-100 h-100"),_(De,"for","mainbutton-active"),_(De,"class","center svelte-94ousw"),_(pe,"type","checkbox"),_(pe,"id","mainbutton-active"),_(pe,"class","w-100 h-100"),_(Le,"for","mainbutton-visible"),_(Le,"class","center svelte-94ousw"),_(de,"type","checkbox"),_(de,"id","mainbutton-visible"),_(de,"class","w-100 h-100"),_(L,"class","buttons mt-5 svelte-94ousw"),_(Fe,"class","btn outline large w-100 my-5"),_(lt,"class","title"),_(ye,"class","btn"),F(ye,"outline",t[8]),_(we,"class","btn"),F(we,"outline",!t[8]),_(Se,"class","buttons mt-5 svelte-94ousw"),_(Z,"class","wrapp py-5 svelte-94ousw"),_(rt,"class","title-2"),_(ke,"class","p-3"),Mt(ke,"overflow","auto"),_(Oe,"class","wrapp py-5 svelte-94ousw"),_(e,"class","my-5 px-3")},m(O,U){P(O,e,U),d(e,l),d(e,n),d(e,r),d(r,i),d(i,s),d(i,o),d(r,a),d(r,c),d(e,u),d(e,g),d(g,m),d(g,p),d(g,b);for(let re=0;re<X.length;re+=1)X[re].m(b,null);d(e,f),d(e,h),d(h,y),d(h,R),d(h,A);for(let re=0;re<ee.length;re+=1)ee[re].m(A,null);d(e,S),d(e,x),d(x,k),d(x,E),d(x,z),ge(z,t[1]),d(x,B),d(x,te),d(te,ve),d(te,le),d(le,Ct),d(x,Zt),d(x,$e),d($e,Ne),d($e,Xt),d($e,Re),d(Re,en),d(e,tn),d(e,Z),d(Z,tt),d(Z,nn),d(Z,nt),d(Z,ln),d(Z,L),d(L,je),d(L,rn),d(L,oe),ge(oe,t[2]),d(L,sn),d(L,Be),d(L,on),d(L,ue),ge(ue,t[3]),d(L,an),d(L,Ie),d(L,cn),d(L,fe),ge(fe,t[4]),d(L,un),d(L,De),d(L,fn),d(L,pe),pe.checked=t[5],d(L,pn),d(L,Le),d(L,dn),d(L,de),de.checked=t[6],d(Z,gn),d(Z,Fe),d(Z,mn),d(Z,lt),d(Z,hn),d(Z,Se),d(Se,ye),d(Se,_n),d(Se,we),d(e,bn),d(e,Oe),d(Oe,rt),d(Oe,vn),d(Oe,ke),d(ke,yn),d(ke,$t),d(ke,wn),Rt||(kn=[G(c,"click",t[12]),G(z,"input",t[15]),G(Ne,"click",t[16]),G(Re,"click",t[17]),G(oe,"input",t[18]),G(ue,"input",t[19]),G(fe,"input",t[20]),G(pe,"change",t[21]),G(de,"change",t[22]),G(Fe,"click",t[11]),G(ye,"click",t[23]),G(we,"click",t[24])],Rt=!0)},p(O,[U]){var re;if(U&1&&ne(o,O[0]),U&512){Te=O[9];let I;for(I=0;I<Te.length;I+=1){const We=Yn(O,Te,I);X[I]?X[I].p(We,U):(X[I]=Qn(We),X[I].c(),X[I].m(b,null))}for(;I<X.length;I+=1)X[I].d(1);X.length=Te.length}if(U&1024){Pe=O[10];let I;for(I=0;I<Pe.length;I+=1){const We=Jn(O,Pe,I);ee[I]?ee[I].p(We,U):(ee[I]=Zn(We),ee[I].c(),ee[I].m(A,null))}for(;I<ee.length;I+=1)ee[I].d(1);ee.length=Pe.length}U&2&&z.value!==O[1]&&ge(z,O[1]),U&2&&et!==(et=((re=O[1])!=null?re:"Not set")+"")&&ne(Ct,et),U&4&&oe.value!==O[2]&&ge(oe,O[2]),U&8&&ge(ue,O[3]),U&16&&ge(fe,O[4]),U&32&&(pe.checked=O[5]),U&64&&(de.checked=O[6]),U&256&&F(ye,"outline",O[8]),U&256&&F(we,"outline",!O[8]),U&128&&it!==(it=JSON.stringify(O[7],null,5)+"")&&ne($t,it)},i:W,o:W,d(O){O&&T(e),pt(X,O),pt(ee,O),Rt=!1,ce(kn)}}}function Yr(t,e,l){let n,r;const i=[{style:"light",class:"medium outline"},{style:"medium",class:"medium"},{style:"heavy",class:"medium"},{style:"rigid",class:"medium"},{style:"soft",class:"medium outline"}],s=[{type:"success",class:""},{type:"warning"},{type:"error"}];let o,a,c,u,g,m;const p=()=>{window.Telegram.WebApp.MainButton.setParams({text:a,color:u,text_color:c,is_active:g,is_visible:m})};let b=!1;const f=()=>{window.Telegram.WebApp.ready(),setTimeout(()=>{l(0,b=!0)},100)},h=le=>window.Telegram.WebApp.HapticFeedback.impactOccurred(le.style),y=le=>window.Telegram.WebApp.HapticFeedback.notificationOccurred(le.type);function R(){o=this.value,l(1,o)}const A=()=>window.Telegram.WebApp.setHeaderColor(o),S=()=>window.Telegram.WebApp.setBackgroundColor(o);function x(){a=this.value,l(2,a)}function k(){c=this.value,l(3,c)}function E(){u=this.value,l(4,u)}function z(){g=this.checked,l(5,g)}function B(){m=this.checked,l(6,m)}const te=()=>window.Telegram.WebApp.BackButton.show(),ve=()=>window.Telegram.WebApp.BackButton.hide();return t.$$.update=()=>{t.$$.dirty&1&&l(7,r=window.Telegram)},l(8,n=window.Telegram.WebApp.BackButton.isVisible),[b,o,a,c,u,g,m,r,n,i,s,p,f,h,y,R,A,S,x,k,E,z,B,te,ve]}class Qr extends K{constructor(e){super(),q(this,e,Yr,Jr,H,{})}}function Zr(t){let e,l;return e=new ur({props:{roomId:t[0].id}}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},p(n,r){const i={};r&1&&(i.roomId=n[0].id),e.$set(i)},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Xr(t){let e,l;return e=new Qr({}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function ei(t){let e,l;return e=new Vr({}),{c(){D(e.$$.fragment)},m(n,r){N(e,n,r),l=!0},i(n){l||(w(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function ti(t){let e,l,n,r,i,s;return e=new At({props:{path:"/game/:id",$$slots:{default:[Zr,({params:o})=>({0:o}),({params:o})=>o?1:0]},$$scope:{ctx:t}}}),n=new At({props:{path:"/tg-test",$$slots:{default:[Xr]},$$scope:{ctx:t}}}),i=new At({props:{path:"/",$$slots:{default:[ei]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),l=$(),D(n.$$.fragment),r=$(),D(i.$$.fragment)},m(o,a){N(e,o,a),P(o,l,a),N(n,o,a),P(o,r,a),N(i,o,a),s=!0},p(o,a){const c={};a&3&&(c.$$scope={dirty:a,ctx:o}),e.$set(c);const u={};a&2&&(u.$$scope={dirty:a,ctx:o}),n.$set(u);const g={};a&2&&(g.$$scope={dirty:a,ctx:o}),i.$set(g)},i(o){s||(w(e.$$.fragment,o),w(n.$$.fragment,o),w(i.$$.fragment,o),s=!0)},o(o){C(e.$$.fragment,o),C(n.$$.fragment,o),C(i.$$.fragment,o),s=!1},d(o){j(e,o),o&&T(l),j(n,o),o&&T(r),j(i,o)}}}function ni(t){let e,l,n,r,i;return e=new Dr({}),r=new Or({props:{basepath:Al,$$slots:{default:[ti]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),l=$(),n=v("main"),D(r.$$.fragment),_(n,"class","main svelte-4h074o")},m(s,o){N(e,s,o),P(s,l,o),P(s,n,o),N(r,n,null),i=!0},p(s,[o]){const a={};o&2&&(a.$$scope={dirty:o,ctx:s}),r.$set(a)},i(s){i||(w(e.$$.fragment,s),w(r.$$.fragment,s),i=!0)},o(s){C(e.$$.fragment,s),C(r.$$.fragment,s),i=!1},d(s){j(e,s),s&&T(l),s&&T(n),j(r)}}}function li(t){var e,l;return Nt("user",(l=(e=window.Telegram.WebApp.initDataUnsafe)==null?void 0:e.user)!=null?l:{username:prompt("username","serg"),id:Date.now(),first_name:"Serg",last_name:"",language_code:"en"}),[]}class ri extends K{constructor(e){super(),q(this,e,li,ni,H,{})}}new ri({target:document.getElementById("app")});
